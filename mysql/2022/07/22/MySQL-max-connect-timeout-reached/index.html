<!DOCTYPE html><html lang="zh-CN" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="MySQL Max connect timeout reached é”™è¯¯æ’æŸ¥" /><meta name="author" content="æ‹›æ–‡æ¡ƒ" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="çº¿ä¸Šç¯å¢ƒé‡åˆ°è¿‡ â€˜java.sql.SQLException: Max connect timeout reached while reaching hostgroup 0 after 10000msâ€™ è¿™æ ·çš„é”™è¯¯ï¼Œè®°å½•ä¸€ä¸‹äº‹æ•…æ’æŸ¥è¿‡ç¨‹ã€‚" /><meta property="og:description" content="çº¿ä¸Šç¯å¢ƒé‡åˆ°è¿‡ â€˜java.sql.SQLException: Max connect timeout reached while reaching hostgroup 0 after 10000msâ€™ è¿™æ ·çš„é”™è¯¯ï¼Œè®°å½•ä¸€ä¸‹äº‹æ•…æ’æŸ¥è¿‡ç¨‹ã€‚" /><link rel="canonical" href="https://blog.zwt.io/mysql/2022/07/22/MySQL-max-connect-timeout-reached/" /><meta property="og:url" content="https://blog.zwt.io/mysql/2022/07/22/MySQL-max-connect-timeout-reached/" /><meta property="og:site_name" content="zwt" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-22T17:40:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="MySQL Max connect timeout reached é”™è¯¯æ’æŸ¥" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"æ‹›æ–‡æ¡ƒ"},"dateModified":"2022-07-27T17:26:13+08:00","datePublished":"2022-07-22T17:40:00+08:00","description":"çº¿ä¸Šç¯å¢ƒé‡åˆ°è¿‡ â€˜java.sql.SQLException: Max connect timeout reached while reaching hostgroup 0 after 10000msâ€™ è¿™æ ·çš„é”™è¯¯ï¼Œè®°å½•ä¸€ä¸‹äº‹æ•…æ’æŸ¥è¿‡ç¨‹ã€‚","headline":"MySQL Max connect timeout reached é”™è¯¯æ’æŸ¥","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.zwt.io/mysql/2022/07/22/MySQL-max-connect-timeout-reached/"},"url":"https://blog.zwt.io/mysql/2022/07/22/MySQL-max-connect-timeout-reached/"}</script><title>MySQL Max connect timeout reached é”™è¯¯æ’æŸ¥ | zwt</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="zwt"><meta name="application-name" content="zwt"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://tender.zwt.io/img/large.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">zwt</a></div><div class="site-subtitle font-italic">blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>é¦–é¡µ</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>åˆ†ç±»</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>æ ‡ç­¾</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>å½’æ¡£</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>å…³äº</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> é¦–é¡µ </a> </span> <span>MySQL Max connect timeout reached é”™è¯¯æ’æŸ¥</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> æ–‡ç« </div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="æœç´¢..."> </span> <span id="search-cancel" >å–æ¶ˆ</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>MySQL Max connect timeout reached é”™è¯¯æ’æŸ¥</h1><div class="post-meta text-muted"> <span> å‘è¡¨äº <em class="" data-ts="1658482800" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-07-22 </em> </span> <span> æ›´æ–°äº <em class="" data-ts="1658913973" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-07-27 </em> </span><div class="d-flex justify-content-between"> <span> ä½œè€… <em> zwt </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3217 å­—"> <em>17 åˆ†é’Ÿ</em>é˜…è¯»</span></div></div></div><div class="post-content"><blockquote><p>çº¿ä¸Šç¯å¢ƒé‡åˆ°è¿‡ â€˜java.sql.SQLException: Max connect timeout reached while reaching hostgroup 0 after 10000msâ€™ è¿™æ ·çš„é”™è¯¯ï¼Œè®°å½•ä¸€ä¸‹äº‹æ•…æ’æŸ¥è¿‡ç¨‹ã€‚</p></blockquote><h3 id="äº‹æ•…æƒ…å†µæè¿°åŠç´§æ€¥å¤„ç†"><span class="mr-2">äº‹æ•…æƒ…å†µæè¿°åŠç´§æ€¥å¤„ç†</span><a href="#äº‹æ•…æƒ…å†µæè¿°åŠç´§æ€¥å¤„ç†" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>å½“å¤©ä¸‹åˆ 5 ç‚¹å·¦å³ï¼Œæ”¶åˆ°æŠ•è¯‰è¯´ç”¨æˆ·ç™»å…¥ä¸äº†ç½‘ç«™ï¼Œç®¡ç†åå°æœ‰å‘ç° <code class="language-plaintext highlighter-rouge">Max connect timeout reached while reaching hostgroup 0 after 10000ms</code> é”™è¯¯ï¼Œå¤§æ¦‚å¯ä»¥åˆ¤æ–­æ˜¯å› ä¸ºæ•°æ®åº“è¿æ¥é—®é¢˜å¯¼è‡´æ‰€æœ‰ç”¨åˆ°æ•°æ®åº“æŸ¥è¯¢çš„ API éƒ½å‡ºç°äº†è¿™ä¸ªé”™è¯¯ï¼Œæ‰€ä»¥ç½‘ç«™ã€ç®¡ç†åå°ã€Appséƒ½ç™»å½•ä¸ä¸Šã€‚</p><p><img data-src="https://tender.zwt.io/img/mysql-max-connect-timeout-2022-07-22_17-38-55.png" alt="MySQL-max-connect-timeout-error" data-proofer-ignore></p><p align="center">MySQL è¾¾åˆ°æœ€å¤§è¿æ¥è¶…æ—¶é”™è¯¯</p><p>ç´§æ€¥å¤„ç†å°±æ˜¯å°†æ–°æœåŠ¡å…ˆåœæ‰ï¼Œä»¥å…å½±å“åˆ°åŸå…ˆæ­£å¸¸çš„æœåŠ¡ã€‚</p><h3 id="hikari-cp-æ•°æ®åº“è¿æ¥æ± é…ç½®æ£€æŸ¥"><span class="mr-2">Hikari CP æ•°æ®åº“è¿æ¥æ± é…ç½®æ£€æŸ¥</span><a href="#hikari-cp-æ•°æ®åº“è¿æ¥æ± é…ç½®æ£€æŸ¥" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>åˆæ­¥æ€€ç–‘æ˜¯æ–°ä¸Šçº¿çš„ä¸€ä¸ªæœåŠ¡çš„ Hikari CP é…ç½®é¡¹ä¸æ°å½“å¯¼è‡´å‡ºç°è¿™æ ·çš„é—®é¢˜ã€‚å…ˆçœ‹çœ‹å½“æ—¶æ­£å¼ç¯å¢ƒçš„ Spring Boot é…ç½®æ–‡ä»¶é‡Œé¢å…³äº Hikari CP çš„é…ç½®å‚æ•°ï¼š</p><div class="language-yml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="na">spring</span><span class="pi">:</span>
  <span class="na">datasource</span><span class="pi">:</span>
    <span class="na">hikari</span><span class="pi">:</span>
      <span class="na">poolName</span><span class="pi">:</span> <span class="s">Hikari</span>
      <span class="na">auto-commit</span><span class="pi">:</span> <span class="kc">false</span>
      <span class="na">minimum-idle</span><span class="pi">:</span> <span class="m">100</span>
      <span class="na">maximum-pool-size</span><span class="pi">:</span> <span class="m">200</span>
      <span class="na">data-source-properties</span><span class="pi">:</span>
        <span class="na">cachePrepStmts</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">prepStmtCacheSize</span><span class="pi">:</span> <span class="m">250</span>
        <span class="na">prepStmtCacheSqlLimit</span><span class="pi">:</span> <span class="m">2048</span>
        <span class="na">useServerPrepStmts</span><span class="pi">:</span> <span class="kc">true</span>
</pre></table></code></div></div><p>è¿™ä¸ªè·Ÿä»¥å¾€ä½¿ç”¨çš„é…ç½®ï¼Œæˆ–è€…è¯´è·Ÿ <em>JHipster</em> é»˜è®¤çš„é…ç½®æœ‰ç‚¹ç‚¹åŒºåˆ«ã€‚ä¸»è¦æ˜¯æ˜¾å¼æŒ‡å®šäº† <code class="language-plaintext highlighter-rouge">minimum-idle</code> å’Œ <code class="language-plaintext highlighter-rouge">maximum-pool-size</code> çš„å€¼ã€‚ ä¸‹é¢è¯´è¯´è¿™ä¸¤ä¸ªå‚æ•°çš„ä½œç”¨ï¼Œæ ¹æ® <a href="https://github.com/brettwooldridge/HikariCP#configuration-knobs-baby">HikariCP GitHub</a>:</p><blockquote><p>ğŸ”¢<code class="language-plaintext highlighter-rouge">minimumIdle</code><br /> This property controls the minimum number of <em>idle connections</em> that HikariCP tries to maintain in the pool. If the idle connections dip below this value and total connections in the pool are less than <code class="language-plaintext highlighter-rouge">maximumPoolSize</code>, HikariCP will make a best effort to add additional connections quickly and efficiently. However, for maximum performance and responsiveness to spike demands, we recommend <em>not</em> setting this value and instead allowing HikariCP to act as a <em>fixed size</em> connection pool. <em>Default: same as maximumPoolSize</em><br /> è¿™ä¸ªå±æ€§æ§åˆ¶ HikariCP åœ¨æ± ä¸­å°è¯•ç»´æŠ¤çš„æœ€å°<em>ç©ºé—²è¿æ¥</em>æ•°é‡ã€‚å¦‚æœç©ºé—²è¿æ¥æ•°ä½äºè¿™ä¸ªå€¼ï¼Œå¹¶ä¸”åœ¨æ± ä¸­çš„æ€»è¿æ¥æ•°å°‘äº <code class="language-plaintext highlighter-rouge">maximumPoolSize</code> çš„å€¼ï¼Œ HikariCP ä¼šå°½å¯èƒ½è¿…é€Ÿå’Œé«˜æ•ˆåœ°æ·»åŠ å¦å¤–çš„è¿æ¥ã€‚ç„¶è€Œï¼Œä¸ºäº†æœ€å¤§åŒ–æ€§èƒ½å’Œå¯¹äºå¯¹çªå¢è¯·æ±‚çš„å“åº”æ€§ï¼Œæˆ‘ä»¬å»ºè®®<em>ä¸</em>è®¾ç½®è¿™ä¸ªå€¼ï¼Œè€Œè®© HikariCP å»ä½œä¸ºä¸€ä¸ª<em>å›ºå®šå¤§å°</em>è¿æ¥æ± ã€‚<em>é»˜è®¤ï¼šåŒ maximumPoolSize</em> ã€‚</p></blockquote><p>æ‰€ä»¥æ²¡æœ‰å¿…è¦è®¾ç½® <code class="language-plaintext highlighter-rouge">minimumIdle</code> çš„å€¼ã€‚æ¥ä¸‹æ¥çœ‹çœ‹ <code class="language-plaintext highlighter-rouge">maximum-pool-size</code> çš„ç”¨é€”ï¼š</p><blockquote><p>ğŸ”¢<code class="language-plaintext highlighter-rouge">maximumPoolSize</code><br /> This property controls the maximum size that the pool is allowed to reach, including both idle and in-use connections. Basically this value will determine the maximum number of actual connections to the database backend. A reasonable value for this is best determined by your execution environment. When the pool reaches this size, and no idle connections are available, calls to getConnection() will block for up to <code class="language-plaintext highlighter-rouge">connectionTimeout</code> milliseconds before timing out. Please read <a href="https://github.com/brettwooldridge/HikariCP/wiki/About-Pool-Sizing">about pool sizing</a>. <em>Default: 10</em><br /> è¿™ä¸ªå±æ€§æ§åˆ¶è¿æ¥æ± èƒ½è¾¾åˆ°çš„æœ€å¤§å¤§å°ï¼ŒåŒ…æ‹¬ç©ºé—²å’Œæ­£åœ¨ä½¿ç”¨çš„è¿æ¥ã€‚åŸºæœ¬ä¸Šè¿™ä¸ªå€¼ä¼šå†³å®šä¸æ•°æ®åº“åç«¯è¿æ¥çš„å®é™…æœ€å¤§æ•°é‡ã€‚ä¸€ä¸ªåˆç†çš„å€¼æœ€å¥½å–å†³äºä½ çš„ç¨‹åºæ‰§è¡Œç¯å¢ƒã€‚å½“è¿æ¥æ± è¾¾åˆ°è¿™ä¸ªå¤§å°ï¼Œå¹¶ä¸”æ²¡æœ‰ç©ºé—²è¿æ¥å¯ç”¨ï¼Œè°ƒç”¨ getConnection() ä¼šé˜»å¡ç›´è‡³ <code class="language-plaintext highlighter-rouge">connectionTimeout</code> æ¯«ç§’ç›´åˆ°è¶…æ—¶ã€‚è¯·çœ‹<a href="https://github.com/brettwooldridge/HikariCP/wiki/About-Pool-Sizing">å…³äºè¿æ¥æ± å¤§å°</a>ã€‚<em>é»˜è®¤ï¼š10</em><br /></p></blockquote><h3 id="hikari-cp-å¸¸ç”¨é…ç½®å±æ€§github-readme"><span class="mr-2">Hikari CP å¸¸ç”¨é…ç½®å±æ€§ï¼ˆGitHub READMEï¼‰</span><a href="#hikari-cp-å¸¸ç”¨é…ç½®å±æ€§github-readme" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>HikariCP comes with <em>sane</em> defaults that perform well in most deployments without additional tweaking. <strong>Every property is optional, except for the â€œessentialsâ€ marked below.</strong></p><p><sup>ğŸ“</sup>Â <em>HikariCP uses milliseconds for all time values.</em></p><p>ğŸš¨Â HikariCP relies on accurate timers for both performance and reliability. It is <em>imperative</em> that your server is synchronized with a time-source such as an NTP server. <em>Especially</em> if your server is running within a virtual machine. Why? <a href="https://dba.stackexchange.com/a/171020">Read more here</a>. <strong>Do not rely on hypervisor settings to â€œsynchronizeâ€ the clock of the virtual machine. Configure time-source synchronization inside the virtual machine.</strong> If you come asking for support on an issue that turns out to be caused by lack time synchronization, you will be taunted publicly on Twitter.</p><h4 id="essentials"><span class="mr-2">Essentials</span><a href="#essentials" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>ğŸ”¤<code class="language-plaintext highlighter-rouge">dataSourceClassName</code><br /> This is the name of the <code class="language-plaintext highlighter-rouge">DataSource</code> class provided by the JDBC driver. è¿™æ˜¯ JDBC é©±åŠ¨æä¾›çš„çš„ <code class="language-plaintext highlighter-rouge">DataSource</code> å®ç°ç±»çš„åç§°ã€‚ Consult the documentation for your specific JDBC driver to get this class name, or see the <a href="https://github.com/brettwooldridge/HikariCP#popular-datasource-class-names">table</a> below.</p><p>è¯·æŸ¥é˜…ä½ æ‰€ç”¨çš„ç‰¹å®š JDBC é©±åŠ¨çš„æ–‡æ¡£å»æ‰¾åˆ°è¿™ä¸ªç±»çš„åç§°ï¼Œæˆ–è€…çœ‹çœ‹ä¸‹æ–¹çš„<a href="https://github.com/brettwooldridge/HikariCP#popular-datasource-class-names">è¡¨æ ¼</a>ã€‚</p><p>Note XA data sources are not supported. XA requires a real transaction manager like <a href="https://github.com/bitronix/btm">bitronix</a>. Note that you do not need this property if you are using <code class="language-plaintext highlighter-rouge">jdbcUrl</code> for â€œold-schoolâ€ DriverManager-based JDBC driver configuration. <em>Default: none</em></p><p><em>- or -</em></p><p>ğŸ”¤<code class="language-plaintext highlighter-rouge">jdbcUrl</code><br /> This property directs HikariCP to use â€œDriverManager-basedâ€ configuration. We feel that DataSource-based configuration (above) is superior for a variety of reasons (see below), but for many deployments there is little significant difference. <strong>When using this property with â€œoldâ€ drivers, you may also need to set the <code class="language-plaintext highlighter-rouge">driverClassName</code> property, but try it first without.</strong> Note that if this property is used, you may still use <em>DataSource</em> properties to configure your driver and is in fact recommended over driver parameters specified in the URL itself. <em>Default: none</em></p><hr /><p>ğŸ”¤<code class="language-plaintext highlighter-rouge">username</code><br /> This property sets the default authentication username used when obtaining <em>Connections</em> from the underlying driver. Note that for DataSources this works in a very deterministic fashion by calling <code class="language-plaintext highlighter-rouge">DataSource.getConnection(*username*, password)</code> on the underlying DataSource. However, for Driver-based configurations, every driver is different. In the case of Driver-based, HikariCP will use this <code class="language-plaintext highlighter-rouge">username</code> property to set a <code class="language-plaintext highlighter-rouge">user</code> property in the <code class="language-plaintext highlighter-rouge">Properties</code> passed to the driverâ€™s <code class="language-plaintext highlighter-rouge">DriverManager.getConnection(jdbcUrl, props)</code> call. If this is not what you need, skip this method entirely and call <code class="language-plaintext highlighter-rouge">addDataSourceProperty("username", ...)</code>, for example. <em>Default: none</em></p><p>ğŸ”¤<code class="language-plaintext highlighter-rouge">password</code><br /> This property sets the default authentication password used when obtaining <em>Connections</em> from the underlying driver. Note that for DataSources this works in a very deterministic fashion by calling <code class="language-plaintext highlighter-rouge">DataSource.getConnection(username, *password*)</code> on the underlying DataSource. However, for Driver-based configurations, every driver is different. In the case of Driver-based, HikariCP will use this <code class="language-plaintext highlighter-rouge">password</code> property to set a <code class="language-plaintext highlighter-rouge">password</code> property in the <code class="language-plaintext highlighter-rouge">Properties</code> passed to the driverâ€™s <code class="language-plaintext highlighter-rouge">DriverManager.getConnection(jdbcUrl, props)</code> call. If this is not what you need, skip this method entirely and call <code class="language-plaintext highlighter-rouge">addDataSourceProperty("pass", ...)</code>, for example. <em>Default: none</em></p><h4 id="frequently-used"><span class="mr-2">Frequently used</span><a href="#frequently-used" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>âœ…<code class="language-plaintext highlighter-rouge">autoCommit</code><br /> This property controls the default auto-commit behavior of connections returned from the pool. It is a boolean value. <em>Default: true</em></p><p>â³<code class="language-plaintext highlighter-rouge">connectionTimeout</code><br /> This property controls the maximum number of milliseconds that a client (thatâ€™s you) will wait for a connection from the pool. If this time is exceeded without a connection becoming available, a SQLException will be thrown. Lowest acceptable connection timeout is 250 ms. <em>Default: 30000 (30 seconds)</em></p><p>â³<code class="language-plaintext highlighter-rouge">idleTimeout</code><br /> This property controls the maximum amount of time that a connection is allowed to sit idle in the pool. <strong>This setting only applies when <code class="language-plaintext highlighter-rouge">minimumIdle</code> is defined to be less than <code class="language-plaintext highlighter-rouge">maximumPoolSize</code>.</strong> Idle connections will <em>not</em> be retired once the pool reaches <code class="language-plaintext highlighter-rouge">minimumIdle</code> connections. Whether a connection is retired as idle or not is subject to a maximum variation of +30 seconds, and average variation of +15 seconds. A connection will never be retired as idle <em>before</em> this timeout. A value of 0 means that idle connections are never removed from the pool. The minimum allowed value is 10000ms (10 seconds). <em>Default: 600000 (10 minutes)</em></p><p>â³<code class="language-plaintext highlighter-rouge">keepaliveTime</code><br /> This property controls how frequently HikariCP will attempt to keep a connection alive, in order to prevent it from being timed out by the database or network infrastructure. This value must be less than the <code class="language-plaintext highlighter-rouge">maxLifetime</code> value. A â€œkeepaliveâ€ will only occur on an idle connection. When the time arrives for a â€œkeepaliveâ€ against a given connection, that connection will be removed from the pool, â€œpingedâ€, and then returned to the pool. The â€˜pingâ€™ is one of either: invocation of the JDBC4 <code class="language-plaintext highlighter-rouge">isValid()</code> method, or execution of the <code class="language-plaintext highlighter-rouge">connectionTestQuery</code>. Typically, the duration out-of-the-pool should be measured in single digit milliseconds or even sub-millisecond, and therefore should have little or no noticible performance impact. The minimum allowed value is 30000ms (30 seconds), but a value in the range of minutes is most desirable. <em>Default: 0 (disabled)</em></p><p>â³<code class="language-plaintext highlighter-rouge">maxLifetime</code><br /> This property controls the maximum lifetime of a connection in the pool. An in-use connection will never be retired, only when it is closed will it then be removed. On a connection-by-connection basis, minor negative attenuation is applied to avoid mass-extinction in the pool. <strong>We strongly recommend setting this value, and it should be several seconds shorter than any database or infrastructure imposed connection time limit.</strong> A value of 0 indicates no maximum lifetime (infinite lifetime), subject of course to the <code class="language-plaintext highlighter-rouge">idleTimeout</code> setting. The minimum allowed value is 30000ms (30 seconds). <em>Default: 1800000 (30 minutes)</em></p><p>ğŸ”¤<code class="language-plaintext highlighter-rouge">connectionTestQuery</code><br /> <strong>If your driver supports JDBC4 we strongly recommend not setting this property.</strong> This is for â€œlegacyâ€ drivers that do not support the JDBC4 <code class="language-plaintext highlighter-rouge">Connection.isValid() API</code>. This is the query that will be executed just before a connection is given to you from the pool to validate that the connection to the database is still alive. <em>Again, try running the pool without this property, HikariCP will log an error if your driver is not JDBC4 compliant to let you know.</em> <em>Default: none</em></p><p>ğŸ”¢<code class="language-plaintext highlighter-rouge">minimumIdle</code><br /> This property controls the minimum number of <em>idle connections</em> that HikariCP tries to maintain in the pool. If the idle connections dip below this value and total connections in the pool are less than <code class="language-plaintext highlighter-rouge">maximumPoolSize</code>, HikariCP will make a best effort to add additional connections quickly and efficiently. However, for maximum performance and responsiveness to spike demands, we recommend <em>not</em> setting this value and instead allowing HikariCP to act as a <em>fixed size</em> connection pool. <em>Default: same as maximumPoolSize</em></p><p>ğŸ”¢<code class="language-plaintext highlighter-rouge">maximumPoolSize</code><br /> This property controls the maximum size that the pool is allowed to reach, including both idle and in-use connections. Basically this value will determine the maximum number of actual connections to the database backend. A reasonable value for this is best determined by your execution environment. When the pool reaches this size, and no idle connections are available, calls to getConnection() will block for up to <code class="language-plaintext highlighter-rouge">connectionTimeout</code> milliseconds before timing out. Please read <a href="https://github.com/brettwooldridge/HikariCP/wiki/About-Pool-Sizing">about pool sizing</a>. <em>Default: 10</em></p><p>ğŸ“ˆ<code class="language-plaintext highlighter-rouge">metricRegistry</code><br /> This property is only available via programmatic configuration or IoC container. This property allows you to specify an instance of a <em>Codahale/Dropwizard</em> <code class="language-plaintext highlighter-rouge">MetricRegistry</code> to be used by the pool to record various metrics. See the <a href="https://github.com/brettwooldridge/HikariCP/wiki/Dropwizard-Metrics">Metrics</a> wiki page for details. <em>Default: none</em></p><p>ğŸ“ˆ<code class="language-plaintext highlighter-rouge">healthCheckRegistry</code><br /> This property is only available via programmatic configuration or IoC container. This property allows you to specify an instance of a <em>Codahale/Dropwizard</em> <code class="language-plaintext highlighter-rouge">HealthCheckRegistry</code> to be used by the pool to report current health information. See the <a href="https://github.com/brettwooldridge/HikariCP/wiki/Dropwizard-HealthChecks">Health Checks</a> wiki page for details. <em>Default: none</em></p><p>ğŸ”¤<code class="language-plaintext highlighter-rouge">poolName</code><br /> This property represents a user-defined name for the connection pool and appears mainly in logging and JMX management consoles to identify pools and pool configurations. <em>Default: auto-generated</em></p><h4 id="infrequently-used"><span class="mr-2">Infrequently used</span><a href="#infrequently-used" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>â³<code class="language-plaintext highlighter-rouge">initializationFailTimeout</code><br /> This property controls whether the pool will â€œfail fastâ€ if the pool cannot be seeded with an initial connection successfully. Any positive number is taken to be the number of milliseconds to attempt to acquire an initial connection; the application thread will be blocked during this period. If a connection cannot be acquired before this timeout occurs, an exception will be thrown. This timeout is applied <em>after</em> the <code class="language-plaintext highlighter-rouge">connectionTimeout</code> period. If the value is zero (0), HikariCP will attempt to obtain and validate a connection. If a connection is obtained, but fails validation, an exception will be thrown and the pool not started. However, if a connection cannot be obtained, the pool will start, but later efforts to obtain a connection may fail. A value less than zero will bypass any initial connection attempt, and the pool will start immediately while trying to obtain connections in the background. Consequently, later efforts to obtain a connection may fail. <em>Default: 1</em></p><p>â<code class="language-plaintext highlighter-rouge">isolateInternalQueries</code><br /> This property determines whether HikariCP isolates internal pool queries, such as the connection alive test, in their own transaction. Since these are typically read-only queries, it is rarely necessary to encapsulate them in their own transaction. This property only applies if <code class="language-plaintext highlighter-rouge">autoCommit</code> is disabled. <em>Default: false</em></p><p>â<code class="language-plaintext highlighter-rouge">allowPoolSuspension</code><br /> This property controls whether the pool can be suspended and resumed through JMX. This is useful for certain failover automation scenarios. When the pool is suspended, calls to <code class="language-plaintext highlighter-rouge">getConnection()</code> will <em>not</em> timeout and will be held until the pool is resumed. <em>Default: false</em></p><p>â<code class="language-plaintext highlighter-rouge">readOnly</code><br /> This property controls whether <em>Connections</em> obtained from the pool are in read-only mode by default. Note some databases do not support the concept of read-only mode, while others provide query optimizations when the <em>Connection</em> is set to read-only. Whether you need this property or not will depend largely on your application and database. <em>Default: false</em></p><p>â<code class="language-plaintext highlighter-rouge">registerMbeans</code><br /> This property controls whether or not JMX Management Beans (â€œMBeansâ€) are registered or not. <em>Default: false</em></p><p>ğŸ”¤<code class="language-plaintext highlighter-rouge">catalog</code><br /> This property sets the default <em>catalog</em> for databases that support the concept of catalogs. If this property is not specified, the default catalog defined by the JDBC driver is used. <em>Default: driver default</em></p><p>ğŸ”¤<code class="language-plaintext highlighter-rouge">connectionInitSql</code><br /> This property sets a SQL statement that will be executed after every new connection creation before adding it to the pool. If this SQL is not valid or throws an exception, it will be treated as a connection failure and the standard retry logic will be followed. <em>Default: none</em></p><p>ğŸ”¤<code class="language-plaintext highlighter-rouge">driverClassName</code><br /> HikariCP will attempt to resolve a driver through the DriverManager based solely on the <code class="language-plaintext highlighter-rouge">jdbcUrl</code>, but for some older drivers the <code class="language-plaintext highlighter-rouge">driverClassName</code> must also be specified. Omit this property unless you get an obvious error message indicating that the driver was not found. <em>Default: none</em></p><p>ğŸ”¤<code class="language-plaintext highlighter-rouge">transactionIsolation</code><br /> This property controls the default transaction isolation level of connections returned from the pool. If this property is not specified, the default transaction isolation level defined by the JDBC driver is used. Only use this property if you have specific isolation requirements that are common for all queries. The value of this property is the constant name from the <code class="language-plaintext highlighter-rouge">Connection</code> class such as <code class="language-plaintext highlighter-rouge">TRANSACTION_READ_COMMITTED</code>, <code class="language-plaintext highlighter-rouge">TRANSACTION_REPEATABLE_READ</code>, etc. <em>Default: driver default</em></p><p>â³<code class="language-plaintext highlighter-rouge">validationTimeout</code><br /> This property controls the maximum amount of time that a connection will be tested for aliveness. This value must be less than the <code class="language-plaintext highlighter-rouge">connectionTimeout</code>. Lowest acceptable validation timeout is 250 ms. <em>Default: 5000</em></p><p>â³<code class="language-plaintext highlighter-rouge">leakDetectionThreshold</code><br /> This property controls the amount of time that a connection can be out of the pool before a message is logged indicating a possible connection leak. A value of 0 means leak detection is disabled. Lowest acceptable value for enabling leak detection is 2000 (2 seconds). <em>Default: 0</em></p><p>â¡<code class="language-plaintext highlighter-rouge">dataSource</code><br /> This property is only available via programmatic configuration or IoC container. This property allows you to directly set the instance of the <code class="language-plaintext highlighter-rouge">DataSource</code> to be wrapped by the pool, rather than having HikariCP construct it via reflection. This can be useful in some dependency injection frameworks. When this property is specified, the <code class="language-plaintext highlighter-rouge">dataSourceClassName</code> property and all DataSource-specific properties will be ignored. <em>Default: none</em></p><p>ğŸ”¤<code class="language-plaintext highlighter-rouge">schema</code><br /> This property sets the default <em>schema</em> for databases that support the concept of schemas. If this property is not specified, the default schema defined by the JDBC driver is used. <em>Default: driver default</em></p><p>â¡<code class="language-plaintext highlighter-rouge">threadFactory</code><br /> This property is only available via programmatic configuration or IoC container. This property allows you to set the instance of the <code class="language-plaintext highlighter-rouge">java.util.concurrent.ThreadFactory</code> that will be used for creating all threads used by the pool. It is needed in some restricted execution environments where threads can only be created through a <code class="language-plaintext highlighter-rouge">ThreadFactory</code> provided by the application container. <em>Default: none</em></p><p>â¡<code class="language-plaintext highlighter-rouge">scheduledExecutor</code><br /> This property is only available via programmatic configuration or IoC container. This property allows you to set the instance of the <code class="language-plaintext highlighter-rouge">java.util.concurrent.ScheduledExecutorService</code> that will be used for various internally scheduled tasks. If supplying HikariCP with a <code class="language-plaintext highlighter-rouge">ScheduledThreadPoolExecutor</code> instance, it is recommended that <code class="language-plaintext highlighter-rouge">setRemoveOnCancelPolicy(true)</code> is used. <em>Default: none</em></p><hr /><h4 id="missing-knobs"><span class="mr-2">Missing Knobs</span><a href="#missing-knobs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>HikariCP has plenty of â€œknobsâ€ to turn as you can see above, but comparatively less than some other pools. This is a design philosophy. The HikariCP design aesthetic is Minimalism. In keeping with the <em>simple is better</em> or <em>less is more</em> design philosophy, some configuration axis are intentionally left out.</p><h4 id="statement-cache"><span class="mr-2">Statement Cache</span><a href="#statement-cache" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Many connection pools, including Apache DBCP, Vibur, c3p0 and others offer <code class="language-plaintext highlighter-rouge">PreparedStatement</code> caching. HikariCP does not. Why?</p><p>At the connection pool layer <code class="language-plaintext highlighter-rouge">PreparedStatements</code> can only be cached <em>per connection</em>. If your application has 250 commonly executed queries and a pool of 20 connections you are asking your database to hold on to 5000 query execution plans â€“ and similarly the pool must cache this many <code class="language-plaintext highlighter-rouge">PreparedStatements</code> and their related graph of objects.</p><p>Most major database JDBC drivers already have a Statement cache that can be configured, including PostgreSQL, Oracle, Derby, MySQL, DB2, and many others. JDBC drivers are in a unique position to exploit database specific features, and nearly all of the caching implementations are capable of sharing execution plans <em>across connections</em>. This means that instead of 5000 statements in memory and associated execution plans, your 250 commonly executed queries result in exactly 250 execution plans in the database. Clever implementations do not even retain <code class="language-plaintext highlighter-rouge">PreparedStatement</code> objects in memory at the driver-level but instead merely attach new instances to existing plan IDs.</p><p>Using a statement cache at the pooling layer is an <a href="https://en.wikipedia.org/wiki/Anti-pattern">anti-pattern</a>, and will negatively impact your application performance compared to driver-provided caches.</p><h4 id="log-statement-text--slow-query-logging"><span class="mr-2">Log Statement Text / Slow Query Logging</span><a href="#log-statement-text--slow-query-logging" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Like Statement caching, most major database vendors support statement logging through properties of their own driver. This includes Oracle, MySQL, Derby, MSSQL, and others. Some even support slow query logging. For those few databases that do not support it, several options are available. We have received <a href="https://github.com/brettwooldridge/HikariCP/issues/57#issuecomment-354647631">a report that p6spy works well</a>, and also note the availability of <a href="https://github.com/arthurblake/log4jdbc">log4jdbc</a> and <a href="https://code.google.com/p/jdbcdslog-exp/">jdbcdslog-exp</a>.</p><h4 id="rapid-recovery"><span class="mr-2">Rapid Recovery</span><a href="#rapid-recovery" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Please read the <a href="https://github.com/brettwooldridge/HikariCP/wiki/Rapid-Recovery">Rapid Recovery Guide</a> for details on how to configure your driver and system for proper recovery from database restart and network partition events.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/mysql/'>MySQL</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/mysql/" class="post-tag no-text-decoration" >MySQL</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> æœ¬æ–‡ç”±ä½œè€…æŒ‰ç…§ <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> è¿›è¡Œæˆæƒ</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">åˆ†äº«</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=MySQL+Max+connect+timeout+reached+%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5+-+zwt&url=https%3A%2F%2Fblog.zwt.io%2Fmysql%2F2022%2F07%2F22%2FMySQL-max-connect-timeout-reached%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=MySQL+Max+connect+timeout+reached+%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5+-+zwt&u=https%3A%2F%2Fblog.zwt.io%2Fmysql%2F2022%2F07%2F22%2FMySQL-max-connect-timeout-reached%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fblog.zwt.io%2Fmysql%2F2022%2F07%2F22%2FMySQL-max-connect-timeout-reached%2F&text=MySQL+Max+connect+timeout+reached+%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5+-+zwt" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="åˆ†äº«é“¾æ¥" data-title-succeed="é“¾æ¥å·²å¤åˆ¶ï¼"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">æœ€è¿‘æ›´æ–°</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/linux/2023/08/04/creating-pve-debian-cloud-init-template/">åˆ›å»º PVE debian cloud-init æ¨¡æ¿</a><li><a href="/linux/2023/03/20/esxi-cloud-init-example/">åœ¨ ESXi ä½¿ç”¨ Cloud-init å®‰è£…ç³»ç»Ÿçš„ä¾‹å­</a><li><a href="/java/2023/03/23/maven-default-http-blocker-override/">å…è®¸é«˜ç‰ˆæœ¬ maven ä½¿ç”¨ http ç§æœ‰ä»“åº“</a><li><a href="/minio/2022/07/25/install-minio-on-ubuntu/">åœ¨ Ubuntu å®‰è£… MinIO</a><li><a href="/virtualization/2023/02/24/proxmox-cloud-init-images/">åœ¨ pve ä½¿ç”¨ cloud-init é•œåƒ</a></ul></div><div id="access-tags"><div class="panel-heading">çƒ­é—¨æ ‡ç­¾</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring-boot/">Spring Boot</a> <a class="post-tag" href="/tags/reactive/">Reactive</a> <a class="post-tag" href="/tags/javafx/">JavaFX</a> <a class="post-tag" href="/tags/oca/">OCA</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/tutorial/">Tutorial</a> <a class="post-tag" href="/tags/rsocket/">RSocket</a> <a class="post-tag" href="/tags/%E6%95%99%E7%A8%8B/">æ•™ç¨‹</a> <a class="post-tag" href="/tags/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/">ç¬”è¯•é¢è¯•</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">æ–‡ç« å†…å®¹</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>ç›¸å…³æ–‡ç« </h3><div class="card-deck mb-4"><div class="card"> <a href="/mysql/2022/05/30/using-mysql-as-nosql-engine/"><div class="card-body"> <em class="small" data-ts="1653870000" data-df="YYYY-MM-DD" > 2022-05-30 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MySQL æ–‡æ¡£å‹æ•°æ®å­˜å‚¨</h3><div class="text-muted small"><p> æœ¬æ–‡è®°å½•ä½¿ç”¨ MySQL ä½œä¸º NoSQL å­˜å‚¨ï¼Œä¸»è¦æ˜¯é˜…è¯» MySQL 8.0 Reference Manual çš„ Chapter 20 Using MySQL as a Document Store å†…å®¹å’Œç»ƒä¹ æ—¶å€™çš„ç¬”è®°ã€‚ æ–‡æ¡£å‹æ•°æ®å­˜å‚¨ æ–‡æ¡£å‹æ•°æ®å­˜å‚¨ç›¸å¯¹äºä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®å­˜å‚¨ï¼Œæ¯”è¾ƒæ˜æ˜¾çš„åŒºåˆ«å°±æ˜¯æ–‡æ¡£å‹æ•°æ®å­˜å‚¨æ˜¯ä¸éœ€è¦é¢„å…ˆå®šä¹‰æ¨¡å¼ï¼ˆschemaï¼‰çš„ï¼Œè€Œå…³ç³»å‹æ•°æ®å­˜å‚¨éœ€è¦å®š...</p></div></div></a></div><div class="card"> <a href="/mysql/2022/06/10/mysql-optimization-strategies/"><div class="card-body"> <em class="small" data-ts="1654852380" data-df="YYYY-MM-DD" > 2022-06-10 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MySQL ä¼˜åŒ–ç­–ç•¥</h3><div class="text-muted small"><p> æœ¬æ–‡è®¨è®º MySQL ä¸€èˆ¬ä¼˜åŒ–ç­–ç•¥ æ•°æ®åº“å±‚é¢ä¼˜åŒ– å…ˆé—®ä¸€ä¸‹é—®é¢˜ï¼š æ•°æ®è¡¨ç»“æ„æ˜¯å¦åˆç†ï¼Œåˆ—æ˜¯å¦ä½¿ç”¨çš„æ­£ç¡®çš„æ•°æ®ç±»å‹ï¼Œä»¥åŠæ¯å¼ è¡¨çš„åˆ—æ•°é‡æ˜¯å¦åˆç†ï¼Ÿä¾‹å¦‚ï¼Œç»å¸¸åšæ›´æ–°æ“ä½œçš„åº”ç”¨é€šå¸¸æ˜¯å¤šè¡¨å°‘åˆ—ï¼Œè€Œç”¨äºåˆ†æå¤§é‡æ•°æ®çš„åº”ç”¨ä¸€èˆ¬æ˜¯å°‘è¡¨å¤šåˆ—ã€‚ ç´¢å¼•è®¾ç½®æ˜¯å¦åˆç†ä»¥ä¾¿ä¼˜åŒ–æŸ¥è¯¢ï¼Ÿ è¡¨æ˜¯å¦é‡‡ç”¨äº†åˆé€‚çš„å­˜å‚¨å¼•æ“ï¼Ÿäº‹åŠ¡å‹ç”¨ InnoDBï¼Œéäº‹åŠ¡å‹ç”¨ MyISAM</p></div></div></a></div><div class="card"> <a href="/linux/2023/08/04/creating-pve-debian-cloud-init-template/"><div class="card-body"> <em class="small" data-ts="1691119320" data-df="YYYY-MM-DD" > 2023-08-04 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>åˆ›å»º PVE debian cloud-init æ¨¡æ¿</h3><div class="text-muted small"><p> æœ¬æ–‡è®°å½•å¦‚ä½•åœ¨ PVE 8.0.3 ç¯å¢ƒä½¿ç”¨ debian 12 bookworm çš„ cloud-init é•œåƒåˆ›å»ºè™šæ‹Ÿæœºæ¨¡æ¿ï¼Œå¹¶è¿›è¡Œä¸€äº›å®šåˆ¶åŒ–ï¼Œä¾‹å¦‚é¢„è£…ä¸€äº›å¸¸ç”¨è½¯ä»¶åŒ…ï¼Œä¿®æ”¹ apt æºä¸ºå›½å†…é•œåƒï¼Œå’Œä¿®æ”¹ç³»ç»Ÿæ—¶åŒºã€‚ ä¸‹è½½é•œåƒ æœç´¢ debian cloud init image æ‰¾åˆ°ä¸‹è½½é¡µé¢ã€‚ æœ‰å¥½å‡ ç§é•œåƒç§ç±»ï¼Œçœ‹åˆ°é¡µé¢æè¿°ï¼šâ€generic: Should run in any ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/linux/2022/07/22/linux-fdisk-demo/" class="btn btn-outline-primary" prompt="ä¸Šä¸€ç¯‡"><p>Linux fdisk å‘½ä»¤ä½¿ç”¨</p></a> <a href="/virtualization/2022/07/22/installing-proxmox/" class="btn btn-outline-primary" prompt="ä¸‹ä¸€ç¯‡"><p>å®‰è£… Proxmox VE</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> Â© 2025 <a href="">zwt</a>. <span data-toggle="tooltip" data-placement="top" title="é™¤éå¦æœ‰è¯´æ˜ï¼Œæœ¬ç½‘ç«™ä¸Šçš„åšå®¢æ–‡ç« å‡ç”±ä½œè€…æŒ‰ç…§çŸ¥è¯†å…±äº«ç½²å 4.0 å›½é™… (CC BY 4.0) è®¸å¯åè®®è¿›è¡Œæˆæƒã€‚">ä¿ç•™éƒ¨åˆ†æƒåˆ©ã€‚</span></p></div><div class="footer-right"><p class="mb-0"> æœ¬ç«™ç”± <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> ç”Ÿæˆï¼Œé‡‡ç”¨ <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> ä¸»é¢˜ã€‚</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">çƒ­é—¨æ ‡ç­¾</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring-boot/">Spring Boot</a> <a class="post-tag" href="/tags/reactive/">Reactive</a> <a class="post-tag" href="/tags/javafx/">JavaFX</a> <a class="post-tag" href="/tags/oca/">OCA</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/tutorial/">Tutorial</a> <a class="post-tag" href="/tags/rsocket/">RSocket</a> <a class="post-tag" href="/tags/%E6%95%99%E7%A8%8B/">æ•™ç¨‹</a> <a class="post-tag" href="/tags/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/">ç¬”è¯•é¢è¯•</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">æœç´¢ç»“æœä¸ºç©º</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
