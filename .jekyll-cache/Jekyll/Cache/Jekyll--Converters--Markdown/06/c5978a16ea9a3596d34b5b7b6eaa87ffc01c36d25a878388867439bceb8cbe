I"O<blockquote>
  <p>åŸæ–‡ç”± Trisha Gee åœ¨å½“åœ°æ—¶é—´2019å¹´11æœˆ29æ—¥å‘å¸ƒåœ¨ <a href="https://blog.jetbrains.com/idea/2019/11/tutorial-reactive-spring-boot-displaying-reactive-data/">INTELLIJ IDEA BLOG</a></p>
</blockquote>

<p>åœ¨è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•è¿æ¥JavaFXæŠ˜çº¿å›¾åˆ°Kotlin Spring BootæœåŠ¡ä»¥å®æ—¶æ˜¾ç¤ºè‚¡ç¥¨ä»·æ ¼æ•°æ®ã€‚</p>

<p>åœ¨ç¬¬å››æ­¥ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªJavaFX Spring Bootåº”ç”¨ç¨‹åºæ˜¾ç¤ºä¸€ä¸ªç©ºçš„æŠ˜çº¿å›¾ã€‚åœ¨ä¸Šä¸€æ­¥ï¼ˆç¬¬äº”æ­¥ï¼‰ï¼Œæˆ‘ä»¬æ•´åˆäº†WebClientStockClientå»è¿æ¥åˆ°è‚¡ç¥¨ä»·æ ¼æœåŠ¡ã€‚åœ¨è¿™ä¸€æ­¥æˆ‘ä»¬è¦è®©æŠ˜çº¿å›¾å®æ—¶æ˜¾ç¤ºæ¥è‡ªKotlin Spring BootæœåŠ¡çš„è‚¡ç¥¨ä»·æ ¼æ•°æ®ã€‚</p>

<!--more-->

<h3 id="è®¾ç½®å¥½å›¾è¡¨æ•°æ®">è®¾ç½®å¥½å›¾è¡¨æ•°æ®</h3>

<ol>
  <li>åœ¨stock-uiæ¨¡å—çš„<code class="highlighter-rouge">ChartController</code>ï¼Œåˆ›å»ºä¸€ä¸ª<code class="highlighter-rouge">initialize</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåœ¨FXMLçš„å­—æ®µè¢«å€¼å¡«å……å®Œæˆåè¢«è°ƒç”¨ã€‚è¿™ä¸ª<code class="highlighter-rouge">initialize</code>æ–¹æ³•ä¼šè®¾ç½®å¥½å›¾è¡¨æ•°æ®çš„æ¥æºã€‚</li>
  <li>åœ¨å›¾è¡¨ä¸Šè°ƒç”¨<code class="highlighter-rouge">setData</code>æ–¹æ³•å¹¶åˆ›å»ºä¸€ä¸ªå±€éƒ¨å˜é‡<code class="highlighter-rouge">data</code>ç”¨äºä¿å­˜ç³»åˆ—æ•°æ®åˆ—è¡¨ï¼Œç”¨äºä¼ å…¥åˆ°è¿™ä¸ªæ–¹æ³•ã€‚</li>
  <li>åˆ›å»ºä¸€ä¸ª<code class="highlighter-rouge">Series</code>æ·»åŠ åˆ°dataåˆ—è¡¨ï¼Œå¹¶ä¼ å…¥åˆ°<code class="highlighter-rouge">seriesData</code>ã€‚</li>
  <li>åˆ›å»º<code class="highlighter-rouge">seriesData</code>ä½œä¸ºä¸€ä¸ªå­—æ®µï¼Œå³ç©ºåˆ—è¡¨ï¼Œä½¿ç”¨<code class="highlighter-rouge">FXCollections.observableArrayList()</code>ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ChartController</span> <span class="o">{</span>
    <span class="nd">@FXML</span>
    <span class="kd">private</span> <span class="nc">LineChart</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">chart</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">WebClientStockClient</span> <span class="n">webClientStockClient</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">ObservableList</span><span class="o">&lt;</span><span class="nc">Data</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;&gt;</span> <span class="n">seriesData</span> <span class="o">=</span> <span class="nc">FXCollections</span><span class="o">.</span><span class="na">observableArrayList</span><span class="o">();</span>
 
    <span class="kd">public</span> <span class="nf">ChartController</span><span class="o">(</span><span class="nc">WebClientStockClient</span> <span class="n">webClientStockClient</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">webClientStockClient</span> <span class="o">=</span> <span class="n">webClientStockClient</span><span class="o">;</span>
    <span class="o">}</span>
 
    <span class="nd">@FXML</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ObservableList</span><span class="o">&lt;</span><span class="nc">XYChart</span><span class="o">.</span><span class="na">Series</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">FXCollections</span><span class="o">.</span><span class="na">observableArrayList</span><span class="o">();</span>
        <span class="n">data</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">XYChart</span><span class="o">.</span><span class="na">Series</span><span class="o">&lt;&gt;(</span><span class="n">seriesData</span><span class="o">));</span>
        <span class="n">chart</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="è®¢é˜…åˆ°ä»·æ ¼æ•°æ®">è®¢é˜…åˆ°ä»·æ ¼æ•°æ®</h3>

<p>æˆ‘ä»¬éœ€è¦ä¸ºå›¾è¡¨ä»æŸå¤„è·å–æ•°æ®ã€‚è¿™å°±æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆæ·»åŠ äº†<code class="highlighter-rouge">webClientStockClient</code>ã€‚</p>

<ol>
  <li>åœ¨<code class="highlighter-rouge">initialize</code>æ–¹æ³•å†…è°ƒç”¨<code class="highlighter-rouge">webClientStockClient</code>çš„<code class="highlighter-rouge">pricesFor</code>æ–¹æ³•ï¼Œå¹¶ä¼ å…¥ç”¨äºè·å–è‚¡ç¥¨ä»·æ ¼çš„ä»£å·ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥æš‚æ—¶å°†è¿™ä¸ªå€¼è®¾ä¸ºâ€œSYMBOLâ€ã€‚</li>
  <li>æˆ‘ä»¬éœ€è¦å°†ä¸€äº›ä¸œè¥¿è®¢é˜…åˆ°ç”±è¿™ä¸ªè°ƒç”¨è¿”å›çš„<code class="highlighter-rouge">Flux</code>ã€‚æœ€ç®€å•çš„åšæ³•æ˜¯è°ƒç”¨<code class="highlighter-rouge">subscribe</code>å¹¶ä¼ å…¥<code class="highlighter-rouge">this</code>ã€‚</li>
  <li>è®©<code class="highlighter-rouge">ChartController</code>å®ç°<code class="highlighter-rouge">java.util.function.Consumer</code>å¹¶è®©å®ƒæ¶ˆè´¹<code class="highlighter-rouge">StockPrice</code>ã€‚</li>
  <li>å®ç°<code class="highlighter-rouge">Consumer</code>é‡Œè¾¹çš„<code class="highlighter-rouge">accept</code>æ–¹æ³•ã€‚</li>
  <li>ï¼ˆæç¤ºï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ç±»å£°æ˜ä¸Šçº¢è‰²çš„å­—æŒ‰ä¸‹Alt+Enterå¹¶é€‰æ‹©â€implement methodsâ€è®©IntelliJ IDEA å®ç°æ»¡è¶³æ¥å£æ‰€éœ€çš„æ–¹æ³•ï¼‰ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ChartController</span> <span class="kd">implements</span> <span class="nc">Consumer</span><span class="o">&lt;</span><span class="nc">StockPrice</span><span class="o">&gt;</span> <span class="o">{</span>
 
    <span class="c1">// fields and constructor here...</span>
 
    <span class="nd">@FXML</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ObservableList</span><span class="o">&lt;</span><span class="nc">XYChart</span><span class="o">.</span><span class="na">Series</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">FXCollections</span><span class="o">.</span><span class="na">observableArrayList</span><span class="o">();</span>
        <span class="n">data</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">XYChart</span><span class="o">.</span><span class="na">Series</span><span class="o">&lt;&gt;(</span><span class="n">seriesData</span><span class="o">));</span>
        <span class="n">chart</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
 
        <span class="n">webClientStockClient</span><span class="o">.</span><span class="na">pricesFor</span><span class="o">(</span><span class="s">"SYMBOL"</span><span class="o">).</span><span class="na">subscribe</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">StockPrice</span> <span class="n">stockPrice</span><span class="o">)</span> <span class="o">{</span>
        
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="æ˜¾ç¤ºä»·æ ¼æ•°æ®">æ˜¾ç¤ºä»·æ ¼æ•°æ®</h3>

<p>æˆ‘ä»¬è¦å†³å®šå½“è·å–åˆ°<code class="highlighter-rouge">StockPrice</code>çš„æ—¶å€™è¦åšä»€ä¹ˆã€‚æˆ‘ä»¬ä»è‚¡ç¥¨ä»·æ ¼æ•°æ®é‡Œé¢æ·»åŠ é€‚å½“çš„å€¼åˆ°å›¾è¡¨çš„ç³»åˆ—æ•°æ®ä¸Šã€‚</p>

<ol>
  <li>åœ¨<code class="highlighter-rouge">accept</code>å†…ï¼Œå·²æ–°çš„Dataå®ä¾‹è°ƒç”¨<code class="highlighter-rouge">seriesData.add</code>ã€‚</li>
  <li>å¯¹äºDataçš„yå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä»è‚¡ç¥¨ä»·æ ¼çš„æ—¶é—´è·å–ï¼Œç„¶åå–å…¶ä¸­çš„â€œç§’â€å€¼ã€‚è¿™æ˜¯<code class="highlighter-rouge">int</code>ç±»å‹ï¼Œå®ƒéœ€è¦è½¬æ¢ä¸º <code class="highlighter-rouge">String</code>ï¼Œå› æ­¤æ”¾åœ¨ä¸€ä¸ª<code class="highlighter-rouge">String.valueOf</code>è°ƒç”¨é‡Œã€‚</li>
  <li>ï¼ˆæç¤ºï¼šæˆ‘ä»¬å¯ä»¥ç”¨åç¼€è¡¥å…¨å‚æ•°å»å°†ä¸€ä¸ªè¡¨è¾¾å¼åŒ…å«åœ¨ä¸€ä¸ªæ–¹æ³•è°ƒç”¨é‡Œä»¥ç®€åŒ–å¯¹<code class="highlighter-rouge">String.valueOf</code>çš„è°ƒç”¨ï¼Œå½“æˆ‘ä»¬å·²ç»è¾“å…¥äº†è¡¨è¾¾å¼ï¼‰ã€‚</li>
  <li>å¯¹äºxå€¼ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¥è‡ªè‚¡ç¥¨ä»·æ ¼çš„<code class="highlighter-rouge">price</code>å€¼ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">StockPrice</span> <span class="n">stockPrice</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">seriesData</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">XYChart</span><span class="o">.</span><span class="na">Data</span><span class="o">&lt;&gt;(</span><span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">stockPrice</span><span class="o">.</span><span class="na">getTime</span><span class="o">().</span><span class="na">getSecond</span><span class="o">()),</span>
                                      <span class="n">stockPrice</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()));</span>
<span class="o">}</span>
</code></pre></div></div>

<p>è¿™çœ‹èµ·æ¥ä¸é”™ï¼Œä½†æ˜¯è¿™ä¸ªç¼–ç¨‹æ¨¡å‹è¿˜æœ‰ä¸€æ ·ä¸œè¥¿éœ€è¦è€ƒè™‘ã€‚ä¿®æ”¹ç³»åˆ—æ•°æ®ä¼šåæ˜ åœ¨å¯¹ç”¨æˆ·ç•Œé¢çš„æ›´æ–°ï¼Œä¼šè¢«UIçº¿ç¨‹ç»˜åˆ¶ã€‚è¿™ä¸ª<code class="highlighter-rouge">accept</code>æ–¹æ³•æ˜¯è¿è¡Œåœ¨ä¸åŒçš„çº¿ç¨‹çš„ï¼Œç›‘å¬ç€æ¥è‡ªåç«¯æœåŠ¡çš„äº‹ä»¶ã€‚æˆ‘ä»¬è¦å‘ŠçŸ¥UIçº¿ç¨‹ï¼Œå½“æœ‰æœºä¼šæ—¶è¿è¡Œè¿™æ®µä»£ç ã€‚</p>

<p>è°ƒç”¨<code class="highlighter-rouge">Platform.runLater</code>ï¼Œå¹¶åœ¨UIçº¿ç¨‹ä¼ å…¥ä¸€ä¸ªLambdaè¡¨è¾¾å¼ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">StockPrice</span> <span class="n">stockPrice</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Platform</span><span class="o">.</span><span class="na">runLater</span><span class="o">(()</span> <span class="o">-&gt;</span> 
        <span class="n">seriesData</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">XYChart</span><span class="o">.</span><span class="na">Data</span><span class="o">&lt;&gt;(</span><span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">stockPrice</span><span class="o">.</span><span class="na">getTime</span><span class="o">().</span><span class="na">getSecond</span><span class="o">()),</span>
                                          <span class="n">stockPrice</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()))</span>
    <span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="è¿è¡Œ-chart-åº”ç”¨ç¨‹åº">è¿è¡Œ chart åº”ç”¨ç¨‹åº</h3>

<ol>
  <li>ç¡®ä¿åç«¯çš„Kotlin Spring BootæœåŠ¡æ­£åœ¨è¿è¡Œï¼ˆ<code class="highlighter-rouge">StockSeriviceApplication</code>ï¼‰ã€‚</li>
  <li>å›åˆ°UIæ¨¡å—å¹¶è¿è¡Œæˆ‘ä»¬çš„JavaFXåº”ç”¨ç¨‹åºï¼Œ<code class="highlighter-rouge">StockUiApplication</code>ã€‚</li>
  <li>ä½ åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªJavaFXæŠ˜çº¿å›¾æ ¹æ®ä»·æ ¼æ•°æ®è‡ªåŠ¨åœ°æ›´æ–°ã€‚ï¼ˆè§è§†é¢‘é‡Œ 3:20çš„ä¾‹å­ï¼‰</li>
</ol>

<h3 id="æ˜¾ç¤ºè‚¡ç¥¨ä»£ç åç§°">æ˜¾ç¤ºè‚¡ç¥¨ä»£ç åç§°</h3>

<ol>
  <li>å°†ç¡¬ç¼–ç çš„è‚¡ç¥¨ä»£å·æå–åˆ°ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæˆ‘ä»¬æƒ³åœ¨ä¸æ­¢ä¸€ä¸ªåœ°æ–¹ç”¨åˆ°å®ƒã€‚</li>
  <li>ï¼ˆæç¤ºï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ IntelliJ IDEA çš„ Extract Variable(<a href="https://www.jetbrains.com/help/idea/extract-variable.html">æ–‡æ¡£</a>) (<a href="https://youtu.be/W_IiuORF16E">è§†é¢‘</a>) è½»æ¾å®Œæˆæ­¤æ“ä½œã€‚ï¼‰</li>
  <li>æˆ‘ä»¬å¯ä»¥ç»™ç³»åˆ—ä¸€ä¸ªæ ‡ç­¾ï¼Œé€šè¿‡åœ¨<code class="highlighter-rouge">Series</code>çš„æ„é€ å™¨ä¼ å…¥è‚¡ç¥¨ä»£ç ä½œä¸ºå‚æ•°ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s">"SYMBOL"</span><span class="o">;</span>
    <span class="nc">ObservableList</span><span class="o">&lt;</span><span class="nc">XYChart</span><span class="o">.</span><span class="na">Series</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">FXCollections</span><span class="o">.</span><span class="na">observableArrayList</span><span class="o">();</span>
    <span class="n">data</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">XYChart</span><span class="o">.</span><span class="na">Series</span><span class="o">&lt;&gt;(</span><span class="n">symbol</span><span class="o">,</span> <span class="n">seriesData</span><span class="o">));</span>
    <span class="n">chart</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
 
    <span class="n">webClientStockClient</span><span class="o">.</span><span class="na">pricesFor</span><span class="o">(</span><span class="n">symbol</span><span class="o">).</span><span class="na">subscribe</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ç°åœ¨å½“æˆ‘ä»¬é‡æ–°è¿è¡Œåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è‚¡ç¥¨ä»£ç å‡ºç°åœ¨ç³»åˆ—çš„æ ‡ç­¾ä¸Šã€‚</p>

<h3 id="ä»£ç æ¸…ç†">ä»£ç æ¸…ç†</h3>

<p>è¿™äº›ä»£ç å¤ªå¤šç±»å‹ä¿¡æ¯æœ‰ç‚¹ç¬¨æ‹™ï¼Œè®©æˆ‘ä»¬ç®€åŒ–ä¸€ä¸‹ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæåˆ°çš„å¾ˆå¤šç±»çš„åç§°ä¸ŠæŒ‰ä¸‹Alt+Enterå»è®©IntelliJ IDEAå»ºè®®è‡ªåŠ¨æ‰§è¡Œè¿™äº›æ›´æ”¹ã€‚</p>

<ol>
  <li>å¯¼å…¥Seriesæœ¬èº«ä»¥ç§»é™¤ä¸å¿…è¦çš„XYChartå‰ç¼€ã€‚</li>
  <li>ä¸º<code class="highlighter-rouge">observableArrayList</code>æ·»åŠ ä¸€ä¸ªé™æ€å¯¼å…¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨åˆ°å¤„é‡å¤<code class="highlighter-rouge">FXCollections</code>ã€‚</li>
  <li>æ·»åŠ ä¸€ä¸ª<code class="highlighter-rouge">valueOf</code>å¯¼å…¥ï¼Œä½¿å¾—è®¾ç½®å›¾è¡¨æ•°æ®é‚£è¡Œæ›´ç®€çŸ­ä¸€äº›ã€‚</li>
  <li>å¯¼å…¥<code class="highlighter-rouge">Data</code>ç±»ä»¥ç§»é™¤å…¶å®ƒé‡å¤çš„<code class="highlighter-rouge">XYChart</code>ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ChartController</span> <span class="kd">implements</span> <span class="nc">Consumer</span><span class="o">&lt;</span><span class="nc">StockPrice</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@FXML</span>
    <span class="kd">private</span> <span class="nc">LineChart</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">chart</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">WebClientStockClient</span> <span class="n">webClientStockClient</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">ObservableList</span><span class="o">&lt;</span><span class="nc">Data</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;&gt;</span> <span class="n">seriesData</span> <span class="o">=</span> <span class="n">observableArrayList</span><span class="o">();</span>
 
    <span class="kd">public</span> <span class="nf">ChartController</span><span class="o">(</span><span class="nc">WebClientStockClient</span> <span class="n">webClientStockClient</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">webClientStockClient</span> <span class="o">=</span> <span class="n">webClientStockClient</span><span class="o">;</span>
    <span class="o">}</span>
 
    <span class="nd">@FXML</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s">"SYMBOL"</span><span class="o">;</span>
        <span class="nc">ObservableList</span><span class="o">&lt;</span><span class="nc">Series</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">observableArrayList</span><span class="o">();</span>
        <span class="n">data</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Series</span><span class="o">&lt;&gt;(</span><span class="n">symbol</span><span class="o">,</span> <span class="n">seriesData</span><span class="o">));</span>
        <span class="n">chart</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
 
        <span class="n">webClientStockClient</span><span class="o">.</span><span class="na">pricesFor</span><span class="o">(</span><span class="n">symbol</span><span class="o">).</span><span class="na">subscribe</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">StockPrice</span> <span class="n">stockPrice</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Platform</span><span class="o">.</span><span class="na">runLater</span><span class="o">(()</span> <span class="o">-&gt;</span>
            <span class="n">seriesData</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Data</span><span class="o">&lt;&gt;(</span><span class="n">valueOf</span><span class="o">(</span><span class="n">stockPrice</span><span class="o">.</span><span class="na">getTime</span><span class="o">().</span><span class="na">getSecond</span><span class="o">()),</span>
                                      <span class="n">stockPrice</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()))</span>
        <span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>è¿™æ¬¡é‡æ„å¹¶ä¸ä¼šæ”¹å˜ä»£ç çš„è¡Œä¸ºï¼Œæ‰€ä»¥æˆ‘ä»¬é‡æ–°è¿è¡Œçœ‹åˆ°ä¸€åˆ‡éƒ½è·Ÿä¹‹å‰ä¸€æ ·å¯ç”¨ã€‚</p>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<p>ç”¨è¿™å‡ è¡Œä»£ç ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªJavaFXåº”ç”¨ç¨‹åºä½¿ç”¨äº†Spring çš„WebClientå»è¿æ¥åˆ° Spring Boot æœåŠ¡ï¼Œè®¢é˜…åˆ°ä»·æ ¼æ•°æ®æµå¹¶å®æ—¶å°†è‚¡ç¥¨ä»·æ ¼æ•°æ®ç»˜åˆ¶åœ¨æŠ˜çº¿å›¾ä¸Šã€‚</p>

<p><a href="https://github.com/zwt-io/rsb/">å…¨éƒ¨ä»£ç åœ¨ GitHub</a>ï¼šhttps://github.com/zwt-io/rsb/</p>
:ET