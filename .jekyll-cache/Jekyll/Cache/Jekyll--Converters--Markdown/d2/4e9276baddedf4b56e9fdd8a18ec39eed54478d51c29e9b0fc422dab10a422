I"§m<blockquote>
  <p>åŸæ–‡ç”± Trisha Gee åœ¨å½“åœ°æ—¶é—´2019å¹´11æœˆ18æ—¥å‘å¸ƒåœ¨ <a href="https://blog.jetbrains.com/idea/2019/11/tutorial-reactive-spring-boot-a-javafx-line-chart/">INTELLIJ IDEA BLOG</a></p>
</blockquote>

<p>åœ¨è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬ä¼šçœ‹ä¸€ä¸‹å¦‚ä½•åˆ›å»ºä¸ªä¸€JavaFXåº”ç”¨ç¨‹åºæ˜¾ç¤ºä¸€ä¸ªæŠ˜çº¿å›¾ã€‚è¿™ä¸ªåº”ç”¨ç¨‹åºä¼šç”¨åˆ°Springçš„ç‰¹æ€§ï¼Œç±»å¦‚<a href="https://en.wikipedia.org/wiki/Inversion_of_control">æ§åˆ¶åè½¬</a>ã€‚</p>

<!--more-->

<h3 id="åˆ›å»ºä¸€ä¸ª-scene">åˆ›å»ºä¸€ä¸ª Scene</h3>

<ol>
  <li>æ‰“å¼€åœ¨ç¬¬2æ­¥ä¸­åˆ›å»ºçš„stock-clientå·¥ç¨‹ï¼Œå›åˆ°åœ¨ç¬¬3æ­¥åˆ›å»ºçš„stock-uiæ¨¡å—ã€‚</li>
  <li>æ‰“å¼€StageInitializerï¼Œæˆ‘ä»¬è¦æ›´æ–°è¿™ä¸ªç”¨äºæ˜¾ç¤ºåº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢ã€‚</li>
  <li>åœ¨<code class="highlighter-rouge">onApplicationEvent</code>æ–¹æ³•é‡Œï¼Œè°ƒç”¨<code class="highlighter-rouge">stage.setScene()</code>ï¼Œå¹¶ç»™å®ƒä¼ å…¥ä¸€ä¸ªçˆ¶çº§å…ƒç´ ï¼ˆå½“å‰æœªå®šä¹‰ï¼‰ï¼Œå¹¶å°†å®½ä¸é«˜åˆ†åˆ«è®¾ä¸º800Ã—600ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onApplicationEvent</span><span class="o">(</span><span class="nc">StageReadyEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Stage</span> <span class="n">stage</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getStage</span><span class="o">();</span>
    <span class="n">stage</span><span class="o">.</span><span class="na">setScene</span><span class="o">(</span><span class="k">new</span> <span class="nc">Scene</span><span class="o">(</span><span class="n">parent</span><span class="o">,</span> <span class="mi">800</span><span class="o">,</span> <span class="mi">600</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ï¼ˆæ³¨æ„ï¼šè¿™äº›ä»£ç ç›®å‰æœªèƒ½é€šè¿‡ç¼–è¯‘ï¼‰</p>

<ol>
  <li>åˆ›å»ºä¸€ä¸ªç±»å‹ä¸º<code class="highlighter-rouge">Parent</code>çš„å±€éƒ¨å˜é‡<code class="highlighter-rouge">parent</code>ã€‚</li>
  <li>ï¼ˆæç¤ºï¼šå¦‚æœä½ åœ¨çº¢è‰²çš„<code class="highlighter-rouge">parent</code>å­—ä¸ŠæŒ‰ä¸‹Alt+Enterå¹¶é€‰æ‹©â€Create local variableâ€ IntelliJ IDEA åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œå¹¶ç›´åˆ°å®ƒéœ€è¦æ˜¯<code class="highlighter-rouge">Parent</code>ç±»å‹ï¼‰</li>
  <li>åœ¨<code class="highlighter-rouge">stage</code>åˆå§‹åŒ–ä¹‹åè°ƒç”¨<code class="highlighter-rouge">stage.show()</code>ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onApplicationEvent</span><span class="o">(</span><span class="nc">StageReadyEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Parent</span> <span class="n">parent</span><span class="o">;</span>
    <span class="nc">Stage</span> <span class="n">stage</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getStage</span><span class="o">();</span>
    <span class="n">stage</span><span class="o">.</span><span class="na">setScene</span><span class="o">(</span><span class="k">new</span> <span class="nc">Scene</span><span class="o">(</span><span class="n">parent</span><span class="o">,</span> <span class="mi">800</span><span class="o">,</span> <span class="mi">600</span><span class="o">));</span>
    <span class="n">stage</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ç°åœ¨æˆ‘ä»¬è¦æ˜ç¡®è¿™ä¸ªçˆ¶çº§å…ƒç´ æ˜¯æ¥è‡ªå“ªé‡Œçš„ã€‚</p>

<h3 id="ä½¿ç”¨-fxml">ä½¿ç”¨ FXML</h3>

<p>æˆ‘ä»¬è¦ä½¿ç”¨FXMLå®šä¹‰ç”¨æˆ·ç•Œé¢ä¸Šéœ€è¦å“ªäº›å…ƒç´ ã€‚åœ¨FXMLä¸Šå®šä¹‰è§†å›¾å…ƒç´ ä½¿å¾—è§†å›¾ä¸æ¨¡å‹ä»¥åŠæ§åˆ¶å™¨ä¹‹é—´æ¸…æ™°åœ°åˆ†ç¦»å¼€ï¼ˆå¦‚æœæˆ‘ä»¬éµå¾ªMVCæ¨¡å¼çš„è¯ï¼‰ã€‚</p>

<ol>
  <li>åœ¨<code class="highlighter-rouge">onApplicationEvent</code>æ–¹æ³•ä¸­å®šä¹‰ä¸€ä¸ª<code class="highlighter-rouge">FXMLLoader</code>ç±»å‹çš„å±€éƒ¨å˜é‡ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onApplicationEvent</span><span class="o">(</span><span class="nc">StageReadyEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">FXMLLoader</span> <span class="n">fxmlLoader</span><span class="o">;</span>
    <span class="nc">Parent</span> <span class="n">parent</span><span class="o">;</span>
 
    <span class="c1">// ...å…¶å®ƒæ–¹æ³•</span>
<span class="o">}</span>
</code></pre></div></div>

<p>æˆ‘ä»¬å°šæœªå®šä¹‰FXMLç›¸å…³ç±»çš„ä¾èµ–ï¼Œç„¶æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªMavenä¾èµ–ã€‚</p>

<ol>
  <li>åœ¨æˆ‘ä»¬çš„pom.xmlæ–‡ä»¶ï¼Œæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ª<code class="highlighter-rouge">javafx-fxml</code>ä¾èµ–ã€‚</li>
  <li>ï¼ˆæç¤ºï¼šåœ¨ç¼–è¾‘å™¨é‡Œè¾¹çº¢è‰²çš„FXMLLoaderçº¢è‰²å­—æŒ‰ä¸‹Alt+Enterä¼šç»™æˆ‘ä»¬ä¸€ä¸ªâ€Add Maven Dependencyâ€é€‰é¡¹ï¼‰ã€‚</li>
  <li>æ·»åŠ <code class="highlighter-rouge">org.openjfx:javafx-fxml</code>ä¾èµ–ï¼Œç‰ˆæœ¬ä¸º13ã€‚</li>
</ol>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.openjfx<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>javafx-fxml<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>13<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<ol>
  <li>ç°åœ¨åœ¨StageInitializeré‡Œé¢å¯¼å…¥FXMLLoaderç±»ã€‚</li>
  <li>ï¼ˆæç¤ºï¼šåœ¨ç¼–è¾‘å™¨çš„çº¢è‰²FXMLLoderæ–‡å­—ä¸ŠæŒ‰ä¸‹Alt+Enter ä¼šæœ‰ â€œImport classâ€é€‰é¡¹ï¼Œæˆ–è€…IntelliJ IDEAå¯ä»¥ä¸åŠ æç¤ºåœ°å®Œæˆè¿™æ“ä½œå¦‚æœè®¾ç½®äº†è‡ªåŠ¨å¯¼å…¥çš„æ–¹å¼ï¼‰ã€‚</li>
  <li>åœ¨StageInitializerä¸­åˆ›å»ºä¸€ä¸ª<code class="highlighter-rouge">chartResource</code>å­—æ®µï¼Œå®ƒçš„ç±»å‹å°†ä¼šæ˜¯Springçš„Resourceã€‚</li>
  <li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="highlighter-rouge">@Value</code>æ³¨è§£å»å‘Šè¯‰Springåœ¨å“ªé‡Œæ‰¾åˆ°æ–‡ä»¶ï¼Œè®©æˆ‘ä»¬è¯´å®ƒåœ¨ç±»è·¯å¾„ä¸Šå¹¶ä¸”æ˜¯ä¸€ä¸ªåä¸ºchart.fxmlçš„æ–‡ä»¶ã€‚</li>
  <li>åœ¨<code class="highlighter-rouge">FXMLLoader</code>çš„æ„é€ å‡½æ•°é‡Œï¼Œä¼ å…¥<code class="highlighter-rouge">chartResource.getURL()</code>ã€‚</li>
  <li>è¿™ä¸ª<code class="highlighter-rouge">getURL</code>ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç”¨try/catchå—å›´èµ·æ¥ã€‚ç®€å•èµ·è§ï¼Œåœ¨catchéƒ¨åˆ†æˆ‘ä»¬å°†ä¼šæŠ›å‡ºä¸€ä¸ªæ–°çš„ <code class="highlighter-rouge">RuntimeException</code>ï¼Œä½†æ˜¯ç”Ÿæˆç¯å¢ƒè¿™ç§å¤„ç†å¼‚å¸¸çš„æ–¹å¼æ²¡ä»€ä¹ˆç”¨ã€‚</li>
  <li>æœ€åæˆ‘ä»¬ç°åœ¨å¯ä»¥åˆå§‹åŒ–æˆ‘ä»¬çš„çˆ¶çº§å…ƒç´ äº†ï¼Œé€šè¿‡è°ƒç”¨<code class="highlighter-rouge">fxmlLoader.load()</code>æ–¹æ³•ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javafx.fxml.FXMLLoader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javafx.scene.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javafx.stage.Stage</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Value</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.io.Resource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
 
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">StageInitializer</span> <span class="kd">implements</span> <span class="nc">ApplicationListener</span><span class="o">&lt;</span><span class="nc">StageReadyEvent</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Value</span><span class="o">(</span><span class="s">"classpath:/chart.fxml"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Resource</span> <span class="n">chartResource</span><span class="o">;</span>
 
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onApplicationEvent</span><span class="o">(</span><span class="nc">StageReadyEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">FXMLLoader</span> <span class="n">fxmlLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FXMLLoader</span><span class="o">(</span><span class="n">chartResource</span><span class="o">.</span><span class="na">getURL</span><span class="o">());</span>
            <span class="nc">Parent</span> <span class="n">parent</span> <span class="o">=</span> <span class="n">fxmlLoader</span><span class="o">.</span><span class="na">load</span><span class="o">();</span>
 
            <span class="nc">Stage</span> <span class="n">stage</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getStage</span><span class="o">();</span>
            <span class="n">stage</span><span class="o">.</span><span class="na">setScene</span><span class="o">(</span><span class="k">new</span> <span class="nc">Scene</span><span class="o">(</span><span class="n">parent</span><span class="o">,</span> <span class="mi">800</span><span class="o">,</span> <span class="mi">600</span><span class="o">));</span>
            <span class="n">stage</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="åˆ›å»º-fxml-æ–‡ä»¶">åˆ›å»º FXML æ–‡ä»¶</h3>

<ol>
  <li>å»åˆ°resourceç›®å½•(src/main/resources)å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„FXMLæ–‡ä»¶ã€‚</li>
  <li>ï¼ˆæç¤ºï¼šå¦‚æœä½ ä½¿ç”¨ IntelliJ IDEAåˆ›å»ºä¸€ä¸ª â€œnew FXML fileâ€ ä½ ä¼šå¾—åˆ°ä¸€ä¸ªåŸºç¡€çš„FXMLæ–‡ä»¶ï¼‰ã€‚</li>
  <li>é¡¶å±‚å…ƒç´ åº”è¯¥æ˜¯ä¸€ä¸ª<code class="highlighter-rouge">VBox</code>ï¼Œå¦‚æœæ–‡ä»¶æ˜¯ç”±IntelliJ IDEAåˆ›å»ºçš„ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒç”±<code class="highlighter-rouge">AnchorPane</code>æ”¹ä¸º<code class="highlighter-rouge">VBox</code></li>
  <li>ç¡®ä¿<code class="highlighter-rouge">VBox</code>æœ‰ä¸€ä¸ª<code class="highlighter-rouge">fx:controller</code>å±æ€§ï¼Œå…¶å€¼ä¸º<code class="highlighter-rouge">ChartController</code>ã€‚</li>
  <li>ï¼ˆæç¤ºï¼šIntelliJ IDEAå³ä½¿åœ¨FXMLæ–‡ä»¶å†…ä¹Ÿå¯ä»¥ä»£ç ç”Ÿæˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨<code class="highlighter-rouge">ChartController</code>æ–‡å­—çš„æœ«å°¾æŒ‰ä¸‹Alt+Enterå¹¶é€‰æ‹©â€Create classâ€ï¼‰ã€‚</li>
  <li>ï¼ˆåœ¨ä¸å…¶å®ƒç±»ç›¸åŒçš„åŒ…é‡Œåˆ›å»ºä¸€ä¸ª<code class="highlighter-rouge">ChartController</code>ç±»ã€‚ç¡®ä¿<code class="highlighter-rouge">fx:controller</code>æŒ‡å‘çš„è·¯å¾„åŒ…å«äº†å®Œæ•´çš„æŠ¥åï¼‰ã€‚</li>
  <li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Optimize Importså»ç§»é™¤FXMLæ–‡ä»¶å†…ä¸å¿…è¦çš„å¯¼å…¥ã€‚</li>
</ol>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
 
<span class="cp">&lt;?import javafx.scene.layout.VBox?&gt;</span>
<span class="nt">&lt;VBox</span> <span class="na">xmlns=</span><span class="s">"http://javafx.com/javafx"</span>
      <span class="na">xmlns:fx=</span><span class="s">"http://javafx.com/fxml"</span>
      <span class="na">fx:controller=</span><span class="s">"ChartController"</span><span class="nt">&gt;</span>
 
<span class="nt">&lt;/VBox&gt;</span>
</code></pre></div></div>

<p>å›åˆ°SpringBootApplicationç±»ä½¿ç”¨Ctrl+Shift+F10ï¼ˆWindowsï¼‰æˆ–Ctrl+Shift+Rï¼ˆmacOSï¼‰è¿è¡Œè¿™ä¸ªåº”ç”¨ç¨‹åºã€‚</p>

<p>ä¸€ä¸ªJavaçª—å£åº”è¯¥ä¼šå¼¹å‡ºæ¥ï¼Œå®½é«˜æ˜¯æˆ‘ä»¬åœ¨<code class="highlighter-rouge">Stage</code>è®¾ç½®çš„é‚£æ ·ã€‚è¿™é‡Œè¿˜æ²¡æœ‰ä»€ä¹ˆï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æœªæ”¾ä¸œè¥¿ä¸Šå»ã€‚</p>

<h3 id="è®¾ç½®åº”ç”¨ç¨‹åºçš„æ ‡é¢˜">è®¾ç½®åº”ç”¨ç¨‹åºçš„æ ‡é¢˜</h3>

<p>æˆ‘ä»¬è¦åšä¸€äº›å°æ”¹åŠ¨ï¼Œçœ‹æˆ‘ä»¬æ˜¯å¦èƒ½å¤Ÿæ§åˆ¶åœ¨çª—å£æ˜¾ç¤ºçš„å†…å®¹ã€‚</p>

<ol>
  <li>å›åˆ°<code class="highlighter-rouge">StageInitialzer</code>ï¼Œå¹¶æ·»åŠ ä¸€è¡Œå»å°†è§†å›¾çš„æ ‡é¢˜è®¾ä¸º<code class="highlighter-rouge">applicationTitle</code>ã€‚</li>
  <li>ä¸º<code class="highlighter-rouge">applicationTitle</code>åˆ›å»ºä¸€ä¸ª<code class="highlighter-rouge">String</code>ç±»å‹çš„å­—æ®µã€‚</li>
  <li>ï¼ˆæç¤ºï¼šæˆ‘ä»¬å¯ä»¥è®©IntelliJ IDEAåˆ›å»ºä¸€ä¸ªæ„é€ å‡½æ•°ä»¥é€‚å½“çš„å‚æ•°å»åˆå§‹åŒ–è¿™ä¸ªå­—æ®µï¼‰ã€‚</li>
  <li>æ·»åŠ ä¸€ä¸ªæ„é€ å‡½æ•°å‚æ•°ä»¥å¡«å……è¿™ä¸ªå­—æ®µæ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Springå»å¡«å……è¿™ä¸ªæ ‡é¢˜çš„å€¼ã€‚</li>
  <li>æˆ‘ä»¬ä½¿ç”¨<code class="highlighter-rouge">@Value</code>æ³¨è§£ä¸ºè¿™ä¸ªå‚æ•°è®¾ç½®é»˜è®¤çš„å€¼ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StageInitializer</span> <span class="kd">implements</span> <span class="nc">ApplicationListener</span><span class="o">&lt;</span><span class="nc">StageReadyEvent</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Value</span><span class="o">(</span><span class="s">"classpath:/chart.fxml"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Resource</span> <span class="n">chartResource</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">applicationTitle</span><span class="o">;</span>
 
    <span class="kd">public</span> <span class="nf">StageInitializer</span><span class="o">(</span><span class="nd">@Value</span><span class="o">(</span><span class="s">"Demo title"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">applicationTitle</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">applicationTitle</span> <span class="o">=</span> <span class="n">applicationTitle</span><span class="o">;</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onApplicationEvent</span><span class="o">(</span><span class="nc">StageReadyEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">FXMLLoader</span> <span class="n">fxmlLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FXMLLoader</span><span class="o">(</span><span class="n">chartResource</span><span class="o">.</span><span class="na">getURL</span><span class="o">());</span>
            <span class="nc">Parent</span> <span class="n">parent</span> <span class="o">=</span> <span class="n">fxmlLoader</span><span class="o">.</span><span class="na">load</span><span class="o">();</span>
 
            <span class="nc">Stage</span> <span class="n">stage</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getStage</span><span class="o">();</span>
            <span class="n">stage</span><span class="o">.</span><span class="na">setScene</span><span class="o">(</span><span class="k">new</span> <span class="nc">Scene</span><span class="o">(</span><span class="n">parent</span><span class="o">,</span> <span class="mi">800</span><span class="o">,</span> <span class="mi">600</span><span class="o">));</span>
            <span class="n">stage</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="n">applicationTitle</span><span class="o">);</span>
            <span class="n">stage</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>å½“æˆ‘ä»¬é‡æ–°è¿è¡Œåº”ç”¨ç¨‹åºçš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥çœ‹åˆ°JavaFXåœ¨æ ‡é¢˜æ ä¸­ä½¿ç”¨è¿™ä¸ªæ–°çš„æ ‡é¢˜ã€‚</p>

<h3 id="è®¾ç½®ä»applicatiopropertiesè¯»å–åº”ç”¨ç¨‹åºæ ‡é¢˜">è®¾ç½®ä»applicatio.propertiesè¯»å–åº”ç”¨ç¨‹åºæ ‡é¢˜</h3>

<p>ç¡¬ç¼–ç å­—ç¬¦ä¸²æ€ä¹ˆè¯´éƒ½æ˜¯ä¸å¥½çš„ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ä»å…¶å®ƒåœ°æ–¹è·å–è¿™ä¸ªæ ‡é¢˜çš„å€¼ã€‚</p>

<ol>
  <li>åœ¨ src/main/resources/application.propertiesï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„å±æ€§å€¼<code class="highlighter-rouge">spring.application.ui.title</code>å¹¶è®¾ç½®ä¸€ä¸ªå€¼ç”¨äºæ ‡é¢˜æ–‡å­—ã€‚</li>
</ol>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">spring.application.ui.title</span><span class="p">=</span><span class="s">Stock Prices</span>
</code></pre></div></div>

<ol>
  <li>åœ¨<code class="highlighter-rouge">StageInitializer</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨SpELå»è¡¨é¢æˆ‘ä»¬æƒ³ä½¿ç”¨è¿™ä¸ªå±æ€§å€¼ä½œä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„æ ‡é¢˜ã€‚å°†åº”ç”¨ç¨‹åºæ ‡é¢˜çš„<code class="highlighter-rouge">@Value</code>æ”¹ä¸ºæŒ‡å‘è¿™ä¸ªå±æ€§ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">StageInitializer</span><span class="o">(</span><span class="nd">@Value</span><span class="o">(</span><span class="s">"${spring.application.ui.title}"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">applicationTitle</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">applicationTitle</span> <span class="o">=</span> <span class="n">applicationTitle</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ç°åœ¨å½“æˆ‘ä»¬è¿è¡Œè¿™ä¸ªåº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚é€šè¿‡æŒ‰ä¸¤ä¸‹Ctrlè¿è¡Œä»»ä½•ä¸œè¥¿ï¼‰ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½çœ‹åˆ°çª—å£æ ‡é¢˜ä½¿ç”¨äº†ä»è¿™ä¸ªåº”ç”¨ç¨‹åºå±æ€§è·å¾—çš„å€¼ã€‚</p>

<h3 id="ä»-spring-è·å–-javafx-æ§åˆ¶å™¨">ä» Spring è·å– JavaFX æ§åˆ¶å™¨</h3>

<p>ä¸ºå……åˆ†åˆ©ç”¨Springçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬è¿˜æœ‰æœ€åä¸€ä»¶äº‹éœ€è¦åšï¼Œè¿™å°±æ˜¯è®© JavaFXä»Springçš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­è·å– Beansã€‚</p>

<ol>
  <li>åœ¨æˆ‘ä»¬çš„<code class="highlighter-rouge">fxmlLoader</code>ä¸Šè°ƒç”¨<code class="highlighter-rouge">setControllerFactory</code>ã€‚æˆ‘ä»¬éœ€è¦ç»™å®ƒä¸€ä¸ªLambda expressionè¯´æ˜ï¼Œç»™å®šä¸€ä¸ªç±»ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚</li>
  <li>åˆ›å»ºä¸€ä¸ªç±»å‹ä¸º<code class="highlighter-rouge">ApplicationContext</code>çš„å­—æ®µ<code class="highlighter-rouge">applicationContext</code>ã€‚</li>
  <li>ä¸ºè¿™ä¸ªæ·»åŠ æ–°çš„æ„é€ å‡½æ•°å‚æ•°ï¼Œä»¥ä¾¿å°†å…¶åˆå§‹åŒ–ã€‚</li>
  <li>ï¼ˆæç¤ºï¼šå¦‚æœä½ åœ¨å°šæœªåˆå§‹åŒ–çš„ä¸€ä¸ªå­—æ®µä¸ŠæŒ‰ä¸‹Alt+Enterï¼ŒIntelliJ IDEAä¼šæä¾›é€‰é¡¹è®©ä½ ä¸ºæ„é€ å‡½æ•°æ·»åŠ å‚æ•°ï¼‰ã€‚</li>
  <li>ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨<code class="highlighter-rouge">setControllerFactory</code> Lambda è¡¨è¾¾å¼çš„å‚æ•°ä¸­<code class="highlighter-rouge">applicationContext</code>è°ƒç”¨<code class="highlighter-rouge">getBean</code>æ–¹æ³•ä¸ºJavaFXæä¾›æ‰€éœ€çš„æ§åˆ¶å™¨ï¼‰ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...start of class happens above this line</span>
    <span class="kd">private</span> <span class="nc">ApplicationContext</span> <span class="n">applicationContext</span><span class="o">;</span>
 
    <span class="kd">public</span> <span class="nf">StageInitializer</span><span class="o">(</span><span class="nd">@Value</span><span class="o">(</span><span class="s">"${spring.application.ui.title}"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">applicationTitle</span><span class="o">,</span> 
                            <span class="nc">ApplicationContext</span> <span class="n">applicationContext</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">applicationTitle</span> <span class="o">=</span> <span class="n">applicationTitle</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">applicationContext</span> <span class="o">=</span> <span class="n">applicationContext</span><span class="o">;</span>
    <span class="o">}</span>
 
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onApplicationEvent</span><span class="o">(</span><span class="nc">StageReadyEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">FXMLLoader</span> <span class="n">fxmlLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FXMLLoader</span><span class="o">(</span><span class="n">chartResource</span><span class="o">.</span><span class="na">getURL</span><span class="o">());</span>
            <span class="n">fxmlLoader</span><span class="o">.</span><span class="na">setControllerFactory</span><span class="o">(</span><span class="n">aClass</span> <span class="o">-&gt;</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">aClass</span><span class="o">));</span>
<span class="c1">// ...rest of the class</span>
</code></pre></div></div>

<h3 id="åˆ›å»ºä¸€ä¸ªæŠ˜çº¿å›¾">åˆ›å»ºä¸€ä¸ªæŠ˜çº¿å›¾</h3>

<p>ç°åœ¨æˆ‘ä»¬æ•´åˆå¥½äº†ï¼Œæœ€åè®©æˆ‘ä»¬åˆ›å»ºæŠ˜çº¿å›¾ã€‚</p>

<ol>
  <li>åœ¨chart.fxmlé‡Œé¢ï¼Œåœ¨<code class="highlighter-rouge">VBox</code>å†…ï¼Œæˆ‘ä»¬æƒ³è¦ä¸€ä¸ª<code class="highlighter-rouge">LineChart</code>ã€‚</li>
  <li>æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªå­å…ƒç´ ï¼Œä¸€ä¸ª<code class="highlighter-rouge">xAxis</code>xè½´ã€‚</li>
  <li>åœ¨<code class="highlighter-rouge">xAixs</code>å†…ï¼Œæ·»åŠ ä¸€ä¸ª<code class="highlighter-rouge">CategoryAxis</code>è¿™æ„å‘³ç€xè½´ä¼šæœ‰å­—ç¬¦ä¸²ç±»å‹çš„å€¼ã€‚è¿™æ˜¯æˆ‘ä»¬çš„æ—¶é—´è½´ï¼Œæ‰€ä»¥ç»™å®ƒä¸€ä¸ª â€œTimeâ€æ ‡ç­¾ã€‚</li>
  <li>åœ¨ä¸<code class="highlighter-rouge">xAixs</code>åŒä¸€çº§ï¼Œæ·»åŠ ä¸€ä¸ª<code class="highlighter-rouge">yAxis</code>ã€‚</li>
  <li>åœ¨<code class="highlighter-rouge">yAxis</code>å†…ï¼Œå£°æ˜ä¸€ä¸ª<code class="highlighter-rouge">NumberAxis</code>ã€‚ è¿™ä¸ªè½´æ˜¯ç”¨äºè‚¡ç¥¨ä»·æ ¼ï¼Œæ‰€ä»¥ä¸ºå®ƒæ·»åŠ ä¸€ä¸ª â€œPriceâ€æ ‡ç­¾ã€‚</li>
  <li>é€šè¿‡å°†<code class="highlighter-rouge">LineChart</code>çš„<code class="highlighter-rouge">prefHeight</code>å±æ€§è®¾ä¸º600ï¼Œè®¾ç½®äº†å›¾è¡¨çš„é«˜åº¦ä¸º600ã€‚</li>
  <li>æˆ‘ä»¬éœ€è¦ç»™è¿™ä¸ª<code class="highlighter-rouge">LineChart</code>ä¸€ä¸ª<code class="highlighter-rouge">fx:id</code>ï¼Œè¿™å°±æ˜¯<code class="highlighter-rouge">ChartController</code>é‡Œé¢çš„å­—æ®µ<code class="highlighter-rouge">ID</code>ï¼Œä¼šåŒ…å«å¯¹è¿™ä¸ª<code class="highlighter-rouge">LineChart</code> çš„ä¸€ä¸ªå¼•ç”¨ï¼Œè®©æˆ‘ä»¬å°†å®ƒå‘½åä¸º â€œchartâ€ã€‚</li>
</ol>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
 
<span class="cp">&lt;?import javafx.scene.layout.VBox?&gt;</span>
<span class="cp">&lt;?import javafx.scene.chart.LineChart?&gt;</span>
<span class="cp">&lt;?import javafx.scene.chart.CategoryAxis?&gt;</span>
<span class="cp">&lt;?import javafx.scene.chart.NumberAxis?&gt;</span>
<span class="nt">&lt;VBox</span> <span class="na">xmlns=</span><span class="s">"http://javafx.com/javafx"</span>
      <span class="na">xmlns:fx=</span><span class="s">"http://javafx.com/fxml"</span>
      <span class="na">fx:controller=</span><span class="s">"com.mechanitis.demo.stockui.ChartController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;LineChart</span> <span class="na">prefHeight=</span><span class="s">"600"</span> <span class="na">fx:id=</span><span class="s">"chart"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xAxis&gt;</span>
            <span class="nt">&lt;CategoryAxis</span> <span class="na">label=</span><span class="s">"Time"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xAxis&gt;</span>
        <span class="nt">&lt;yAxis&gt;</span>
            <span class="nt">&lt;NumberAxis</span> <span class="na">label=</span><span class="s">"Price"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/yAxis&gt;</span>
    <span class="nt">&lt;/LineChart&gt;</span>
<span class="nt">&lt;/VBox&gt;</span>
</code></pre></div></div>

<ol>
  <li>ï¼ˆæç¤ºï¼šIntelliJ IDEA å¯ä»¥è¯†åˆ«åˆ°åœ¨æ§åˆ¶å™¨ç±»é‡Œé¢æ²¡æœ‰<code class="highlighter-rouge">chart</code>å­—æ®µã€‚åœ¨<code class="highlighter-rouge">fx:id</code>çš„å€¼ â€œchartâ€ä¸ŠæŒ‰ä¸‹Alt+Enterå¹¶é€‰æ‹© â€œCreate field â€˜chartâ€™â€œï¼Œç„¶åIDEä¼šåœ¨<code class="highlighter-rouge">ChartController</code>å†…ç”Ÿæˆæ­£ç¡®çš„å­—æ®µï¼‰ã€‚</li>
  <li><code class="highlighter-rouge">ChartController</code>åº”è¯¥æœ‰ä¸€ä¸ªç±»å‹ä¸º<code class="highlighter-rouge">LineChart</code>çš„å­—æ®µç§°ä¸ºchartã€‚æˆ‘ä»¬è¯´è¿™ä¸ªå›¾è¡¨æœ‰ä¸€ä¸ªStringç±»å‹çš„xè½´å’Œä¸€ä¸ª<code class="highlighter-rouge">Number</code>ç±»å‹çš„yè½´ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å®ƒå®šä¹‰ä¸º<code class="highlighter-rouge">LineChart&lt;String, Double&gt;</code>ã€‚</li>
  <li>æˆ‘ä»¬ä¸ºå®ƒæ·»åŠ ä¸€ä¸ª<code class="highlighter-rouge">@FXML</code>æ³¨è§£ï¼Œè¡¨ç¤ºè¿™ä¸ªå­—æ®µç”±FXMLå¡«å……ã€‚</li>
  <li>ç¡®ä¿<code class="highlighter-rouge">ChartController</code>è¢«æ³¨è§£ä¸ºSpringçš„<code class="highlighter-rouge">@Component</code>ã€‚</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javafx.fxml.FXML</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javafx.scene.chart.LineChart</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>
 
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ChartController</span> <span class="o">{</span>
 
    <span class="nd">@FXML</span>
    <span class="kd">public</span> <span class="nc">LineChart</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="n">chart</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ç°åœ¨å½“æˆ‘ä»¬è¿è¡Œåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬åº”è¯¥çª—å£ä¸­æ˜¾ç¤ºä¸€ä¸ªæŠ˜çº¿å›¾çš„è½®å»“ï¼Œå¸¦æœ‰æ˜¾ç¤ºæ•°å€¼çš„ä»·æ ¼yè½´ï¼Œå’Œæ˜¾ç¤ºæ—¶é—´çš„xè½´ã€‚</p>

<p>æˆ‘ä»¬å·²ç»æˆåŠŸçš„åˆ›å»ºäº†ä¸€ä¸ªé›†æˆåˆ°Spring Bootçš„JavaFXåº”ç”¨ç¨‹åºï¼Œå®ƒå¯ä»¥ç”¨FXMLå®šä¹‰è§†å›¾å‘ˆç°ä»€ä¹ˆå†…å®¹ã€‚åœ¨æ¥ä¸‹æ¥çš„æ•™ç¨‹ï¼Œæˆ‘ä»¬ä¼šè®©è¿™ä¸ªå›¾å®æ—¶æ›´æ–°è‚¡ç¥¨ä»·æ ¼æ•°æ®ã€‚</p>

<p><a href="https://github.com/zwt-io/rsb/">å…¨éƒ¨ä»£ç åœ¨ GitHub</a>ï¼šhttps://github.com/zwt-io/rsb/</p>
:ET