I"ï¥<h3 id="gof-å®šä¹‰">GoF å®šä¹‰</h3>

<blockquote>
  <p>Separate the construction of a complex object from its representation so that the same construction processes can create different representations.</p>

  <p>å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒè¡¨ç¤ºã€‚ï¼ˆä¸­æ–‡ç‰ˆä¹¦é‡Œçš„ç¿»è¯‘ï¼‰</p>
</blockquote>

<p>Builder åœ¨ã€Šè®¾è®¡æ¨¡å¼ã€‹çš„ä¸­æ–‡ç‰ˆé‡Œè¾¹ç¿»è¯‘ä¸ºâ€œç”Ÿæˆå™¨â€ï¼Œé‚£æˆ‘å°±æŒ‰è¿™ä¸ªè¯‘æ³•å§ã€‚ç”Ÿæˆå™¨æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼ˆCreational patternsï¼‰ï¼Œå®ƒå…³æ³¨å¦‚ä½•åˆ›å»ºå¯¹è±¡ã€‚å½“éœ€è¦æ„å»ºçš„å¯¹è±¡æ¯”è¾ƒå¤æ‚ï¼Œç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆï¼Œä¹Ÿå°±è¯´å®ƒçš„æ„é€ æ–¹æ³•ä¼šæœ‰å¾ˆå¤šå‚æ•°ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚ç”Ÿæˆå™¨æ¨¡å¼è®¤ä¸ºå¯¹è±¡çš„æ„å»ºæœºåˆ¶åº”è¯¥ç‹¬ç«‹äºå®ƒçš„ç»„æˆéƒ¨åˆ†ï¼ˆä¹Ÿå°±æ˜¯å±æ€§ï¼‰ï¼Œå¯¹è±¡çš„<strong>æ„å»ºè¿‡ç¨‹</strong>ä¸å…³æ³¨å¯¹è±¡çš„<strong>ç»„æˆéƒ¨åˆ†</strong>ã€‚æ‰€ä»¥åŒä¸€ä¸ªæ„å»ºè¿‡ç¨‹å¯ä»¥æ„å»ºå‡ºä¸åŒè¡¨ç¤ºï¼ˆå±æ€§ï¼‰çš„å¯¹è±¡ï¼ˆé€šè¿‡<strong>æ”¹å˜æ„å»ºæ­¥éª¤</strong>ï¼‰ã€‚<!--more-->åœ¨ GoF ä¹¦ä¸­çš„ç”Ÿæˆå™¨æ¨¡å¼ UML ç±»å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="/img/builder-pattern.png" alt="Builder" /></p>

<p>ä¸Šå›¾ä¸­ï¼ŒProduct æ˜¯æ‰€è¦åˆ›å»ºçš„å¤æ‚å¯¹è±¡ï¼ŒConcreteBuilder ç±»è¡¨ç¤ºå…·ä½“çš„ç”Ÿæˆå™¨ï¼Œå®ƒå®ç°äº† Builder æ¥å£ï¼Œè´Ÿè´£ç»„è£…æ„æˆæœ€ç»ˆå¯¹è±¡çš„å„éƒ¨åˆ†ã€‚ConcreteBuilder å®šä¹‰äº†<strong>æ„å»ºè¿‡ç¨‹</strong>å’Œ<strong>å¯¹è±¡ç»„è£…æœºåˆ¶</strong>ï¼Œå°±æ˜¯å¦‚ä½•ç”¨å„éƒ¨åˆ†ã€æŒ‰ç…§æ€æ ·çš„æ­¥éª¤å»æ„é€ ä¸€ä¸ª Product å¯¹è±¡ã€‚ConcreteBuilder è¿˜å®šä¹‰äº† getResult() æ–¹æ³•ï¼Œç”¨äºè¿”å›æ„å»ºå¥½çš„ Product å¯¹è±¡ã€‚ç„¶å Director åˆ™æ˜¯è´Ÿè´£é€šè¿‡ä½¿ç”¨ Builder æ¥å£å»æ„å»ºæœ€ç»ˆæ‰€éœ€çš„ Product å¯¹è±¡ï¼Œå°±æ˜¯åšæŒ‡æŒ¥çš„ã€‚</p>

<p>ä»¥ä¸Šæ˜¯å¯¹ç»å…¸çš„ GoF ç”Ÿæˆå™¨æ¨¡å¼çš„è§£è¯»ï¼Œä¸‹é¢ç»“åˆå…·ä½“çš„ä¾‹å­åŠ æ·±ç†è§£ã€‚</p>

<h3 id="å…·ä½“ç®€å•ä¾‹å­">å…·ä½“ç®€å•ä¾‹å­</h3>

<p>åœ¨è¿™ä¸ªä¾‹å­é‡Œä¼šæœ‰è¿™äº›å‚ä¸è€…ï¼šBuilder, Car, MotorCycle, Product, ä»¥åŠ Directorã€‚å…¶ä¸­ï¼ŒCar, MotorCycle æ˜¯å®ç°äº† Builder æ¥å£çš„å…·ä½“ç±»ã€‚Builder ç”¨äºæ„å»º Product å¯¹è±¡çš„å„éƒ¨åˆ†ï¼ŒProduct åˆ™æ˜¯è¦è¢«åˆ›å»ºçš„å¤æ‚å¯¹è±¡ï¼ˆå°è½¦æˆ–æ‘©æ‰˜è½¦ï¼‰ã€‚å› ä¸º Car å’Œ MotorCycle éƒ½å®ç°äº† Builder æ¥å£ï¼Œæ‰€ä»¥éœ€è¦å®ç°æ¥å£ä¸­çš„æ–¹æ³•ï¼Œå³ <code class="highlighter-rouge">startUpOperations()</code>, <code class="highlighter-rouge">buildBody()</code>, <code class="highlighter-rouge">insertWheels()</code>, <code class="highlighter-rouge">addHeadLights()</code>, <code class="highlighter-rouge">endOperations()</code>, å’Œ <code class="highlighter-rouge">getVehicle()</code> æ–¹æ³•ã€‚å‰äº”ä¸ªæ–¹æ³•å¥½ç†è§£ï¼Œå¯¹åº”è½½å…·çš„æ„å»ºè¿‡ç¨‹ï¼Œå¼€å§‹ï¼Œæ„å»ºè½¦èº«ï¼Œè£…è½®å­ï¼Œè£…å¤´ç¯ï¼Œæ”¶å°¾ã€‚è€Œ <code class="highlighter-rouge">getVehicle()</code> æ–¹æ³•ï¼Œå°±æ˜¯è¿”å›å·²æ„å»ºå¥½çš„è½½å…·ã€‚ ç„¶åè¿˜æœ‰ Directorï¼Œå®ƒè°ƒç”¨åŒä¸€ä¸ª <code class="highlighter-rouge">construct()</code> æ–¹æ³•å»æ„å»ºä¸åŒç±»å‹çš„è½½å…·ã€‚è¿™ä¸ªå…·ä½“ä¾‹å­çš„ç±»å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="/img/builder-pattern-vehicles.png" alt="builder-pattern-vehicles" /></p>

<h4 id="ä»£ç å®ç°">ä»£ç å®ç°</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">jdp2e</span><span class="o">.</span><span class="na">builder</span><span class="o">.</span><span class="na">demo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.LinkedList</span><span class="o">;</span>

<span class="c1">//The common interface</span>
<span class="c1">// å…¬å…±æ¥å£</span>
<span class="kd">interface</span> <span class="nc">Builder</span> <span class="o">{</span>
	<span class="kt">void</span> <span class="nf">startUpOperations</span><span class="o">();</span>

	<span class="kt">void</span> <span class="nf">buildBody</span><span class="o">();</span>

	<span class="kt">void</span> <span class="nf">insertWheels</span><span class="o">();</span>

	<span class="kt">void</span> <span class="nf">addHeadlights</span><span class="o">();</span>

	<span class="kt">void</span> <span class="nf">endOperations</span><span class="o">();</span>

	<span class="cm">/* The following method is used to retrieve the object that is constructed. */</span>
	<span class="nc">Product</span> <span class="nf">getVehicle</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">//Car class</span>
<span class="kd">class</span> <span class="nc">Car</span> <span class="kd">implements</span> <span class="nc">Builder</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">brandName</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">Product</span> <span class="n">product</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">Car</span><span class="o">(</span><span class="nc">String</span> <span class="n">brand</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Product</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">brandName</span> <span class="o">=</span> <span class="n">brand</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">startUpOperations</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// Starting with brand name</span>
		<span class="n">product</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Car model is :%s"</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">brandName</span><span class="o">));</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">buildBody</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">product</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"This is a body of a Car"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertWheels</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">product</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"4 wheels are added"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addHeadlights</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">product</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"2 Headlights are added"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">endOperations</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// Nothing in this case</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nc">Product</span> <span class="nf">getVehicle</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">product</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="c1">//Motorcycle class</span>
<span class="kd">class</span> <span class="nc">MotorCycle</span> <span class="kd">implements</span> <span class="nc">Builder</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">brandName</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">Product</span> <span class="n">product</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">MotorCycle</span><span class="o">(</span><span class="nc">String</span> <span class="n">brand</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Product</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">brandName</span> <span class="o">=</span> <span class="n">brand</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">startUpOperations</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// Nothing in this case</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">buildBody</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">product</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"This is a body of a Motorcycle"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertWheels</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">product</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"2 wheels are added"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addHeadlights</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">product</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"1 Headlights are added"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">endOperations</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// Finishing up with brand name</span>
		<span class="n">product</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Motorcycle model is :%s"</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">brandName</span><span class="o">));</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nc">Product</span> <span class="nf">getVehicle</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">product</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Product class </span>
<span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
	<span class="cm">/*
	 * You can use any data structure that you prefer. I have used
	 * LinkedList&lt;String&gt; in this case.
	 */</span>
	<span class="kd">private</span> <span class="nc">LinkedList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">parts</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">Product</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">parts</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;();</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="nc">String</span> <span class="n">part</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">// Adding parts</span>
		<span class="n">parts</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="n">part</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">showProduct</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\nProduct completed as below :"</span><span class="o">);</span>
		<span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">part</span> <span class="o">:</span> <span class="n">parts</span><span class="o">)</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">part</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Director class </span>
<span class="kd">class</span> <span class="nc">Director</span> <span class="o">{</span>
	<span class="nc">Builder</span> <span class="n">builder</span><span class="o">;</span>

	<span class="c1">// Director knows how to use the builder and the sequence of steps.</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">construct</span><span class="o">(</span><span class="nc">Builder</span> <span class="n">builder</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">builder</span> <span class="o">=</span> <span class="n">builder</span><span class="o">;</span>
		<span class="n">builder</span><span class="o">.</span><span class="na">startUpOperations</span><span class="o">();</span>
		<span class="n">builder</span><span class="o">.</span><span class="na">buildBody</span><span class="o">();</span>
		<span class="n">builder</span><span class="o">.</span><span class="na">insertWheels</span><span class="o">();</span>
		<span class="n">builder</span><span class="o">.</span><span class="na">addHeadlights</span><span class="o">();</span>
		<span class="n">builder</span><span class="o">.</span><span class="na">endOperations</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BuilderPatternExample</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"***Builder Pattern Demo***"</span><span class="o">);</span>
		<span class="nc">Director</span> <span class="n">director</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Director</span><span class="o">();</span>

		<span class="nc">Builder</span> <span class="n">fordCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Car</span><span class="o">(</span><span class="s">"Ford"</span><span class="o">);</span>
		<span class="nc">Builder</span> <span class="n">hondaMotorycle</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MotorCycle</span><span class="o">(</span><span class="s">"Honda"</span><span class="o">);</span>

		<span class="c1">// Making Car</span>
		<span class="n">director</span><span class="o">.</span><span class="na">construct</span><span class="o">(</span><span class="n">fordCar</span><span class="o">);</span>
		<span class="nc">Product</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">fordCar</span><span class="o">.</span><span class="na">getVehicle</span><span class="o">();</span>
		<span class="n">p1</span><span class="o">.</span><span class="na">showProduct</span><span class="o">();</span>

		<span class="c1">// Making MotorCycle</span>
		<span class="n">director</span><span class="o">.</span><span class="na">construct</span><span class="o">(</span><span class="n">hondaMotorycle</span><span class="o">);</span>
		<span class="nc">Product</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">hondaMotorycle</span><span class="o">.</span><span class="na">getVehicle</span><span class="o">();</span>
		<span class="n">p2</span><span class="o">.</span><span class="na">showProduct</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">***Builder Pattern Demo***

Product completed as below :
Car model is :Ford
This is a body of a Car
4 wheels are added
2 Headlights are added

Product completed as below :
This is a body of a Motorcycle
2 wheels are added
1 Headlights are added
Motorcycle model is :Honda
</span></code></pre></div></div>

<h3 id="q--a">Q &amp; A</h3>

<ol>
  <li>
    <p>ä½¿ç”¨ç”Ÿæˆå™¨æ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„?</p>

    <ul>
      <li>ä½ å¯ä»¥ç”¨ç”Ÿæˆå™¨æ¨¡å¼é€æ­¥æ„å»ºå¤æ‚å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥æ”¹å˜æ„å»ºæ­¥éª¤ã€‚é€šè¿‡éšè—æ„å»ºå¤æ‚å¯¹è±¡çš„ç»†èŠ‚ï¼ˆæ„å»ºæ¯éƒ¨åˆ†çš„ç»†èŠ‚ï¼‰ï¼ŒåŠ å¼ºäº†å°è£…æ€§ã€‚ Director å¯ä»¥ä» Builder è·å–æœ€ç»ˆæ„å»ºå®Œæˆçš„ Productï¼Œåœ¨è¡¨é¢çœ‹äº†å°±å¥½åƒåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼ˆconstruct()ï¼‰ç”¨äºæ„å»ºæœ€ç»ˆäº§å“ï¼Œå…¶ä»–çš„å†…éƒ¨æ–¹æ³•åªæ˜¯æ¶‰åŠæ„å»ºå…·ä½“çš„éƒ¨åˆ†ã€‚</li>
      <li>ä½¿ç”¨è¿™ç§æ¨¡å¼ï¼ŒåŒæ ·çš„æ„å»ºè¿‡ç¨‹ï¼Œå¯ä»¥äº§ç”Ÿä¸åŒçš„äº§å“ã€‚</li>
      <li>å› ä¸ºä½ å¯ä»¥æ”¹å˜æ„é€ æ­¥éª¤ï¼Œæ‰€ä»¥ä½ å¯ä»¥æ”¹å˜äº§å“çš„å†…éƒ¨è¡¨ç¤ºã€‚</li>
    </ul>
  </li>
  <li>
    <p>ç”Ÿæˆå™¨æ¨¡å¼çš„åå¤„ï¼Ÿ</p>

    <ul>
      <li>ä¸é€‚ç”¨äºå¤„ç†å¯å˜å¯¹è±¡ï¼ˆmutable objectï¼‰ï¼Œå³åˆ›å»ºåå¯è¢«ä¿®æ”¹çš„å¯¹è±¡ã€‚</li>
      <li>å¯èƒ½éœ€è¦å†™äº›é‡å¤ä»£ç ï¼Œä¾‹å¦‚ä¸åŒçš„å…·ä½“ç”Ÿæˆå™¨æœ‰äº›ä»£ç ç±»ä¼¼æˆ–é‡å¤ï¼ŒæŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šæœ‰ä¸å¥½çš„å½±å“ï¼Œå¹¶å¯èƒ½æˆä¸º<em><a href="https://blog.csdn.net/jiangpingjiangping/article/details/78067595">åæ¨¡å¼</a></em>ã€‚</li>
      <li>ä¸€ä¸ªå…·ä½“çš„ç”Ÿæˆå™¨ä¸“ç”¨äºäº§ç”ŸæŸç±»äº§å“ï¼Œæ‰€ä»¥è¦ç”Ÿäº§å¦ä¸€ç±»äº§å“ï¼Œå°±éœ€è¦ç¼–å†™ä¸€ä¸ªç”¨äºè¯¥ç±»äº§å“çš„å…·ä½“ç”Ÿæˆå™¨ã€‚</li>
      <li>ç”Ÿæˆå™¨æ¨¡å¼åªæœ‰åœ¨æ„å»ºæ¯”è¾ƒå¤æ‚çš„å¯¹è±¡æ—¶ç”¨æ‰æœ‰ä¼˜åŠ¿ã€‚</li>
    </ul>
  </li>
  <li>
    <p>åœ¨ä¸Šé¢ä¾‹å­ä¸­æˆ‘å¯ä»¥ä½¿ç”¨æŠ½è±¡ç±»è€Œä¸æ˜¯æ¥å£å—ï¼Ÿ</p>

    <ul>
      <li>å¯ä»¥çš„ã€‚ä½ å¯ä»¥ä½¿ç”¨æŠ½è±¡ç±»ï¼Œè€Œä¸æ˜¯ç”¨æ¥å£ã€‚</li>
    </ul>
  </li>
  <li>
    <p>å¦‚ä½•ç¡®å®šåº”è¯¥ä½¿ç”¨æŠ½è±¡ç±»è¿˜æ˜¯æ¥å£ï¼Ÿ</p>

    <ul>
      <li>å¦‚æœä½ æƒ³è¦ä¸€äº›é›†ä¸­çš„æˆ–æ˜¯é»˜è®¤çš„è¡Œä¸ºï¼Œé‚£ä¹ˆæŠ½è±¡ç±»æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹ä½ å¯ä»¥æä¾›ä¸€äº›é»˜è®¤çš„å®ç°ã€‚å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨æ¥å£åˆ™éœ€è¦ä»é›¶å¼€å§‹å®ç°ï¼Œæ¥å£å®šä¹‰äº†æŸäº›è§„åˆ™/å¥‘çº¦ï¼Œå¼ºè°ƒåº”è¯¥åšä»€ä¹ˆï¼Œä½†ä¸å¼ºè°ƒæ€ä¹ˆåšã€‚è¿˜æœ‰å°±æ˜¯å¦‚æœè¦è€ƒè™‘å®ç°å¤šç»§æ‰¿ï¼Œæ¥å£å°±æ›´åˆé€‚ã€‚ å¦‚æœä½ è¦ç»™æ¥å£æ·»åŠ ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¥å£çš„æ‰€æœ‰å®ç°éƒ½éœ€è¦å®ç°è¿™ä¸ªæ–°æ–¹æ³•ï¼Œæœ‰ç‚¹éº»çƒ¦ã€‚ä½†å¦‚æœåœ¨æŠ½è±¡ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œå¹¶æœ‰é»˜è®¤å®ç°ï¼Œé‚£ä¹ˆæ—§ä»£ç ä¸å—å½±å“ã€‚åœ¨ Java 8 å¼•å…¥äº† <code class="highlighter-rouge">default</code> å…³é”®å­—åœ¨æ¥å£çš„ç”¨æ³•ï¼Œå¯ä»¥åœ¨æ¥å£é‡Œæä¾›é»˜è®¤æ–¹æ³•ã€‚</li>
      <li>ä¸‹é¢æ˜¯æŠ½è±¡ç±»æ›´é€‚ç”¨çš„åœºæ™¯ï¼š
        <ul>
          <li>æƒ³è¦åœ¨å¤šä¸ªè”ç³»ç´§å¯†çš„ç±»ä¹‹é—´å…±äº«ä»£ç </li>
          <li>è¢«ç»§æ‰¿çš„æŠ½è±¡ç±»æœ‰å¾ˆå¤šå…¬å…±æ–¹æ³•æˆ–å­—æ®µï¼Œæˆ–è€…å®ƒä»¬å½“ä¸­éœ€è¦éå…¬æœ‰è®¿é—®ä¿®é¥°ç¬¦ã€‚</li>
          <li>ä½ æƒ³ä½¿ç”¨éé™æ€æˆ–é <code class="highlighter-rouge">final</code> å­—æ®µï¼Œè¿™æ ·å¯ä»¥ä¿®æ”¹å…¶æ‰€å±å¯¹è±¡çš„çŠ¶æ€ã€‚</li>
        </ul>
      </li>
      <li>æ¥ä¸‹æ¥æ˜¯ä½¿ç”¨æ¥å£æ›´åˆé€‚çš„åœºæ™¯ï¼š
        <ul>
          <li>å¸Œæœ›ä¸€äº›ä¸ç›¸å…³çš„ç±»å®ç°ä½ çš„æ¥å£ã€‚</li>
          <li>æŒ‡å®šæŸç§æ•°æ®ç±»å‹çš„è¡Œä¸ºï¼Œä½†æ˜¯ä¸å…³å¿ƒå¦‚ä½•å®ç°ã€‚</li>
          <li>æƒ³è¦é€‚ç”¨å¤šç»§æ‰¿ã€‚</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œåœ¨ Car é‡Œï¼Œbrand name åœ¨ç¬¬ä¸€æ­¥æ·»åŠ äº†ï¼Œè€Œåœ¨ MotorCycle é‡Œï¼Œ brand name åœ¨æœ€åä¸€æ­¥æ·»åŠ ï¼Œè¿™æ˜¯æ•…æ„çš„å—ï¼Ÿ</p>

    <p>æ˜¯çš„ã€‚è¿™æ˜¯ä¸ºäº†è¯´æ˜ï¼Œæ¯ç§å…·ä½“ç”Ÿæˆå™¨å¯ä»¥è‡ªç”±å†³å®šå¦‚ä½•äº§ç”Ÿæœ€ç»ˆäº§å“ã€‚</p>
  </li>
  <li>
    <p>ä¸ºä»€ä¹ˆä½¿ç”¨å•ç‹¬ä¸€ä¸ªç±»ä½œä¸º Directorï¼Ÿåº”è¯¥å¯ä»¥ä½¿ç”¨å®¢æˆ·ç«¯ä»£ç ï¼ˆclient codeï¼‰å……å½“ Director çš„è§’è‰²å•Šã€‚</p>

    <p>è¿™æ–¹é¢æ²¡æœ‰é™åˆ¶ã€‚ä¸Šé¢çš„ä»£ç ä¾‹å­ï¼Œå°† Director è§’è‰²ä¸å®¢æˆ·ç«¯ä»£ç åˆ†ç¦»ï¼Œä½†æ˜¯æ¥ä¸‹æ¥çš„ä¾‹å­ä¼šç›´æ¥é€‚ç”¨å®¢æˆ·ç«¯ä»£ç åš Directorã€‚</p>
  </li>
  <li>
    <p>å®¢æˆ·ç«¯ä»£ç ï¼ˆclient codeï¼‰æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p>

    <p>åŒ…å« main() æ–¹æ³•çš„ç±»å°±æ˜¯å®¢æˆ·ç«¯ä»£ç ï¼ˆclient codeï¼‰ã€‚åœ¨ <em>Effective Java</em> ä¸€ä¹¦çš„ç¬¬ 4 é¡µï¼Œæœ‰ä¸‰æ®µè¯è®²äº†æœ¯è¯­ <em>exported API</em> ä»¥åŠ a <em>client</em> of the API. å¼•ç”¨å¦‚ä¸‹ï¼š</p>

    <blockquote>
      <p>This book uses a few technical terms that are not defined in <em>The Java Language Specification</em>. The term <em>exported API</em>, or simply <em>API</em>, refers to the classes, interfaces, constructors, members, and serialized forms by which a programmer accesses a class, interface, or package. (The term <em>API</em>, which is short for <em>application programming interface</em>, is used in preference to the otherwise preferable term <em>interface</em> to avoid confusion with the language construct of that name.) A programmer who writes a program that uses an API is referred to as a <em>user</em> of the API. A class whose implementation uses an API is a <em>client</em> of the API.</p>

      <p>Classes, interfaces, constructors, members, and serialized forms are collectively known as <em>API elements</em>. An exported API consists of the API elements that are accessible outside of the package that defines the API. These are the API elements that any client can use and the author of the API commits to support. Not coincidentally, they are also the elements for which the Javadoc utility generates documentation in its default mode of operation. Loosely speaking, the exported API of a package consists of the public and protected members and constructors of every public class or interface in the package.</p>

      <p>In Java 9, a <em>module system</em> was added to the platform. If a library makes use of the module system, its exported API is the union of the exported APIs of all the packages exported by the libraryâ€™s module declaration.</p>
    </blockquote>
  </li>
  <li>
    <p>å‰é¢æåˆ°æ”¹å˜æ„å»ºæ­¥éª¤ã€‚èƒ½å¦æ¼”ç¤ºä¸€ä¸‹é€šè¿‡æ”¹å˜æ„å»ºæ­¥éª¤äº§ç”Ÿä¸åŒçš„æœ€ç»ˆäº§å“ï¼Ÿ</p>

    <p>ä¸‹é¢çš„ä¾‹å­ç»™å‡ºæ¼”ç¤ºã€‚</p>
  </li>
</ol>

<h3 id="æ”¹è¿›ç‰ˆä¾‹å­">æ”¹è¿›ç‰ˆä¾‹å­</h3>

<p>æ”¹è¿›ç‰ˆä¾‹å­åšäº†å¦‚ä¸‹ä¿®æ”¹ï¼š</p>

<ul>
  <li>è¿™æ¬¡åªå…³æ³¨ Car ä½œä¸ºæœ€ç»ˆäº§å“ã€‚</li>
  <li>å®šåˆ¶ Car çš„æ„å»ºæ­¥éª¤åŒ…å«è¿™äº›ï¼š
    <ul>
      <li>å¼€å§‹çš„æ¶ˆæ¯ï¼ˆstartUpMessage)ã€‚</li>
      <li>å¤„ç†ç»“æŸæ¶ˆæ¯ï¼ˆendOperationsMessageï¼‰</li>
      <li>ç¡®å®šè½¦èº«ææ–™ï¼ˆbodyTypeï¼‰</li>
      <li>è½¦è½®æ•°é‡ï¼ˆnoOfWheelsï¼‰</li>
      <li>è½¦å¤´ç¯æ•°é‡ï¼ˆnoOfHeadLightsï¼‰</li>
    </ul>
  </li>
  <li>å®¢æˆ·ç«¯ä»£ç åŒæ—¶å……å½“äº† Director çš„è§’è‰²ã€‚</li>
  <li>ç”Ÿæˆå™¨çš„æ¥å£è¢«é‡å‘½åä¸º ModifiedBuilderï¼Œ é™¤ constructCar() å’Œ getConstructedCar() æ–¹æ³•å¤–ï¼Œæ¥å£ä¸­çš„å…¶ä»–æ–¹æ³•çš„è¿”å›ç±»å‹éƒ½æ˜¯ ModifiedBuilderï¼Œè¿™æ ·å¯ä»¥å®ç°æ–¹æ³•é“¾ï¼ˆmethod chainingï¼‰ã€‚</li>
</ul>

<h4 id="ä»£ç å®ç°-1">ä»£ç å®ç°</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">jdp2e</span><span class="o">.</span><span class="na">builder</span><span class="o">.</span><span class="na">demo</span><span class="o">;</span>

<span class="c1">//The common interface</span>
<span class="kd">interface</span> <span class="nc">ModifiedBuilder</span> <span class="o">{</span>
	<span class="cm">/*
	 * All these methods return type is ModifiedBuilder. This will help us to apply
	 * method chaining
	 */</span>
	<span class="nc">ModifiedBuilder</span> <span class="nf">startUpOperations</span><span class="o">(</span><span class="nc">String</span> <span class="n">startUpMessage</span><span class="o">);</span>

	<span class="nc">ModifiedBuilder</span> <span class="nf">buildBody</span><span class="o">(</span><span class="nc">String</span> <span class="n">bodyType</span><span class="o">);</span>

	<span class="nc">ModifiedBuilder</span> <span class="nf">insertWheels</span><span class="o">(</span><span class="kt">int</span> <span class="n">noOfWheels</span><span class="o">);</span>

	<span class="nc">ModifiedBuilder</span> <span class="nf">addHeadlights</span><span class="o">(</span><span class="kt">int</span> <span class="n">noOfHeadLights</span><span class="o">);</span>

	<span class="nc">ModifiedBuilder</span> <span class="nf">endOperations</span><span class="o">(</span><span class="nc">String</span> <span class="n">endOperationsMessage</span><span class="o">);</span>

	<span class="cm">/* Combine the parts and make the final product. */</span>
	<span class="nc">ProductClass</span> <span class="nf">constructCar</span><span class="o">();</span>

	<span class="c1">// Optional method:To get the already constructed object</span>
	<span class="nc">ProductClass</span> <span class="nf">getConstructedCar</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">//Car class</span>
<span class="kd">class</span> <span class="nc">CarBuilder</span> <span class="kd">implements</span> <span class="nc">ModifiedBuilder</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">startUpMessage</span> <span class="o">=</span> <span class="s">"Start building the product"</span><span class="o">;</span><span class="c1">// Default start-up message</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">bodyType</span> <span class="o">=</span> <span class="s">"Steel"</span><span class="o">;</span><span class="c1">// Default body</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">noOfWheels</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span><span class="c1">// Default number of wheels</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">noOfHeadLights</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span><span class="c1">// Default number of head lights</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">endOperationsMessage</span> <span class="o">=</span> <span class="s">"Product creation completed"</span><span class="o">;</span><span class="c1">// Default finish up message</span>
	<span class="nc">ProductClass</span> <span class="n">product</span><span class="o">;</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">ModifiedBuilder</span> <span class="nf">startUpOperations</span><span class="o">(</span><span class="nc">String</span> <span class="n">startUpMessage</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">startUpMessage</span> <span class="o">=</span> <span class="n">startUpMessage</span><span class="o">;</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">ModifiedBuilder</span> <span class="nf">buildBody</span><span class="o">(</span><span class="nc">String</span> <span class="n">bodyType</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">bodyType</span> <span class="o">=</span> <span class="n">bodyType</span><span class="o">;</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">ModifiedBuilder</span> <span class="nf">insertWheels</span><span class="o">(</span><span class="kt">int</span> <span class="n">noOfWheels</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">noOfWheels</span> <span class="o">=</span> <span class="n">noOfWheels</span><span class="o">;</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">ModifiedBuilder</span> <span class="nf">addHeadlights</span><span class="o">(</span><span class="kt">int</span> <span class="n">noOfHeadLights</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">noOfHeadLights</span> <span class="o">=</span> <span class="n">noOfHeadLights</span><span class="o">;</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">ModifiedBuilder</span> <span class="nf">endOperations</span><span class="o">(</span><span class="nc">String</span> <span class="n">endOperationsMessage</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">endOperationsMessage</span> <span class="o">=</span> <span class="n">endOperationsMessage</span><span class="o">;</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">ProductClass</span> <span class="nf">constructCar</span><span class="o">()</span> <span class="o">{</span>

		<span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ProductClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">startUpMessage</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">bodyType</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">noOfWheels</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">noOfHeadLights</span><span class="o">,</span>
				<span class="k">this</span><span class="o">.</span><span class="na">endOperationsMessage</span><span class="o">);</span>
		<span class="k">return</span> <span class="n">product</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">ProductClass</span> <span class="nf">getConstructedCar</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">product</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="c1">//Product class </span>
<span class="kd">final</span> <span class="kd">class</span> <span class="nc">ProductClass</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">startUpMessage</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">bodyType</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">noOfWheels</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">noOfHeadLights</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">endOperationsMessage</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">ProductClass</span><span class="o">(</span><span class="kd">final</span> <span class="nc">String</span> <span class="n">startUpMessage</span><span class="o">,</span> <span class="nc">String</span> <span class="n">bodyType</span><span class="o">,</span> <span class="kt">int</span> <span class="n">noOfWheels</span><span class="o">,</span> <span class="kt">int</span> <span class="n">noOfHeadLights</span><span class="o">,</span>
			<span class="nc">String</span> <span class="n">endOperationsMessage</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">startUpMessage</span> <span class="o">=</span> <span class="n">startUpMessage</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">bodyType</span> <span class="o">=</span> <span class="n">bodyType</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">noOfWheels</span> <span class="o">=</span> <span class="n">noOfWheels</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">noOfHeadLights</span> <span class="o">=</span> <span class="n">noOfHeadLights</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">endOperationsMessage</span> <span class="o">=</span> <span class="n">endOperationsMessage</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="cm">/*
	 * There is no setter methods used here to promote immutability. Since the
	 * attributes are private and there is no setter methods, the keyword "final" is
	 * not needed to attach with the attributes.
	 */</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="s">"Product Completed as:\n startUpMessage="</span> <span class="o">+</span> 
            <span class="n">startUpMessage</span> <span class="o">+</span> <span class="s">"\n bodyType="</span> <span class="o">+</span> 
            <span class="n">bodyType</span> <span class="o">+</span> <span class="s">"\n noOfWheels="</span> <span class="o">+</span> 
            <span class="n">noOfWheels</span> <span class="o">+</span> <span class="s">"\n noOfHeadLights="</span> <span class="o">+</span> 
            <span class="n">noOfHeadLights</span> <span class="o">+</span> <span class="s">"\n endOperationsMessage="</span> <span class="o">+</span> 
            <span class="n">endOperationsMessage</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span>

<span class="c1">//Director class </span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BuilderPatternModifiedExample</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"***Modified Builder Pattern Demo***"</span><span class="o">);</span>
		<span class="cm">/*
		 * Making a custom car (through builder) Note the steps: 
		 * Step1:Get a builder object with required parameters 
		 * Step2:Setter like methods are used.They will set the optional fields also. 
		 * Step3:Invoke the constructCar() method to get the final car.
		 */</span>
		<span class="kd">final</span> <span class="nc">ProductClass</span> <span class="n">customCar1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CarBuilder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">addHeadlights</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span>
            <span class="o">.</span><span class="na">insertWheels</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span>
            <span class="o">.</span><span class="na">buildBody</span><span class="o">(</span><span class="s">"Plastic"</span><span class="o">)</span>
			<span class="o">.</span><span class="na">constructCar</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">customCar1</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"--------------"</span><span class="o">);</span>
		<span class="cm">/*
		 * Making another custom car (through builder) with a different sequence and
		 * steps.
		 */</span>
		<span class="nc">ModifiedBuilder</span> <span class="n">carBuilder2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CarBuilder</span><span class="o">();</span>
		<span class="kd">final</span> <span class="nc">ProductClass</span> <span class="n">customCar2</span> <span class="o">=</span> <span class="n">carBuilder2</span>
            <span class="o">.</span><span class="na">insertWheels</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span>
            <span class="o">.</span><span class="na">addHeadlights</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
            <span class="o">.</span><span class="na">startUpOperations</span><span class="o">(</span><span class="s">"I am making my own car"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">constructCar</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">customCar2</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"--------------"</span><span class="o">);</span>

		<span class="cm">/*
		 * customCar2 = carBuilder2.insertWheels(70)//error because customCar2 is final
		 * .addHeadlights(6) .startUpOperations("I am making my own car")
		 * .constructCar(); System.out.println(customCar2);
		 */</span>
		
		<span class="c1">// Verifying the getConstructedCar() method</span>
		<span class="kd">final</span> <span class="nc">ProductClass</span> <span class="n">customCar3</span> <span class="o">=</span> <span class="n">carBuilder2</span><span class="o">.</span><span class="na">getConstructedCar</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">customCar3</span><span class="o">);</span>

	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">***Modified Builder Pattern Demo***
Product Completed as:
startUpMessage=Start building the product
bodyType=Plastic
noOfWheels=5
noOfHeadLights=5
endOperationsMessage=Product creation completed
--------------
Product Completed as:
startUpMessage=I am making my own car
bodyType=Steel
noOfWheels=7
noOfHeadLights=6
endOperationsMessage=Product creation completed
--------------
Product Completed as:
startUpMessage=I am making my own car
bodyType=Steel
noOfWheels=7
noOfHeadLights=6
endOperationsMessage=Product creation completed
</span></code></pre></div></div>

<p>åœ¨æ”¹è¿›ç‰ˆä¾‹å­ä¸­ï¼Œç¬¬ 124 è¡Œï¼Œæ„å»º <code class="highlighter-rouge">customCar1</code>ï¼Œé€æ­¥è°ƒç”¨äº† <code class="highlighter-rouge">addHeadLights()</code>, <code class="highlighter-rouge">insertWheels()</code>, <code class="highlighter-rouge">buildBody()</code> æ–¹æ³•ã€‚ ç„¶åå½“æ„å»º <code class="highlighter-rouge">customCar2</code> æ—¶ï¼Œæ–¹æ³•çš„è°ƒç”¨é¡ºåºä¸åŒäº†ï¼Œè€Œæ²¡è°ƒç”¨çš„æ–¹æ³•ï¼Œä¼šå–é»˜è®¤å€¼ã€‚</p>

<h3 id="q--a-1">Q &amp; A</h3>

<ol>
  <li>
    <p>æ”¹è¿›ç‰ˆä¾‹å­ä¸­å®¢æˆ·ç«¯ä»£ç ç”¨åˆ° <code class="highlighter-rouge">final</code> å…³é”®å­—ï¼Œä½†æ˜¯ <code class="highlighter-rouge">ProductClass</code> çš„å±æ€§å´æ²¡æœ‰ç”¨ <code class="highlighter-rouge">final</code> å…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p>

    <p>åœ¨å®¢æˆ·ç«¯ä»£ç ä½¿ç”¨ <code class="highlighter-rouge">final</code> å…³é”®å­—æ˜¯ä¸ºäº†æé«˜ä¸å¯ä¿®æ”¹æ€§ï¼ˆimmutabilityï¼‰ï¼Œä½†æ˜¯åœ¨ <code class="highlighter-rouge">ProductClass</code> å±æ€§å·²ç»æ˜¯ç§æœ‰ä¸”é‚£ä¸ªç±»æ²¡æœ‰ setter æ–¹æ³•ï¼Œæ‰€ä»¥å·²ç»æ˜¯ä¸å¯ä¿®æ”¹äº†ï¼Œä¸éœ€è¦ä½¿ç”¨ <code class="highlighter-rouge">final</code> å…³é”®å­—ã€‚</p>
  </li>
  <li>
    <p>ä¸å¯ä¿®æ”¹çš„å¯¹è±¡æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p>

    <p>è¿™æ ·çš„å¯¹è±¡ä¸€æ—¦æ„å»ºå®Œæˆï¼Œå°±å¯ä»¥å®‰å…¨åœ°å…±äº«ï¼Œæ›´é‡è¦çš„æ˜¯å®ƒä»¬æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆthread-safeï¼‰ï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­çœå»äº†å¾ˆå¤šåŒæ­¥æ“ä½œã€‚</p>
  </li>
  <li>
    <p>ä½•æ—¶åº”è¯¥è€ƒè™‘ä½¿ç”¨ç”Ÿæˆå™¨æ¨¡å¼ï¼Ÿ</p>
  </li>
</ol>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<h3 id="å‚è€ƒ">å‚è€ƒ</h3>

<ul>
  <li>[Gamma95] Gamma, Erich, Richard Helm, Ralph Johnson, and John Vlissides. 1995. <em>Design Patterns: Elements of Reusable Object-Oriented Software.</em> Reading, MA: Addison-Wesley. ISBN: 0201633612</li>
  <li>Sarcar, Vaskaran. <em>Design Patterns in Java, Second Edition.</em> Apress, 2019</li>
  <li><a href="https://springframework.guru/gang-of-four-design-patterns/builder-pattern/">Springframework guru: Builder Pattern</a></li>
  <li>Joshua Block. <em>Effective Java, Third Edition.</em> Addison-Wesley, 2018</li>
  <li><a href="https://blog.csdn.net/jiangpingjiangping/article/details/78067595">è®¾è®¡æ¨¡å¼æ‚è°ˆâ€”â€”æ¨¡å¼ä¸åæ¨¡å¼ä¹‹äº‰</a></li>
</ul>

:ET