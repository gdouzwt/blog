I"!<h2 id="å¸¸è§ç±»çš„ç”¨é€”">å¸¸è§ç±»çš„ç”¨é€”</h2>

<h3 id="springapplicationbuilder">SpringApplicationBuilder</h3>

<p><code class="highlighter-rouge">java.lang.Object</code><br />
â€‹	<code class="highlighter-rouge">org.springframework.boot.builder.SpringApplicationBuilder</code></p>

<p>Builder for <code class="highlighter-rouge">SpringApplication</code> and <code class="highlighter-rouge">ApplicationContext</code> instances with convenient fluent API and context hierarchy support. Simple example of a context hierarchy:<br />
<code class="highlighter-rouge">new SpringApplicationBuider(ParentConfig.class).child(ChildConfig.class).run(args);</code><br />
Another common use case is setting active profiles and default properties to set up the environment for an application:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">SpringApplicationBuilder</span><span class="o">(</span><span class="nc">Application</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">profiles</span><span class="o">(</span><span class="s">"server"</span><span class="o">)</span>
    			<span class="o">.</span><span class="na">properties</span><span class="o">(</span><span class="s">"transport=local"</span><span class="o">).</span><span class="na">run</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
</code></pre></div></div>

<p>If your needs are simpler, consider using the static convenience methods in SpringApplication instead.</p>

<p>(org.springframework.boot:spring-boot:2.2.4.RELEASE)<!--more--></p>

<p>è¿™é‡Œå°±æ˜¯Builderæ¨¡å¼ï¼Œé¡ºä¾¿è®°å½•ä¸€ä¸‹ï¼Œå…ˆä¸Šå›¾ï¼š</p>

<p><img src="/img/builder-pattern.png" alt="builder-pattern" /></p>

<p>GoF å¯¹ <strong>Builder Pattern</strong> çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>

<blockquote>
  <p>Separate the construction of a complex object from its representation so that the same construction processes can create different representations.</p>

  <p>å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒè¡¨ç¤ºã€‚ï¼ˆä¸­æ–‡ç‰ˆä¹¦é‡Œçš„ç¿»è¯‘ï¼Œå¦å¤–æ³¨æ„ï¼Œåœ¨ä¹¦ä¸­ Builder è¯‘ä½œâ€œç”Ÿæˆå™¨â€ï¼‰</p>
</blockquote>

<p>ä¸Šå›¾ä¸­ï¼Œ<code class="highlighter-rouge">Product</code> æ˜¯æˆ‘ä»¬æƒ³è¦æ„å»ºçš„å¤æ‚å¯¹è±¡ï¼Œ<code class="highlighter-rouge">ConcreteBuilder</code> é€šè¿‡å®ç°æŠ½è±¡çš„ <code class="highlighter-rouge">Builder</code> æ¥å£å»æ„é€ å’Œç»„åˆä¸€ä¸ª product çš„éƒ¨ä»¶ã€‚å…·ä½“çš„æ„é€ è€…ï¼Œ<code class="highlighter-rouge">ConcreteBuilder</code> è´Ÿè´£æ„å»º product çš„å†…éƒ¨è¡¨ç°ï¼Œå’Œåˆ›é€ è¿‡ç¨‹åŠç»„åˆæœºåˆ¶ã€‚ <code class="highlighter-rouge">Builder</code> ä¹Ÿå¯ä»¥æä¾›æ–¹æ³•ä½¿å¾—è¢«åˆ›å»ºçš„å¯¹è±¡å¯ä»¥è¢«ä½¿ç”¨ã€‚ Director è´Ÿè´£ä½¿ç”¨ Builder å–åˆ›å»ºæœ€ç»ˆçš„ Productï¼Œä¹Ÿå°±æ˜¯è¯´ Director æ˜¯ Builder çš„ä½¿ç”¨è€…ã€‚ æ„é€ è€…(Builders) å¯ä»¥ä¿æŒå¯¹æ‰€æ„é€ çš„å¯¹è±¡(products)çš„å¼•ç”¨ï¼Œä»¥ä¾¿å¯ä»¥å†æ¬¡ä½¿ç”¨ã€‚</p>

<h3 id="springapplication">SpringApplication</h3>

<p><code class="highlighter-rouge">java.lang.Object</code><br />
â€‹	<code class="highlighter-rouge">org.springframework.boot.SpringApplication</code></p>

<p>Class that can be used to bootstrap and launch a Spring application from a Java main method. By default class will perform the following steps to bootstrap your application:</p>

<ul>
  <li>Create an appropriate <code class="highlighter-rouge">ApplicationContext</code> instance (depending on your classpath)</li>
  <li>Register a <code class="highlighter-rouge">CommandLinePropertySource</code> to expose command line arguments as Spring properties</li>
  <li>Refresh the application context, loading all singleton beans</li>
  <li>Trigger any <code class="highlighter-rouge">CommandLineRunner</code> beans</li>
</ul>

<p>In most circumstances the static <code class="highlighter-rouge">run(Class, String[])</code> method can be called directly from you main method to bootstrap your application:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nd">@Configuration</span>
 <span class="nd">@EnableAutoConfiguration</span>
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyApplication</span>  <span class="o">{</span>

   <span class="c1">// ... Bean definitions</span>

   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
     <span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">MyApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
   <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div></div>

<p>For more advanced configuration a <code class="highlighter-rouge">SpringApplication</code> instance can be created and customized before being run:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
   <span class="nc">SpringApplication</span> <span class="n">application</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SpringApplication</span><span class="o">(</span><span class="nc">MyApplication</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
   <span class="c1">// ... customize application settings here</span>
   <span class="n">application</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">args</span><span class="o">)</span>
 <span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">SpringApplication</code>s can read beans from a variety of different sources. It is generally recommended that a single <code class="highlighter-rouge">@Configuration</code> class is used to bootstrap your application, however, you may also set sources from:</p>

<ul>
  <li>The fully qualified class name to be loaded by <code class="highlighter-rouge">AnnotatedBeanDefinitionReader</code></li>
  <li>The location of an XML resource to be loaded by <code class="highlighter-rouge">XmlBeanDefinitionReader</code>, or a groovy script to be loaded by <code class="highlighter-rouge">GroovyBeanDefinitionReader</code></li>
  <li>The name of a package to be scanned by <code class="highlighter-rouge">ClassPathBeanDefinitionScanner</code></li>
</ul>

<p>Configuration properties are also bound to the SpringApplication. This makes it possible to set SpringApplication properties dynamically, like additional sources (â€œspring.main.sourcesâ€ - a CSV list) the flag to indicate a web environment (â€œspring.main.web-application-type=noneâ€) or the flag to switch off the banner (â€œspring.main.banner-mode=offâ€).</p>

<p><code class="highlighter-rouge">org.springframework.boot.SpringApplication</code></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">ConfigurableApplicationContext</span> <span class="nf">run</span><span class="o">(</span><span class="nc">Class</span> <span class="o">&lt;?&gt;</span> <span class="n">primarySource</span><span class="o">,</span> <span class="nc">String</span> <span class="o">...</span> <span class="n">args</span><span class="o">)</span>
</code></pre></div></div>

<p>Static helper that can be used to run a <code class="highlighter-rouge">SpringApplication</code> from the specified source using default settings.<br />
Parameters:<br />
<code class="highlighter-rouge">primarySource</code> - the primary source to load<br />
<code class="highlighter-rouge">args</code> - the application arguments (usually passed from a Java main method)<br />
Returns:<br />
the running <code class="highlighter-rouge">ApplicationContext</code></p>
:ET