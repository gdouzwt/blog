I"[›<h1 id="generics">Generics</h1>

<p>JDK 1.5 ç‰ˆæœ¬å¼€å§‹å¼•å…¥ï¼ŒåŠ å¼ºäº†<strong>ç±»å‹å®‰å…¨ï¼ˆType safetyï¼‰</strong>ï¼Œå¼ºåŒ–äº†è¯­è¨€æœ¬èº«ï¼Œæ›´åŠ å¼ºåŒ–äº†é›†åˆæ¡†æ¶ï¼ˆCollections Frameworkï¼‰ã€‚Java 8 å¼€å§‹åŠ å…¥ Lambdaã€Stream æ›´åŠ è¿›ä¸€æ­¥å¢å¼ºäº†è¯­è¨€çš„è¡¨è¾¾èƒ½åŠ›ã€‚</p>

<h3 id="ä»€ä¹ˆæ˜¯æ³›å‹">ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿ</h3>

<p>æ³›å‹ï¼ˆGenericsï¼‰æ„æ€æ˜¯å‚æ•°åŒ–ç±»å‹ï¼ˆParameterized typesï¼‰ã€‚æ³›å‹å…è®¸åœ¨åˆ›å»ºç±»ã€æ¥å£å’Œæ–¹æ³•çš„æ—¶å€™ï¼Œä»¥æä¾›å‚æ•°çš„å½¢å¼æŒ‡å®šå…¶èƒ½æ“ä½œçš„æ•°æ®ç±»å‹ã€‚å®ƒçš„å¯¹è±¡æ˜¯ç±»ã€æ¥å£ã€æ–¹æ³•ã€‚è¿™ä¸‰è€…éƒ½å¯ä»¥æ³›å‹åŒ–ã€‚</p>

<p>åœ¨æ²¡æœ‰æ³›å‹ç‰¹æ€§ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡ Object ç±»å®ç°æ³›å‹ç¼–ç¨‹ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯ç±»å‹å®‰å…¨ã€‚<!--more--></p>

<h3 id="ç®€å•çš„æ³›å‹ä¾‹å­">ç®€å•çš„æ³›å‹ä¾‹å­</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ä¸€ä¸ªç®€å•çš„æ³›å‹ä¾‹å­</span>
<span class="c1">// T æ˜¯ç±»å‹å‚æ•°</span>
<span class="c1">// åœ¨åˆ›å»ºGenå¯¹è±¡çš„æ—¶å€™ T ä¼šè¢«å®é™…ç±»å‹ä»£æ›¿ã€‚</span>
<span class="kd">class</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span> 
  <span class="no">T</span> <span class="n">ob</span><span class="o">;</span> <span class="c1">// å£°æ˜ä¸€ä¸ªç±»å‹ä¸º T çš„å¯¹è±¡</span>
   
  <span class="c1">// ç»™æ„é€ å™¨ä¼ é€’ä¸€ä¸ªå¯¹ç±»å‹ä¸º T çš„å¼•ç”¨  </span>
  <span class="nc">Gen</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span> 
    <span class="n">ob</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span> 
  <span class="o">}</span> 
 
  <span class="c1">// è¿”å› ob</span>
  <span class="no">T</span> <span class="nf">getob</span><span class="o">()</span> <span class="o">{</span> 
    <span class="k">return</span> <span class="n">ob</span><span class="o">;</span> 
  <span class="o">}</span> 
 
  <span class="c1">// æ˜¾ç¤º T çš„ç±»å‹ </span>
  <span class="kt">void</span> <span class="nf">showType</span><span class="o">()</span> <span class="o">{</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Type of T is "</span> <span class="o">+</span> 
                       <span class="n">ob</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span> 
  <span class="o">}</span> 
<span class="o">}</span> 
</code></pre></div></div>

<p>æ¼”ç¤ºæ“ä½œæ³›å‹</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// æ¼”ç¤ºä½¿ç”¨æ³›å‹</span>
<span class="kd">class</span> <span class="nc">GenDemo</span> <span class="o">{</span> 
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span> 
    <span class="c1">// åˆ›å»ºä¸€ä¸ªå®é™…ç±»å‹ä¸º Integer çš„ Gen å¼•ç”¨</span>
    <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">iOb</span><span class="o">;</span>  
 
    <span class="c1">// åˆ›å»ºä¸€ä¸ª Gen&lt;Integer&gt; å¯¹è±¡å¹¶å°†å…¶å¼•ç”¨èµ‹å€¼ç»™ iOb</span>
    <span class="c1">// æ³¨æ„ 88 è‡ªåŠ¨è£…ç®±æˆä¸€ä¸ª Integer å¯¹è±¡ã€‚</span>
    <span class="n">iOb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;(</span><span class="mi">88</span><span class="o">);</span> 
 
    <span class="c1">// æ˜¾ç¤º iOb çš„æ•°æ®ç±»å‹</span>
    <span class="n">iOb</span><span class="o">.</span><span class="na">showType</span><span class="o">();</span> 
 
    <span class="c1">// è·å– iOb çš„å€¼ã€‚</span>
    <span class="c1">// æ³¨æ„ä¸éœ€è¦ç±»å‹è½¬æ¢ã€‚</span>
    <span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="n">iOb</span><span class="o">.</span><span class="na">getob</span><span class="o">();</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"value: "</span> <span class="o">+</span> <span class="n">v</span><span class="o">);</span> 
 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span> 
 
    <span class="c1">// åˆ›å»ºä¸€ä¸ªå®é™…ç±»å‹ä¸º String çš„ Gen å¯¹è±¡</span>
    <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strOb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="s">"Generics Test"</span><span class="o">);</span> 
 
    <span class="c1">// æ˜¾ç¤º strOb ä½¿ç”¨çš„æ•°æ®ç±»å‹</span>
    <span class="n">strOb</span><span class="o">.</span><span class="na">showType</span><span class="o">();</span> 
 
    <span class="c1">// è·å– strOb çš„å€¼ã€‚</span>
    <span class="c1">// æ³¨æ„ä¸éœ€è¦ç±»å‹è½¬æ¢ã€‚</span>
    <span class="nc">String</span> <span class="n">str</span> <span class="o">=</span> <span class="n">strOb</span><span class="o">.</span><span class="na">getob</span><span class="o">();</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"value: "</span> <span class="o">+</span> <span class="n">str</span><span class="o">);</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div></div>

<h4 id="æ³›å‹åªé€‚ç”¨äºå¼•ç”¨ç±»å‹">æ³›å‹åªé€‚ç”¨äºå¼•ç”¨ç±»å‹</h4>

<p>æ³›å‹ä¸èƒ½ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ ï¼Œåªèƒ½ç”¨äºå¼•ç”¨ç±»å‹ï¼Œå› æ­¤ä»¥ä¸‹å£°æ˜æ˜¯é”™è¯¯çš„ï¼š</p>

<p><code class="highlighter-rouge">Gen&lt;int&gt; intOb = new Gen&lt;int&gt;(53);  // é”™è¯¯ï¼Œä¸èƒ½ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹ã€‚</code></p>

<p>å¯ä»¥ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„å°è£…ç±»å‹ï¼Œå¦‚ <code class="highlighter-rouge">Integer</code>ã€‚</p>

<h4 id="æ³›å‹å› ç±»å‹å‚æ•°ä¸åŒè€Œå¼‚">æ³›å‹å› ç±»å‹å‚æ•°ä¸åŒè€Œå¼‚</h4>

<p>ä¸åŒç±»å‹å‚æ•°çš„åŒä¸€ä¸ªæ³›å‹æ˜¯ä¸å…¼å®¹çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼Œå°±ä¸Šé¢å±•ç¤ºçš„ä»£ç è€Œè¨€ï¼Œä»¥ä¸‹è¿™è¡Œä»£ç æ˜¯é”™è¯¯çš„ï¼Œä¸èƒ½é€šè¿‡ç¼–è¯‘ï¼š</p>

<p><code class="highlighter-rouge">iOb = strOb;   // é”™è¯¯ï¼Œä¸èƒ½ç¼–è¯‘ï¼Œç±»å‹ä¸å…¼å®¹ã€‚</code></p>

<p>è™½ç„¶ <code class="highlighter-rouge">iOb</code> å’Œ <code class="highlighter-rouge">strOb</code> éƒ½æ˜¯ <code class="highlighter-rouge">Gen&lt;T&gt;</code> ç±»å‹ï¼Œä½†ä¸¤è€…çš„å®é™…å¼•ç”¨ç±»å‹å› ä¸ºå®ƒä»¬çš„ç±»å‹å‚æ•°ä¸åŒè€Œä¸åŒã€‚<code class="highlighter-rouge">iOb</code> å®é™…å¼•ç”¨çš„ç±»å‹ä¸º <code class="highlighter-rouge">Integer</code> ï¼Œ<code class="highlighter-rouge">strOb</code> å®é™…å¼•ç”¨çš„ç±»å‹ä¸º <code class="highlighter-rouge">String</code>ã€‚æ‰€ä»¥æ³›å‹å¢åŠ äº†ç±»å‹å®‰å…¨ï¼Œé˜²æ­¢é”™è¯¯ã€‚</p>

<h4 id="æ³›å‹å¦‚ä½•å¢å¼ºç±»å‹å®‰å…¨">æ³›å‹å¦‚ä½•å¢å¼ºç±»å‹å®‰å…¨</h4>

<p>æ³›å‹ä¸ºä»€ä¹ˆèƒ½å¢å¼ºç±»å‹å®‰å…¨ï¼Ÿä¸Šé¢çš„ä»£ç å®é™…ä¸Šä¸ä½¿ç”¨æ³›å‹ä¹Ÿå¯ä»¥å®ç°åŒæ ·çš„æ•ˆæœï¼Œåªéœ€è¦å°†å¼•ç”¨ç±»å‹å£°æ˜ä¸º <code class="highlighter-rouge">Object</code> ç±»å‹ï¼Œå¹¶æ·»åŠ ç›¸åº”çš„ç±»å‹è½¬æ¢æ“ä½œå³å¯ã€‚é‚£ä¹ˆä½¿ç”¨æ³›å‹ç©¶ç«Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿç­”æ¡ˆæ˜¯æ³›å‹æœºåˆ¶ä¼šè‡ªåŠ¨ä¿è¯ä¸ <code class="highlighter-rouge">Gen</code> ç›¸å…³çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œæ— éœ€æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢å’Œç±»å‹æ£€æŸ¥ã€‚å¯ä»¥çœ‹ä»¥ä¸‹æ²¡æœ‰ä½¿ç”¨æ³›å‹çš„ï¼Œå®ç°äº†åŒæ ·åŠŸèƒ½çš„ä»£ç ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// NonGen åŠŸèƒ½ä¸Šç­‰ä»·äº Gen </span>
<span class="c1">// ä½†æ˜¯æ²¡æœ‰ä½¿ç”¨æ³›å‹ </span>
<span class="kd">class</span> <span class="nc">NonGen</span> <span class="o">{</span>  
  <span class="nc">Object</span> <span class="n">ob</span><span class="o">;</span> <span class="c1">// ob ç°åœ¨æ˜¯ Object ç±»å‹</span>
    
  <span class="c1">//  ç»™æ„é€ å™¨ä¼ é€’ä¸€ä¸ªå¯¹ç±»å‹ä¸º Object çš„å¼•ç”¨   </span>
  <span class="nc">NonGen</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>  
    <span class="n">ob</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span>  
  <span class="o">}</span>  
  
  <span class="c1">// è¿”å›ç±»å‹ä¸º Object</span>
  <span class="nc">Object</span> <span class="nf">getob</span><span class="o">()</span> <span class="o">{</span>  
    <span class="k">return</span> <span class="n">ob</span><span class="o">;</span>  
  <span class="o">}</span>  
 
  <span class="c1">// æ˜¾ç¤º ob çš„ç±»å‹</span>
  <span class="kt">void</span> <span class="nf">showType</span><span class="o">()</span> <span class="o">{</span>  
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Type of ob is "</span> <span class="o">+</span>  
                       <span class="n">ob</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>  
  <span class="o">}</span>  
<span class="o">}</span>  
</code></pre></div></div>

<p>æ¼”ç¤ºæ²¡ç”¨ä½¿ç”¨æ³›å‹çš„æƒ…å†µï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// æ¼”ç¤ºæ²¡æœ‰ä½¿ç”¨æ³›å‹çš„æƒ…å†µ</span>
<span class="kd">class</span> <span class="nc">NonGenDemo</span> <span class="o">{</span>  
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>  
    <span class="nc">NonGen</span> <span class="n">iOb</span><span class="o">;</span>   
  
    <span class="c1">// åˆ›å»ºä¸€ä¸ª NonGen å¯¹è±¡å¼•ç”¨å¹¶å­˜æ”¾ä¸€ä¸ª Integer å¯¹è±¡</span>
    <span class="c1">// è‡ªåŠ¨è£…ç®±</span>
    <span class="n">iOb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NonGen</span><span class="o">(</span><span class="mi">88</span><span class="o">);</span>  
  
    <span class="c1">// æ˜¾ç¤º iOb çš„æ•°æ®ç±»å‹</span>
    <span class="n">iOb</span><span class="o">.</span><span class="na">showType</span><span class="o">();</span> 
 
    <span class="c1">// è·å– iOb çš„å€¼</span>
    <span class="c1">// è¿™æ¬¡ç±»å‹è½¬æ¢æ˜¯å¿…è¦çš„ã€‚</span>
    <span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Integer</span><span class="o">)</span> <span class="n">iOb</span><span class="o">.</span><span class="na">getob</span><span class="o">();</span>  
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"value: "</span> <span class="o">+</span> <span class="n">v</span><span class="o">);</span>  
  
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>  
  
    <span class="c1">// åˆ›å»ºå¦ä¸€ä¸ª NonGen å¼•ç”¨å¹¶å­˜æ”¾ä¸€ä¸ª String å¯¹è±¡</span>
    <span class="nc">NonGen</span> <span class="n">strOb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NonGen</span><span class="o">(</span><span class="s">"Non-Generics Test"</span><span class="o">);</span>  
  
    <span class="c1">// æ˜¾ç¤º strOb çš„æ•°æ®ç±»å‹</span>
    <span class="n">strOb</span><span class="o">.</span><span class="na">showType</span><span class="o">();</span> 
 
    <span class="c1">// è·å– strOb çš„å€¼</span>
    <span class="c1">// å†æ¬¡æ³¨æ„åˆ°ï¼Œç±»å‹è½¬æ¢æ˜¯å¿…è¦çš„ã€‚</span>
    <span class="nc">String</span> <span class="n">str</span> <span class="o">=</span> <span class="o">(</span><span class="nc">String</span><span class="o">)</span> <span class="n">strOb</span><span class="o">.</span><span class="na">getob</span><span class="o">();</span>  
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"value: "</span> <span class="o">+</span> <span class="n">str</span><span class="o">);</span>  
 
    <span class="c1">// å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œä½†æ˜¯æ¦‚å¿µä¸Šæ¥è¯´æ˜¯é”™è¯¯çš„ï¼</span>
    <span class="n">iOb</span> <span class="o">=</span> <span class="n">strOb</span><span class="o">;</span> 
    <span class="n">v</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Integer</span><span class="o">)</span> <span class="n">iOb</span><span class="o">.</span><span class="na">getob</span><span class="o">();</span> <span class="c1">// è¿è¡Œæ—¶é”™è¯¯ï¼ </span>
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<p>ä¸ä½¿ç”¨æ³›å‹çš„æƒ…å†µï¼ŒJava ç¼–è¯‘å™¨æ— æ³•çŸ¥é“ <code class="highlighter-rouge">NonGen</code> å¼•ç”¨çš„å®é™…ç±»å‹ï¼Œè¿™æ˜¯å¾ˆç³Ÿç³•çš„ï¼Œå› ä¸ºï¼š</p>

<ol>
  <li>å¿…é¡»è¦æ˜¾ç¤ºåœ°è¿›è¡Œç±»å‹è½¬æ¢æ‰èƒ½è·å–åˆ°å­˜å‚¨çš„æ•°æ®ã€‚</li>
  <li>å¾ˆå¤šç±»å‹ä¸å…¼å®¹çš„é”™è¯¯åªèƒ½åœ¨è¿è¡Œæ—¶æ‰èƒ½è¢«å‘ç°ã€‚</li>
</ol>

<p>æ€»çš„æ¥è¯´ï¼Œé€šè¿‡ä½¿ç”¨æ³›å‹ï¼Œè¿è¡Œæ—¶é”™è¯¯è¢«è½¬åŒ–æˆäº†ç¼–è¯‘æ—¶é”™è¯¯ã€‚</p>

<h3 id="å«ä¸¤ä¸ªå‚æ•°çš„æ³›å‹">å«ä¸¤ä¸ªå‚æ•°çš„æ³›å‹</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A simple generic class with two type </span>
<span class="c1">// parameters: T and V. </span>
<span class="kd">class</span> <span class="nc">TwoGen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">V</span><span class="o">&gt;</span> <span class="o">{</span> 
  <span class="no">T</span> <span class="n">ob1</span><span class="o">;</span> 
  <span class="no">V</span> <span class="n">ob2</span><span class="o">;</span> 
   
  <span class="c1">// Pass the constructor a reference to  </span>
  <span class="c1">// an object of type T. </span>
  <span class="nc">TwoGen</span><span class="o">(</span><span class="no">T</span> <span class="n">o1</span><span class="o">,</span> <span class="no">V</span> <span class="n">o2</span><span class="o">)</span> <span class="o">{</span> 
    <span class="n">ob1</span> <span class="o">=</span> <span class="n">o1</span><span class="o">;</span> 
    <span class="n">ob2</span> <span class="o">=</span> <span class="n">o2</span><span class="o">;</span> 
  <span class="o">}</span> 
 
  <span class="c1">// Show types of T and V. </span>
  <span class="kt">void</span> <span class="nf">showTypes</span><span class="o">()</span> <span class="o">{</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Type of T is "</span> <span class="o">+</span> 
                       <span class="n">ob1</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span> 
 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Type of V is "</span> <span class="o">+</span> 
                       <span class="n">ob2</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span> 
  <span class="o">}</span> 
 
  <span class="no">T</span> <span class="nf">getob1</span><span class="o">()</span> <span class="o">{</span> 
    <span class="k">return</span> <span class="n">ob1</span><span class="o">;</span> 
  <span class="o">}</span> 
 
  <span class="no">V</span> <span class="nf">getob2</span><span class="o">()</span> <span class="o">{</span> 
    <span class="k">return</span> <span class="n">ob2</span><span class="o">;</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div></div>

<p>æ¼”ç¤ºä¸¤ä¸ªç±»å‹å‚æ•°çš„æ³›å‹</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Demonstrate TwoGen. </span>
<span class="kd">class</span> <span class="nc">SimpGen</span> <span class="o">{</span> 
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span> 
 
    <span class="nc">TwoGen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">tgObj</span> <span class="o">=</span> 
      <span class="k">new</span> <span class="nc">TwoGen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;(</span><span class="mi">88</span><span class="o">,</span> <span class="s">"Generics"</span><span class="o">);</span> 
 
    <span class="c1">// Show the types. </span>
    <span class="n">tgObj</span><span class="o">.</span><span class="na">showTypes</span><span class="o">();</span> 
 
    <span class="c1">// Obtain and show values. </span>
    <span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="n">tgObj</span><span class="o">.</span><span class="na">getob1</span><span class="o">();</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"value: "</span> <span class="o">+</span> <span class="n">v</span><span class="o">);</span> 
 
    <span class="nc">String</span> <span class="n">str</span> <span class="o">=</span> <span class="n">tgObj</span><span class="o">.</span><span class="na">getob2</span><span class="o">();</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"value: "</span> <span class="o">+</span> <span class="n">str</span><span class="o">);</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div></div>

<h3 id="æ³›å‹ç±»çš„ä¸€èˆ¬å½¢å¼">æ³›å‹ç±»çš„ä¸€èˆ¬å½¢å¼</h3>

<p><code class="highlighter-rouge">class class-name&lt;type-param-list&gt;{ //...}</code></p>

<p><code class="highlighter-rouge">class-name&lt;type-arg-list&gt; var-name = new class-name&lt;type-arg-list&gt;(cons-arg-list)</code></p>

<h3 id="èŒƒå›´å—é™ç±»å‹">èŒƒå›´å—é™ç±»å‹</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Stats attempts (unsuccessfully) to  </span>
<span class="c1">// create a generic class that can compute </span>
<span class="c1">// the average of an array of numbers of </span>
<span class="c1">// any given type. </span>
<span class="c1">// </span>
<span class="c1">// The class contains an error! </span>
<span class="kd">class</span> <span class="nc">Stats</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>  
  <span class="no">T</span><span class="o">[]</span> <span class="n">nums</span><span class="o">;</span> <span class="c1">// nums is an array of type T </span>
    
  <span class="c1">// Pass the constructor a reference to   </span>
  <span class="c1">// an array of type T. </span>
  <span class="nc">Stats</span><span class="o">(</span><span class="no">T</span><span class="o">[]</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>  
    <span class="n">nums</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span>  
  <span class="o">}</span>  
  
  <span class="c1">// Return type double in all cases. </span>
  <span class="kt">double</span> <span class="nf">average</span><span class="o">()</span> <span class="o">{</span>  
    <span class="kt">double</span> <span class="n">sum</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span> 
 
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>  
      <span class="n">sum</span> <span class="o">+=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">doubleValue</span><span class="o">();</span> <span class="c1">// Error!!! </span>
 
    <span class="k">return</span> <span class="n">sum</span> <span class="o">/</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> 
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<p>numeric types æ‰æœ‰ doubleValue() æ–¹æ³•ã€‚è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ bounded typesï¼ŒèŒƒå›´å—é™çš„ç±»å‹ã€‚è¯­æ³•ï¼š <code class="highlighter-rouge">&lt;T extends superclass&gt;</code></p>

<p>ä¿®æ”¹ä¸ºï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// In this version of Stats, the type argument for </span>
<span class="c1">// T must be either Number, or a class derived </span>
<span class="c1">// from Number. </span>
<span class="kd">class</span> <span class="nc">Stats</span><span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Number</span><span class="o">&gt;</span> <span class="o">{</span>  
  <span class="no">T</span><span class="o">[]</span> <span class="n">nums</span><span class="o">;</span> <span class="c1">// array of Number or subclass </span>
    
  <span class="c1">// Pass the constructor a reference to   </span>
  <span class="c1">// an array of type Number or subclass. </span>
  <span class="nc">Stats</span><span class="o">(</span><span class="no">T</span><span class="o">[]</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>  
    <span class="n">nums</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span>  
  <span class="o">}</span>  
  
  <span class="c1">// Return type double in all cases. </span>
  <span class="kt">double</span> <span class="nf">average</span><span class="o">()</span> <span class="o">{</span>  
    <span class="kt">double</span> <span class="n">sum</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span> 
 
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>  
      <span class="n">sum</span> <span class="o">+=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">doubleValue</span><span class="o">();</span> 
 
    <span class="k">return</span> <span class="n">sum</span> <span class="o">/</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> 
  <span class="o">}</span>  
<span class="o">}</span>  
</code></pre></div></div>

<p>æ¼”ç¤ºä½¿ç”¨å—é™ç±»å‹ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Demonstrate Stats.  </span>
<span class="kd">class</span> <span class="nc">BoundsDemo</span> <span class="o">{</span>  
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>  
 
    <span class="nc">Integer</span> <span class="n">inums</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span> <span class="o">};</span> 
    <span class="nc">Stats</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">iob</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Stats</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;(</span><span class="n">inums</span><span class="o">);</span>   
    <span class="kt">double</span> <span class="n">v</span> <span class="o">=</span> <span class="n">iob</span><span class="o">.</span><span class="na">average</span><span class="o">();</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"iob average is "</span> <span class="o">+</span> <span class="n">v</span><span class="o">);</span> 
 
    <span class="nc">Double</span> <span class="n">dnums</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span> <span class="mf">1.1</span><span class="o">,</span> <span class="mf">2.2</span><span class="o">,</span> <span class="mf">3.3</span><span class="o">,</span> <span class="mf">4.4</span><span class="o">,</span> <span class="mf">5.5</span> <span class="o">};</span> 
    <span class="nc">Stats</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;</span> <span class="n">dob</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Stats</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;(</span><span class="n">dnums</span><span class="o">);</span>   
    <span class="kt">double</span> <span class="n">w</span> <span class="o">=</span> <span class="n">dob</span><span class="o">.</span><span class="na">average</span><span class="o">();</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"dob average is "</span> <span class="o">+</span> <span class="n">w</span><span class="o">);</span> 
 
    <span class="c1">// This won't compile because String is not a </span>
    <span class="c1">// subclass of Number. </span>
<span class="c1">//    String strs[] = { "1", "2", "3", "4", "5" }; </span>
<span class="c1">//    Stats&lt;String&gt; strob = new Stats&lt;String&gt;(strs);   </span>
  
<span class="c1">//    double x = strob.average(); </span>
<span class="c1">//    System.out.println("strob average is " + v); </span>
 
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<p>æ¶‰åŠåˆ°ç±»æˆ–æ¥å£ï¼Œæˆ–å¤šä¸ªæ¥å£çš„æ—¶å€™ï¼Œä½¿ç”¨ &amp; æ“ä½œç¬¦å°†å®ƒä»¬è¿æ¥èµ·æ¥ï¼Œä¾‹å¦‚ï¼š</p>

<p><code class="highlighter-rouge">class Gen&lt;T extends MyClass &amp; MyInterface&gt; { //... }</code></p>

<h3 id="ä½¿ç”¨é€šé…ç¬¦å‚æ•°">ä½¿ç”¨é€šé…ç¬¦å‚æ•°</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Use a wildcard.  </span>
<span class="kd">class</span> <span class="nc">Stats</span><span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Number</span><span class="o">&gt;</span> <span class="o">{</span>   
  <span class="no">T</span><span class="o">[]</span> <span class="n">nums</span><span class="o">;</span> <span class="c1">// array of Number or subclass  </span>
     
  <span class="c1">// Pass the constructor a reference to    </span>
  <span class="c1">// an array of type Number or subclass.  </span>
  <span class="nc">Stats</span><span class="o">(</span><span class="no">T</span><span class="o">[]</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>   
    <span class="n">nums</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span>   
  <span class="o">}</span>   
   
  <span class="c1">// Return type double in all cases.  </span>
  <span class="kt">double</span> <span class="nf">average</span><span class="o">()</span> <span class="o">{</span>   
    <span class="kt">double</span> <span class="n">sum</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>  
  
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>   
      <span class="n">sum</span> <span class="o">+=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">doubleValue</span><span class="o">();</span>  
  
    <span class="k">return</span> <span class="n">sum</span> <span class="o">/</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>  
  <span class="o">}</span> 
 
  <span class="c1">// Determine if two averages are the same. </span>
  <span class="c1">// Notice the use of the wildcard. </span>
  <span class="kt">boolean</span> <span class="nf">sameAvg</span><span class="o">(</span><span class="nc">Stats</span><span class="o">&lt;?&gt;</span> <span class="n">ob</span><span class="o">)</span> <span class="o">{</span> 
    <span class="k">if</span><span class="o">(</span><span class="n">average</span><span class="o">()</span> <span class="o">==</span> <span class="n">ob</span><span class="o">.</span><span class="na">average</span><span class="o">())</span>  
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span> 
 
    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div></div>

<p>æ¼”ç¤ºä½¿ç”¨é€šé…ç¬¦</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Demonstrate wildcard. </span>
<span class="kd">class</span> <span class="nc">WildcardDemo</span> <span class="o">{</span>   
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>   
    <span class="nc">Integer</span> <span class="n">inums</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span> <span class="o">};</span>  
    <span class="nc">Stats</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">iob</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Stats</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;(</span><span class="n">inums</span><span class="o">);</span>    
    <span class="kt">double</span> <span class="n">v</span> <span class="o">=</span> <span class="n">iob</span><span class="o">.</span><span class="na">average</span><span class="o">();</span>  
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"iob average is "</span> <span class="o">+</span> <span class="n">v</span><span class="o">);</span>  
  
    <span class="nc">Double</span> <span class="n">dnums</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span> <span class="mf">1.1</span><span class="o">,</span> <span class="mf">2.2</span><span class="o">,</span> <span class="mf">3.3</span><span class="o">,</span> <span class="mf">4.4</span><span class="o">,</span> <span class="mf">5.5</span> <span class="o">};</span>  
    <span class="nc">Stats</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;</span> <span class="n">dob</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Stats</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;(</span><span class="n">dnums</span><span class="o">);</span>    
    <span class="kt">double</span> <span class="n">w</span> <span class="o">=</span> <span class="n">dob</span><span class="o">.</span><span class="na">average</span><span class="o">();</span>  
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"dob average is "</span> <span class="o">+</span> <span class="n">w</span><span class="o">);</span>  
  
    <span class="nc">Float</span> <span class="n">fnums</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span> <span class="mf">1.0</span><span class="no">F</span><span class="o">,</span> <span class="mf">2.0</span><span class="no">F</span><span class="o">,</span> <span class="mf">3.0</span><span class="no">F</span><span class="o">,</span> <span class="mf">4.0</span><span class="no">F</span><span class="o">,</span> <span class="mf">5.0</span><span class="no">F</span> <span class="o">};</span>  
    <span class="nc">Stats</span><span class="o">&lt;</span><span class="nc">Float</span><span class="o">&gt;</span> <span class="n">fob</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Stats</span><span class="o">&lt;</span><span class="nc">Float</span><span class="o">&gt;(</span><span class="n">fnums</span><span class="o">);</span>    
    <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">fob</span><span class="o">.</span><span class="na">average</span><span class="o">();</span>  
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"fob average is "</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>  
  
    <span class="c1">// See which arrays have same average. </span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Averages of iob and dob "</span><span class="o">);</span> 
    <span class="k">if</span><span class="o">(</span><span class="n">iob</span><span class="o">.</span><span class="na">sameAvg</span><span class="o">(</span><span class="n">dob</span><span class="o">))</span> 
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"are the same."</span><span class="o">);</span>  
    <span class="k">else</span> 
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"differ."</span><span class="o">);</span>  
 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Averages of iob and fob "</span><span class="o">);</span> 
    <span class="k">if</span><span class="o">(</span><span class="n">iob</span><span class="o">.</span><span class="na">sameAvg</span><span class="o">(</span><span class="n">fob</span><span class="o">))</span> 
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"are the same."</span><span class="o">);</span>  
    <span class="k">else</span> 
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"differ."</span><span class="o">);</span>  
  <span class="o">}</span>   
<span class="o">}</span>
</code></pre></div></div>

<h4 id="èŒƒå›´å—é™é€šé…ç¬¦">èŒƒå›´å—é™é€šé…ç¬¦</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Bounded Wildcard arguments. </span>
 
<span class="c1">// Two-dimensional coordinates. </span>
<span class="kd">class</span> <span class="nc">TwoD</span> <span class="o">{</span> 
  <span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">;</span> 
 
  <span class="nc">TwoD</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span> 
    <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span> 
    <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span> 
  <span class="o">}</span> 
<span class="o">}</span> 
 
<span class="c1">// Three-dimensional coordinates. </span>
<span class="kd">class</span> <span class="nc">ThreeD</span> <span class="kd">extends</span> <span class="nc">TwoD</span> <span class="o">{</span> 
  <span class="kt">int</span> <span class="n">z</span><span class="o">;</span> 
   
  <span class="nc">ThreeD</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">,</span> <span class="kt">int</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span> 
    <span class="kd">super</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">);</span> 
    <span class="n">z</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span> 
  <span class="o">}</span> 
<span class="o">}</span> 
 
<span class="c1">// Four-dimensional coordinates. </span>
<span class="kd">class</span> <span class="nc">FourD</span> <span class="kd">extends</span> <span class="nc">ThreeD</span> <span class="o">{</span> 
  <span class="kt">int</span> <span class="n">t</span><span class="o">;</span> 
 
  <span class="nc">FourD</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">,</span> <span class="kt">int</span> <span class="n">c</span><span class="o">,</span> <span class="kt">int</span> <span class="n">d</span><span class="o">)</span> <span class="o">{</span> 
    <span class="kd">super</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">);</span> 
    <span class="n">t</span> <span class="o">=</span> <span class="n">d</span><span class="o">;</span>  
  <span class="o">}</span> 
<span class="o">}</span> 
 
<span class="c1">// This class holds an array of coordinate objects. </span>
<span class="kd">class</span> <span class="nc">Coords</span><span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">TwoD</span><span class="o">&gt;</span> <span class="o">{</span> 
  <span class="no">T</span><span class="o">[]</span> <span class="n">coords</span><span class="o">;</span> 
 
  <span class="nc">Coords</span><span class="o">(</span><span class="no">T</span><span class="o">[]</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span> <span class="n">coords</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span> <span class="o">}</span> 
<span class="o">}</span> 
</code></pre></div></div>

<p>æ¼”ç¤ºèŒƒå›´å—é™é€šé…ç¬¦</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Demonstrate a bounded wildcard. </span>
<span class="kd">class</span> <span class="nc">BoundedWildcard</span> <span class="o">{</span> 
  <span class="kd">static</span> <span class="kt">void</span> <span class="nf">showXY</span><span class="o">(</span><span class="nc">Coords</span><span class="o">&lt;?&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"X Y Coordinates:"</span><span class="o">);</span> 
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> 
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">x</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> 
                         <span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">y</span><span class="o">);</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span> 
  <span class="o">}</span> 
 
  <span class="kd">static</span> <span class="kt">void</span> <span class="nf">showXYZ</span><span class="o">(</span><span class="nc">Coords</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">ThreeD</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"X Y Z Coordinates:"</span><span class="o">);</span> 
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> 
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">x</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> 
                         <span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">y</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> 
                         <span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">z</span><span class="o">);</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span> 
  <span class="o">}</span> 
 
  <span class="kd">static</span> <span class="kt">void</span> <span class="nf">showAll</span><span class="o">(</span><span class="nc">Coords</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">FourD</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"X Y Z T Coordinates:"</span><span class="o">);</span> 
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> 
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">x</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> 
                         <span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">y</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> 
                         <span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">z</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> 
                         <span class="n">c</span><span class="o">.</span><span class="na">coords</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">t</span><span class="o">);</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span> 
  <span class="o">}</span> 
 
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span> 
    <span class="nc">TwoD</span> <span class="n">td</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span> 
      <span class="k">new</span> <span class="nf">TwoD</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span> 
      <span class="k">new</span> <span class="nf">TwoD</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="mi">9</span><span class="o">),</span> 
      <span class="k">new</span> <span class="nf">TwoD</span><span class="o">(</span><span class="mi">18</span><span class="o">,</span> <span class="mi">4</span><span class="o">),</span> 
      <span class="k">new</span> <span class="nf">TwoD</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">23</span><span class="o">)</span> 
    <span class="o">};</span> 
 
    <span class="nc">Coords</span><span class="o">&lt;</span><span class="nc">TwoD</span><span class="o">&gt;</span> <span class="n">tdlocs</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Coords</span><span class="o">&lt;</span><span class="nc">TwoD</span><span class="o">&gt;(</span><span class="n">td</span><span class="o">);</span>     
 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Contents of tdlocs."</span><span class="o">);</span> 
    <span class="n">showXY</span><span class="o">(</span><span class="n">tdlocs</span><span class="o">);</span> <span class="c1">// OK, is a TwoD </span>
<span class="c1">//  showXYZ(tdlocs); // Error, not a ThreeD </span>
<span class="c1">//  showAll(tdlocs); // Error, not a FourD </span>
 
    <span class="c1">// Now, create some FourD objects. </span>
    <span class="nc">FourD</span> <span class="n">fd</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span> 
      <span class="k">new</span> <span class="nf">FourD</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">),</span> 
      <span class="k">new</span> <span class="nf">FourD</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span> <span class="mi">8</span><span class="o">),</span> 
      <span class="k">new</span> <span class="nf">FourD</span><span class="o">(</span><span class="mi">22</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">9</span><span class="o">),</span> 
      <span class="k">new</span> <span class="nf">FourD</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="mi">23</span><span class="o">,</span> <span class="mi">17</span><span class="o">)</span> 
    <span class="o">};</span> 
 
    <span class="nc">Coords</span><span class="o">&lt;</span><span class="nc">FourD</span><span class="o">&gt;</span> <span class="n">fdlocs</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Coords</span><span class="o">&lt;</span><span class="nc">FourD</span><span class="o">&gt;(</span><span class="n">fd</span><span class="o">);</span>     
 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Contents of fdlocs."</span><span class="o">);</span> 
    <span class="c1">// These are all OK. </span>
    <span class="n">showXY</span><span class="o">(</span><span class="n">fdlocs</span><span class="o">);</span>  
    <span class="n">showXYZ</span><span class="o">(</span><span class="n">fdlocs</span><span class="o">);</span> 
    <span class="n">showAll</span><span class="o">(</span><span class="n">fdlocs</span><span class="o">);</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div></div>

<p>åˆ›å»ºä¸Šé™ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š<code class="highlighter-rouge">&lt;? extends superclass&gt;</code> ï¼Œåˆ›å»ºä¸‹é™ä½¿ç”¨è¿™æ ·çš„è¯­æ³•ï¼š<code class="highlighter-rouge">&lt;? super subclass&gt;</code></p>

<h3 id="åˆ›å»ºæ³›å‹æ–¹æ³•">åˆ›å»ºæ³›å‹æ–¹æ³•</h3>

<p>åˆ›å»ºä¸€ä¸ªç®€å•çš„æ³›å‹æ–¹æ³•ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Demonstrate a simple generic method. </span>
<span class="kd">class</span> <span class="nc">GenMethDemo</span> <span class="o">{</span>  
 
  <span class="c1">// Determine if an object is in an array. </span>
  <span class="kd">static</span> <span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;,</span> <span class="no">V</span> <span class="kd">extends</span> <span class="no">T</span><span class="o">&gt;</span> <span class="kt">boolean</span> <span class="nf">isIn</span><span class="o">(</span><span class="no">T</span> <span class="n">x</span><span class="o">,</span> <span class="no">V</span><span class="o">[]</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> 
 
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">y</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> 
      <span class="k">if</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">y</span><span class="o">[</span><span class="n">i</span><span class="o">]))</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span> 
 
    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> 
  <span class="o">}</span> 
 
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>  
 
    <span class="c1">// Use isIn() on Integers. </span>
    <span class="nc">Integer</span> <span class="n">nums</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span> <span class="o">};</span> 
 
    <span class="k">if</span><span class="o">(</span><span class="n">isIn</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">nums</span><span class="o">))</span> 
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"2 is in nums"</span><span class="o">);</span> 
 
    <span class="k">if</span><span class="o">(!</span><span class="n">isIn</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="n">nums</span><span class="o">))</span> 
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"7 is not in nums"</span><span class="o">);</span> 
 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span> 
 
    <span class="c1">// Use isIn() on Strings. </span>
    <span class="nc">String</span> <span class="n">strs</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span> <span class="s">"one"</span><span class="o">,</span> <span class="s">"two"</span><span class="o">,</span> <span class="s">"three"</span><span class="o">,</span> 
                      <span class="s">"four"</span><span class="o">,</span> <span class="s">"five"</span> <span class="o">};</span> 
 
    <span class="k">if</span><span class="o">(</span><span class="n">isIn</span><span class="o">(</span><span class="s">"two"</span><span class="o">,</span> <span class="n">strs</span><span class="o">))</span> 
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"two is in strs"</span><span class="o">);</span> 
 
    <span class="k">if</span><span class="o">(!</span><span class="n">isIn</span><span class="o">(</span><span class="s">"seven"</span><span class="o">,</span> <span class="n">strs</span><span class="o">))</span> 
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"seven is not in strs"</span><span class="o">);</span> 
 
    <span class="c1">// Opps! Won't compile! Types must be compatible. </span>
<span class="c1">//    if(isIn("two", nums)) </span>
<span class="c1">//      System.out.println("two is in strs"); </span>
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<p>æ³›å‹æ–¹æ³•çš„ç±»å‹å‚æ•°å£°æ˜æ”¾åœ¨è¿”å›å€¼ç±»å‹çš„å‰é¢ã€‚æ³›å‹æ–¹æ³•å¯ä»¥æ˜¯é™æ€çš„ä¹Ÿå¯ä»¥æ˜¯éé™æ€çš„ã€‚æ–¹æ³•å¯ä»¥ç±»å‹æ¨æ–­ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥æ˜¾å¼åœ°æŒ‡æ˜ç±»å‹å‚æ•°ã€‚</p>

<p>æ³›å‹æ–¹æ³•çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼š <code class="highlighter-rouge">&lt;type-param-list&gt; ret-type meth-name(param-list) { //... }</code>ï¼Œ type-param-list ä¸ºé€—å·åˆ†éš”çš„ç±»å‹å‚æ•°ã€‚</p>

<h4 id="æ³›å‹æ„é€ å™¨">æ³›å‹æ„é€ å™¨</h4>

<p>æ„é€ å™¨å¯ä»¥æ˜¯æ³›å‹ï¼Œå³ä½¿å®ƒçš„ç±»ä¸æ˜¯æ³›å‹ä¹Ÿå¯ä»¥ã€‚ä¾‹å¦‚ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Use a generic constructor. </span>
<span class="kd">class</span> <span class="nc">GenCons</span> <span class="o">{</span> 
  <span class="kd">private</span> <span class="kt">double</span> <span class="n">val</span><span class="o">;</span> 
 
  <span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Number</span><span class="o">&gt;</span> <span class="nf">GenCons</span><span class="o">(</span><span class="no">T</span> <span class="n">arg</span><span class="o">)</span> <span class="o">{</span> 
    <span class="n">val</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="na">doubleValue</span><span class="o">();</span> 
  <span class="o">}</span> 
 
  <span class="kt">void</span> <span class="nf">showval</span><span class="o">()</span> <span class="o">{</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"val: "</span> <span class="o">+</span> <span class="n">val</span><span class="o">);</span> 
  <span class="o">}</span> 
<span class="o">}</span> 
 
<span class="kd">class</span> <span class="nc">GenConsDemo</span> <span class="o">{</span> 
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span> 
 
    <span class="nc">GenCons</span> <span class="n">test</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenCons</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span> 
    <span class="nc">GenCons</span> <span class="n">test2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenCons</span><span class="o">(</span><span class="mf">123.5</span><span class="no">F</span><span class="o">);</span> 
 
    <span class="n">test</span><span class="o">.</span><span class="na">showval</span><span class="o">();</span> 
    <span class="n">test2</span><span class="o">.</span><span class="na">showval</span><span class="o">();</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div></div>

<h3 id="æ³›å‹æ¥å£">æ³›å‹æ¥å£</h3>

<p>æ³›å‹æ¥å£çš„ä¾‹å­ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A generic interface example. </span>
 
<span class="c1">// A Min/Max interface. </span>
<span class="kd">interface</span> <span class="nc">MinMax</span><span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;&gt;</span> <span class="o">{</span> 
  <span class="no">T</span> <span class="nf">min</span><span class="o">();</span> 
  <span class="no">T</span> <span class="nf">max</span><span class="o">();</span> 
<span class="o">}</span> 
</code></pre></div></div>

<p>å®ç°æ³›å‹æ¥å£ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Now, implement MinMax </span>
<span class="kd">class</span> <span class="nc">MyClass</span><span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;&gt;</span> <span class="kd">implements</span> <span class="nc">MinMax</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span> 
  <span class="no">T</span><span class="o">[]</span> <span class="n">vals</span><span class="o">;</span> 
 
  <span class="nc">MyClass</span><span class="o">(</span><span class="no">T</span><span class="o">[]</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span> <span class="n">vals</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span> <span class="o">}</span> 
 
  <span class="c1">// Return the minimum value in vals. </span>
  <span class="kd">public</span> <span class="no">T</span> <span class="nf">min</span><span class="o">()</span> <span class="o">{</span> 
    <span class="no">T</span> <span class="n">v</span> <span class="o">=</span> <span class="n">vals</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span> 
 
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">vals</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> 
      <span class="k">if</span><span class="o">(</span><span class="n">vals</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">compareTo</span><span class="o">(</span><span class="n">v</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="n">v</span> <span class="o">=</span> <span class="n">vals</span><span class="o">[</span><span class="n">i</span><span class="o">];</span> 
 
    <span class="k">return</span> <span class="n">v</span><span class="o">;</span> 
  <span class="o">}</span> 
 
  <span class="c1">// Return the maximum value in vals. </span>
  <span class="kd">public</span> <span class="no">T</span> <span class="nf">max</span><span class="o">()</span> <span class="o">{</span> 
    <span class="no">T</span> <span class="n">v</span> <span class="o">=</span> <span class="n">vals</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span> 
 
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">vals</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> 
      <span class="k">if</span><span class="o">(</span><span class="n">vals</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">compareTo</span><span class="o">(</span><span class="n">v</span><span class="o">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="n">v</span> <span class="o">=</span> <span class="n">vals</span><span class="o">[</span><span class="n">i</span><span class="o">];</span> 
 
    <span class="k">return</span> <span class="n">v</span><span class="o">;</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div></div>

<p>æ¼”ç¤ºä½¿ç”¨æ³›å‹æ¥å£ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">GenIFDemo</span> <span class="o">{</span> 
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span> 
    <span class="nc">Integer</span> <span class="n">inums</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span><span class="mi">3</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span> <span class="o">};</span> 
    <span class="nc">Character</span> <span class="n">chs</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span><span class="sc">'b'</span><span class="o">,</span> <span class="sc">'r'</span><span class="o">,</span> <span class="sc">'p'</span><span class="o">,</span> <span class="sc">'w'</span> <span class="o">};</span> 
 
    <span class="nc">MyClass</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">iob</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyClass</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;(</span><span class="n">inums</span><span class="o">);</span> 
    <span class="nc">MyClass</span><span class="o">&lt;</span><span class="nc">Character</span><span class="o">&gt;</span> <span class="n">cob</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyClass</span><span class="o">&lt;</span><span class="nc">Character</span><span class="o">&gt;(</span><span class="n">chs</span><span class="o">);</span> 
 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Max value in inums: "</span> <span class="o">+</span> <span class="n">iob</span><span class="o">.</span><span class="na">max</span><span class="o">());</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Min value in inums: "</span> <span class="o">+</span> <span class="n">iob</span><span class="o">.</span><span class="na">min</span><span class="o">());</span> 
 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Max value in chs: "</span> <span class="o">+</span> <span class="n">cob</span><span class="o">.</span><span class="na">max</span><span class="o">());</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Min value in chs: "</span> <span class="o">+</span> <span class="n">cob</span><span class="o">.</span><span class="na">min</span><span class="o">());</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div></div>

<p>æ³›å‹æ¥å£çš„ä¸€èˆ¬å½¢å¼ï¼š</p>

<p><code class="highlighter-rouge">interface interface-name&lt;type-param-list&gt; { //... }</code></p>

<p>å®ç°ä¸€ä¸ªæ³›å‹æ¥å£çš„æƒ…å†µï¼š</p>

<p><code class="highlighter-rouge">class class-name&lt;type-param-list&gt; implements interface-name&lt;type-arg-list&gt; { //... }</code></p>

<h3 id="åŸå§‹ç±»å‹å’Œè€ä»£ç ">åŸå§‹ç±»å‹å’Œè€ä»£ç </h3>

<p>æ¼”ç¤ºåŸå§‹ç±»å‹ï¼ˆraw typeï¼‰</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Demonstrate a raw type. </span>
<span class="kd">class</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>  
  <span class="no">T</span> <span class="n">ob</span><span class="o">;</span> <span class="c1">// declare an object of type T  </span>
    
  <span class="c1">// Pass the constructor a reference to   </span>
  <span class="c1">// an object of type T.  </span>
  <span class="nc">Gen</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>  
    <span class="n">ob</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span>  
  <span class="o">}</span>  
  
  <span class="c1">// Return ob.  </span>
  <span class="no">T</span> <span class="nf">getob</span><span class="o">()</span> <span class="o">{</span>  
    <span class="k">return</span> <span class="n">ob</span><span class="o">;</span>  
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<p>æ¼”ç¤ºä½¿ç”¨åŸå§‹ç±»å‹ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Demonstrate raw type. </span>
<span class="kd">class</span> <span class="nc">RawDemo</span> <span class="o">{</span>  
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>  
 
    <span class="c1">// Create a Gen object for Integers. </span>
    <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">iOb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;(</span><span class="mi">88</span><span class="o">);</span>  
   
    <span class="c1">// Create a Gen object for Strings. </span>
    <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strOb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="s">"Generics Test"</span><span class="o">);</span>  
  
    <span class="c1">// Create a raw-type Gen object and give it </span>
    <span class="c1">// a Double value. </span>
    <span class="nc">Gen</span> <span class="n">raw</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen</span><span class="o">(</span><span class="k">new</span> <span class="nc">Double</span><span class="o">(</span><span class="mf">98.6</span><span class="o">));</span> 
 
    <span class="c1">// Cast here is necessary because type is unknown. </span>
    <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Double</span><span class="o">)</span> <span class="n">raw</span><span class="o">.</span><span class="na">getob</span><span class="o">();</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"value: "</span> <span class="o">+</span> <span class="n">d</span><span class="o">);</span> 
 
    <span class="c1">// The use of a raw type can lead to run-time. </span>
    <span class="c1">// exceptions.  Here are some examples. </span>
 
    <span class="c1">// The following cast causes a run-time error! </span>
<span class="c1">//    int i = (Integer) raw.getob(); // run-time error </span>
 
    <span class="c1">// This assigment overrides type safety. </span>
    <span class="n">strOb</span> <span class="o">=</span> <span class="n">raw</span><span class="o">;</span> <span class="c1">// OK, but potentially wrong </span>
<span class="c1">//    String str = strOb.getob(); // run-time error  </span>
     
    <span class="c1">// This assingment also overrides type safety. </span>
    <span class="n">raw</span> <span class="o">=</span> <span class="n">iOb</span><span class="o">;</span> <span class="c1">// OK, but potentially wrong </span>
<span class="c1">//    d = (Double) raw.getob(); // run-time error </span>
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<p>åŸå§‹ç±»å‹ä¸æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œå› ä¸ºç»•è¿‡äº†æ³›å‹æä¾›çš„ç±»å‹å®‰å…¨æœºåˆ¶ã€‚ä¼šæç¤º <em>unchecked warning</em></p>

<h3 id="æ³›å‹ç±»ä½“ç³»ç»“æ„">æ³›å‹ç±»ä½“ç³»ç»“æ„</h3>

<p>æ³›å‹ä¸éæ³›å‹çš„ç»§æ‰¿ä½“ç³»ç»“æ„ä¹‹é—´çš„åŒºåˆ«åœ¨äºï¼Œåœ¨æ³›å‹ç»§æ‰¿ä½“ç³»é‡Œé¢ï¼Œä»»ä½•ç±»å‹å‚æ•°éƒ½éœ€è¦å‘ä¸Šä¼ é€’åˆ°è¶…ç±»ã€‚è¿™è·Ÿæ„é€ å™¨å‚æ•°åœ¨ç»§æ‰¿ä½“ç³»ç»“æ„ä¸­å¿…é¡»å‘ä¸Šä¼ é€’çš„æƒ…å†µç±»ä¼¼ã€‚</p>

<h4 id="ä½¿ç”¨æ³›å‹è¶…ç±»">ä½¿ç”¨æ³›å‹è¶…ç±»</h4>

<p>ä¸€ä¸ªç®€å•çš„æ³›å‹ç»§æ‰¿ä½“ç³»ç»“æ„</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A simple generic class hierarchy. </span>
<span class="kd">class</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>  
  <span class="no">T</span> <span class="n">ob</span><span class="o">;</span> 
    
  <span class="nc">Gen</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>  
    <span class="n">ob</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span>  
  <span class="o">}</span>  
  
  <span class="c1">// Return ob.  </span>
  <span class="no">T</span> <span class="nf">getob</span><span class="o">()</span> <span class="o">{</span>  
    <span class="k">return</span> <span class="n">ob</span><span class="o">;</span>  
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<p>Gen çš„ä¸€ä¸ªå­ç±»</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A subclass of Gen. </span>
<span class="kd">class</span> <span class="nc">Gen2</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span> 
  <span class="nc">Gen2</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span> 
    <span class="kd">super</span><span class="o">(</span><span class="n">o</span><span class="o">);</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div></div>

<p>ä¸€ä¸ªå­ç±»å¯ä»¥æ·»åŠ å®ƒè‡ªå·±çš„ç±»å‹å‚æ•°</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A subclass can add its own type parameters. </span>
<span class="kd">class</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>  
  <span class="no">T</span> <span class="n">ob</span><span class="o">;</span> <span class="c1">// declare an object of type T  </span>
    
  <span class="c1">// Pass the constructor a reference to   </span>
  <span class="c1">// an object of type T.  </span>
  <span class="nc">Gen</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>  
    <span class="n">ob</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span>  
  <span class="o">}</span>  
  
  <span class="c1">// Return ob.  </span>
  <span class="no">T</span> <span class="nf">getob</span><span class="o">()</span> <span class="o">{</span>  
    <span class="k">return</span> <span class="n">ob</span><span class="o">;</span>  
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A subclass of Gen that defines a second </span>
<span class="c1">// type parameter, called V. </span>
<span class="kd">class</span> <span class="nc">Gen2</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">V</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span> 
  <span class="no">V</span> <span class="n">ob2</span><span class="o">;</span> 
 
  <span class="nc">Gen2</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">,</span> <span class="no">V</span> <span class="n">o2</span><span class="o">)</span> <span class="o">{</span> 
    <span class="kd">super</span><span class="o">(</span><span class="n">o</span><span class="o">);</span> 
    <span class="n">ob2</span> <span class="o">=</span> <span class="n">o2</span><span class="o">;</span> 
  <span class="o">}</span> 
 
  <span class="no">V</span> <span class="nf">getob2</span><span class="o">()</span> <span class="o">{</span> 
    <span class="k">return</span> <span class="n">ob2</span><span class="o">;</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div></div>

<p>æ¼”ç¤ºç»§æ‰¿ä½“ç³»ç»“æ„</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Create an object of type Gen2. </span>
<span class="kd">class</span> <span class="nc">HierDemo</span> <span class="o">{</span>  
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>  
    
    <span class="c1">// Create a Gen2 object for String and Integer. </span>
    <span class="nc">Gen2</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> 
      <span class="k">new</span> <span class="nc">Gen2</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;(</span><span class="s">"Value is: "</span><span class="o">,</span> <span class="mi">99</span><span class="o">);</span>  
 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">getob</span><span class="o">());</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">getob2</span><span class="o">());</span> 
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<h4 id="æ³›å‹å­ç±»">æ³›å‹å­ç±»</h4>

<p>éæ³›å‹å­ç±»</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A nongeneric class can be the superclass </span>
<span class="c1">// of a generic subclass. </span>
 
<span class="c1">// A nongeneric class. </span>
<span class="kd">class</span> <span class="nc">NonGen</span> <span class="o">{</span> 
  <span class="kt">int</span> <span class="n">num</span><span class="o">;</span> 
 
  <span class="nc">NonGen</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span> 
    <span class="n">num</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> 
  <span class="o">}</span> 
 
  <span class="kt">int</span> <span class="nf">getnum</span><span class="o">()</span> <span class="o">{</span> 
    <span class="k">return</span> <span class="n">num</span><span class="o">;</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</code></pre></div></div>

<p>æ³›å‹å­ç±»</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A generic subclass. </span>
<span class="kd">class</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">NonGen</span> <span class="o">{</span>  
  <span class="no">T</span> <span class="n">ob</span><span class="o">;</span> <span class="c1">// declare an object of type T  </span>
    
  <span class="c1">// Pass the constructor a reference to   </span>
  <span class="c1">// an object of type T.  </span>
  <span class="nc">Gen</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>  
    <span class="kd">super</span><span class="o">(</span><span class="n">i</span><span class="o">);</span> 
    <span class="n">ob</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span>  
  <span class="o">}</span>  
  
  <span class="c1">// Return ob.  </span>
  <span class="no">T</span> <span class="nf">getob</span><span class="o">()</span> <span class="o">{</span>  
    <span class="k">return</span> <span class="n">ob</span><span class="o">;</span>  
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<p>æ¼”ç¤ºç»§æ‰¿ä½“ç³»</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Create a Gen object. </span>
<span class="kd">class</span> <span class="nc">HierDemo2</span> <span class="o">{</span>  
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>  
    
    <span class="c1">// Create a Gen object for String. </span>
    <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">w</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="s">"Hello"</span><span class="o">,</span> <span class="mi">47</span><span class="o">);</span> 
    
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">w</span><span class="o">.</span><span class="na">getob</span><span class="o">()</span> <span class="o">+</span> <span class="s">" "</span><span class="o">);</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">w</span><span class="o">.</span><span class="na">getnum</span><span class="o">());</span> 
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<h4 id="æ³›å‹ä½“ç³»çš„è¿è¡Œæ—¶ç±»å‹æ¯”è¾ƒ">æ³›å‹ä½“ç³»çš„è¿è¡Œæ—¶ç±»å‹æ¯”è¾ƒ</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Use the instanceof operator with a generic class hierarchy.  </span>
<span class="kd">class</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>   
  <span class="no">T</span> <span class="n">ob</span><span class="o">;</span>  
     
  <span class="nc">Gen</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>   
    <span class="n">ob</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span>   
  <span class="o">}</span>   
   
  <span class="c1">// Return ob.   </span>
  <span class="no">T</span> <span class="nf">getob</span><span class="o">()</span> <span class="o">{</span>   
    <span class="k">return</span> <span class="n">ob</span><span class="o">;</span>   
  <span class="o">}</span>   
<span class="o">}</span>
</code></pre></div></div>

<p>Gen çš„ä¸€ä¸ªå­ç±»</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A subclass of Gen.  </span>
<span class="kd">class</span> <span class="nc">Gen2</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>  
  <span class="nc">Gen2</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>  
    <span class="kd">super</span><span class="o">(</span><span class="n">o</span><span class="o">);</span>  
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<p>æ¼”ç¤ºæ³›å‹è¿è¡Œæ—¶ç±»å‹æ¨æ–­</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Demonstrate run-time type ID implications of generic </span>
<span class="c1">// class hierarchy. </span>
<span class="kd">class</span> <span class="nc">HierDemo3</span> <span class="o">{</span>   
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>   
     
    <span class="c1">// Create a Gen object for Integers.  </span>
    <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">iOb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;(</span><span class="mi">88</span><span class="o">);</span>  
  
    <span class="c1">// Create a Gen2 object for Integers.  </span>
    <span class="nc">Gen2</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">iOb2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen2</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;(</span><span class="mi">99</span><span class="o">);</span>   
    
    <span class="c1">// Create a Gen2 object for Strings.  </span>
    <span class="nc">Gen2</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strOb2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen2</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="s">"Generics Test"</span><span class="o">);</span>   
  
    <span class="c1">// See if iOb2 is some form of Gen2. </span>
    <span class="k">if</span><span class="o">(</span><span class="n">iOb2</span> <span class="k">instanceof</span> <span class="nc">Gen2</span><span class="o">&lt;?&gt;)</span>   
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"iOb2 is instance of Gen2"</span><span class="o">);</span>  
 
    <span class="c1">// See if iOb2 is some form of Gen. </span>
    <span class="k">if</span><span class="o">(</span><span class="n">iOb2</span> <span class="k">instanceof</span> <span class="nc">Gen</span><span class="o">&lt;?&gt;)</span>   
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"iOb2 is instance of Gen"</span><span class="o">);</span>  
  
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>  
  
    <span class="c1">// See if strOb2 is a Gen2. </span>
    <span class="k">if</span><span class="o">(</span><span class="n">strOb2</span> <span class="k">instanceof</span> <span class="nc">Gen2</span><span class="o">&lt;?&gt;)</span>   
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"strOb is instance of Gen2"</span><span class="o">);</span>  
  
    <span class="c1">// See if strOb2 is a Gen. </span>
    <span class="k">if</span><span class="o">(</span><span class="n">strOb2</span> <span class="k">instanceof</span> <span class="nc">Gen</span><span class="o">&lt;?&gt;)</span>   
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"strOb is instance of Gen"</span><span class="o">);</span>  
 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>  
  
    <span class="c1">// See if iOb is an instance of Gen2, which it is not. </span>
    <span class="k">if</span><span class="o">(</span><span class="n">iOb</span> <span class="k">instanceof</span> <span class="nc">Gen2</span><span class="o">&lt;?&gt;)</span>   
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"iOb is instance of Gen2"</span><span class="o">);</span>  
  
    <span class="c1">// See if iOb is an instance of Gen, which it is. </span>
    <span class="k">if</span><span class="o">(</span><span class="n">iOb</span> <span class="k">instanceof</span> <span class="nc">Gen</span><span class="o">&lt;?&gt;)</span>   
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"iOb is instance of Gen"</span><span class="o">);</span>  
  
    <span class="c1">// The following can't be compiled because  </span>
    <span class="c1">// generic type info does not exist at run-time. </span>
<span class="c1">//    if(iOb2 instanceof Gen2&lt;Integer&gt;)   </span>
<span class="c1">//      System.out.println("iOb2 is instance of Gen2&lt;Integer&gt;");  </span>
  <span class="o">}</span>   
<span class="o">}</span>
</code></pre></div></div>

<h4 id="ç±»å‹è½¬æ¢">ç±»å‹è½¬æ¢</h4>

<p>åªèƒ½æ˜¯å…¼å®¹çš„ç±»å‹ä¹‹é—´è½¬æ¢</p>

<h4 id="é‡å†™æ³›å‹ç±»çš„æ–¹æ³•">é‡å†™æ³›å‹ç±»çš„æ–¹æ³•</h4>

<p>é‡å†™ä¸€ä¸ªæ³›å‹ç±»ä¸­çš„æ³›å‹æ–¹æ³•</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Overriding a generic method in a generic class. </span>
<span class="kd">class</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>  
  <span class="no">T</span> <span class="n">ob</span><span class="o">;</span> <span class="c1">// declare an object of type T  </span>
    
  <span class="c1">// Pass the constructor a reference to   </span>
  <span class="c1">// an object of type T.  </span>
  <span class="nc">Gen</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>  
    <span class="n">ob</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span>  
  <span class="o">}</span>  
  
  <span class="c1">// Return ob.  </span>
  <span class="no">T</span> <span class="nf">getob</span><span class="o">()</span> <span class="o">{</span>  
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Gen's getob(): "</span> <span class="o">);</span> 
    <span class="k">return</span> <span class="n">ob</span><span class="o">;</span>  
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<p>é‡å†™äº† getob() çš„ä¸€ä¸ª Gen çš„å­ç±»</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A subclass of Gen that overrides getob(). </span>
<span class="kd">class</span> <span class="nc">Gen2</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span> 
 
  <span class="nc">Gen2</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span> 
    <span class="kd">super</span><span class="o">(</span><span class="n">o</span><span class="o">);</span> 
  <span class="o">}</span> 
   
  <span class="c1">// Override getob(). </span>
  <span class="no">T</span> <span class="nf">getob</span><span class="o">()</span> <span class="o">{</span>  
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Gen2's getob(): "</span><span class="o">);</span> 
    <span class="k">return</span> <span class="n">ob</span><span class="o">;</span>  
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<p>æ¼”ç¤ºå¦‚ä½•é‡å†™æ³›å‹æ–¹æ³•ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Demonstrate generic method override. </span>
<span class="kd">class</span> <span class="nc">OverrideDemo</span> <span class="o">{</span>  
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>  
    
    <span class="c1">// Create a Gen object for Integers. </span>
    <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">iOb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;(</span><span class="mi">88</span><span class="o">);</span> 
 
    <span class="c1">// Create a Gen2 object for Integers. </span>
    <span class="nc">Gen2</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">iOb2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen2</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;(</span><span class="mi">99</span><span class="o">);</span>  
   
    <span class="c1">// Create a Gen2 object for Strings. </span>
    <span class="nc">Gen2</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">strOb2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen2</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="s">"Generics Test"</span><span class="o">);</span>  
 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">iOb</span><span class="o">.</span><span class="na">getob</span><span class="o">());</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">iOb2</span><span class="o">.</span><span class="na">getob</span><span class="o">());</span> 
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">strOb2</span><span class="o">.</span><span class="na">getob</span><span class="o">());</span> 
  <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div>

<h3 id="æ³›å‹çš„ç±»å‹æ¨æ–­">æ³›å‹çš„ç±»å‹æ¨æ–­</h3>

<p>å³é’»çŸ³æ“ä½œç¬¦ diamond operator <code class="highlighter-rouge">&lt;&gt;</code></p>

<h3 id="ç±»å‹æ“¦é™¤">ç±»å‹æ“¦é™¤</h3>

<p>æ³›å‹åªæ˜¯æºä»£ç æœºåˆ¶ï¼Œç¼–è¯‘åä¸å­˜åœ¨ç±»å‹å‚æ•°ä¿¡æ¯ã€‚</p>

<h4 id="æ¡¥æ¥æ–¹æ³•">æ¡¥æ¥æ–¹æ³•</h4>

<p>æœ‰æ—¶å€™ç¼–è¯‘å™¨éœ€è¦ä¸€ä¸ªæ¡¥æ¥æ–¹æ³•ï¼Œç¡®ä¿å­ç±»é‡å†™çš„æ–¹æ³•çš„ç±»å‹æ“¦é™¤æ•ˆæœä¸çˆ¶ç±»æ–¹æ³•ä¸åŒã€‚</p>

<h3 id="æ¨¡ç³Šé”™è¯¯">æ¨¡ç³Šé”™è¯¯</h3>

<p>å¸¸å‡ºç°åœ¨æ–¹æ³•é‡è½½çš„æ—¶å€™ã€‚</p>

<h3 id="æ³›å‹çš„ä¸€äº›é™åˆ¶">æ³›å‹çš„ä¸€äº›é™åˆ¶</h3>

<h4 id="ç±»å‹å‚æ•°ä¸å¯å®ä¾‹åŒ–">ç±»å‹å‚æ•°ä¸å¯å®ä¾‹åŒ–</h4>

<p>ä¾‹å¦‚ä»¥ä¸‹ä»£ç ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ä¸èƒ½åˆ›å»ºä¸€ä¸ªç±»å‹ä¸º T çš„ç¤ºä¾‹</span>
<span class="kd">class</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="no">T</span> <span class="n">ob</span><span class="o">;</span>
    
    <span class="nc">Gen</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">ob</span> <span class="o">=</span> <span class="k">new</span> <span class="no">T</span><span class="o">();</span>  <span class="c1">// éæ³•æ“ä½œ!</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>åŸå› ç¼–è¯‘å™¨ä¸çŸ¥é“åº”è¯¥åˆ›å»ºå£°æ˜ç±»å‹çš„å¯¹è±¡ï¼ŒT åªæ˜¯ä¸€ä¸ªå ä½ç¬¦ã€‚</p>

<h4 id="é™æ€æ–¹æ³•çš„é™åˆ¶">é™æ€æ–¹æ³•çš„é™åˆ¶</h4>

<p>No static member can use a type parameter declared by the enclosing class. For example, both of the static members of this class are illeagal:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Wrong</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
	<span class="c1">// Wrong, no static variables of type T.</span>
    <span class="kd">static</span> <span class="no">T</span> <span class="n">ob</span><span class="o">;</span>
    
    <span class="c1">// Wrong, no static method can use T.</span>
    <span class="kd">static</span> <span class="no">T</span> <span class="nf">getob</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">ob</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Although you canâ€™t declare static memebers that use a type parameter declared by the enclosing class, you can declare static generic methods, which define their own type parameters, as was done earlier in this chapter.</p>

<h4 id="æ³›å‹åœ¨æ•°ç»„çš„é™åˆ¶">æ³›å‹åœ¨æ•°ç»„çš„é™åˆ¶</h4>

<p>ä¸»è¦åŒ…å«ä¸¤æ–¹é¢çš„é™åˆ¶ï¼šä¸å¯ä»¥å®ä¾‹åŒ–å…ƒç´ ç±»å‹ä¸ºç±»å‹å‚æ•°çš„æ•°ç»„ã€‚</p>

<p>ä¸å¯ä»¥åˆ›å»ºæŸä¸ªç‰¹å®šçš„æ³›å‹çš„æ•°ç»„å¼•ç”¨ã€‚ä»¥ä¸‹ä»£ç å±•ç¤ºè¿™ä¸¤ç§æƒ…å†µï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Generics and arrays.</span>
<span class="kd">class</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Number</span><span class="o">&gt;</span> <span class="o">{</span>
	<span class="no">T</span> <span class="n">ob</span><span class="o">;</span>
	<span class="no">T</span> <span class="n">vals</span><span class="o">[];</span>	<span class="c1">// OK</span>
	<span class="nc">Gen</span><span class="o">(</span><span class="no">T</span> <span class="n">o</span><span class="o">,</span> <span class="no">T</span><span class="o">[]</span> <span class="n">nums</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">ob</span> <span class="o">=</span> <span class="n">o</span><span class="o">;</span>
		
		<span class="c1">// This statement is illegal.</span>
		<span class="c1">// vals = new T[10]; 	// can't create an array of T</span>
		
		<span class="c1">// But, this statement is OK.</span>
		<span class="n">vals</span> <span class="o">=</span> <span class="n">nums</span><span class="o">;</span>	<span class="c1">// OK to assign reference to existent array</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">GenArrays</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
        <span class="nc">Integer</span> <span class="n">n</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span> <span class="o">};</span>
        
        <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">iOb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;(</span><span class="mi">50</span><span class="o">,</span> <span class="n">n</span><span class="o">);</span>
        
        <span class="c1">// Can't create an array of type-specific generic references.</span>
        <span class="c1">// Gen&lt;Integer&gt; gens[] = new Gen&lt;Integer&gt;[10];	// Wrong!</span>
        
        <span class="c1">// This is OK.</span>
        <span class="nc">Gen</span><span class="o">&lt;?&gt;</span> <span class="n">gens</span><span class="o">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gen</span><span class="o">&lt;?&gt;[</span><span class="mi">10</span><span class="o">];</span>	<span class="c1">// OK</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="æ³›å‹åœ¨å¼‚å¸¸æ–¹é¢çš„é™åˆ¶">æ³›å‹åœ¨å¼‚å¸¸æ–¹é¢çš„é™åˆ¶</h4>

<p>æ³›å‹ç±»ä¸å¯ä»¥ç»§æ‰¿ <code class="highlighter-rouge">Throwable</code> æ„å‘³ç€ä½ ä¸å¯ä»¥åˆ›å»ºæ³›å‹å¼‚å¸¸ç±»å‹ã€‚</p>
:ET