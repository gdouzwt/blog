<!DOCTYPE html><html lang="zh-CN" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Java 内部类" /><meta name="author" content="招文桃" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="在这一篇文章，你将会学习到： 内部类是什么 如何声明内部类 如何声明成员、局部，以及匿名内部类 如何创建内部类的对象" /><meta property="og:description" content="在这一篇文章，你将会学习到： 内部类是什么 如何声明内部类 如何声明成员、局部，以及匿名内部类 如何创建内部类的对象" /><link rel="canonical" href="https://blog.zwt.io/2020/02/04/inner-class/" /><meta property="og:url" content="https://blog.zwt.io/2020/02/04/inner-class/" /><meta property="og:site_name" content="招文桃" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-02-04T22:34:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Java 内部类" /><meta name="twitter:site" content="@gdouzwt" /><meta name="twitter:creator" content="@招文桃" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"招文桃"},"dateModified":"2022-05-29T22:11:22+08:00","datePublished":"2020-02-04T22:34:00+08:00","description":"在这一篇文章，你将会学习到： 内部类是什么 如何声明内部类 如何声明成员、局部，以及匿名内部类 如何创建内部类的对象","headline":"Java 内部类","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.zwt.io/2020/02/04/inner-class/"},"url":"https://blog.zwt.io/2020/02/04/inner-class/"}</script><title>Java 内部类 | 招文桃</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="招文桃"><meta name="application-name" content="招文桃"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/gdouzwt/blog/main/img/large.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">招文桃</a></div><div class="site-subtitle font-italic">开发记录</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/gdouzwt" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/gdouzwt" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['zhao_at_'wen-tao.com',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>Java 内部类</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Java 内部类</h1><div class="post-meta text-muted"> <span> 发表于 <em class="" data-ts="1580826840" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2020-02-04 </em> </span> <span> 更新于 <em class="" data-ts="1653833482" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-05-29 </em> </span><div class="d-flex justify-content-between"> <span> 作者 <em> zwt </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2481 字"> <em>13 分钟</em>阅读</span></div></div></div><div class="post-content"><blockquote><p>在这一篇文章，你将会学习到：</p><ul><li>内部类是什么<li>如何声明内部类<li>如何声明成员、局部，以及匿名内部类<li>如何创建内部类的对象</ul></blockquote><h3 id="什么是内部类"><span class="mr-2">什么是内部类？</span><a href="#什么是内部类" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>我们知道类（class）是包（package）的成员（member）。即顶层类，直接放在包下面的类。例如以下这段代码：</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1">// TopLevel.java</span>
<span class="kn">package</span> <span class="nn">io.zwt.innerclasses</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TopLevel</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">101</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getValue</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setValue</span><span class="o">(</span><span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>上面的 <code class="language-plaintext highlighter-rouge">TopLevel</code> 类是 <code class="language-plaintext highlighter-rouge">io.zwt.innerclasses</code> 包的成员。 这个里有三个成员：</p><ul><li>一个实例变量（instance variable）：<code class="language-plaintext highlighter-rouge">value</code><li>两个方法（method）：<code class="language-plaintext highlighter-rouge">getValue()</code> and <code class="language-plaintext highlighter-rouge">setValue()</code></ul><p>一个类也可以声明在另一个类里面。这种类称为<em>内部类</em>。如果定义在另一个类中的类显式或隐式被声明为static，则它被称为嵌套类，而不是内部类。包含内部类的类称为<em>外层类</em>或<em>外部类</em>。看一下下面的 <code class="language-plaintext highlighter-rouge">Outer</code> 和 <code class="language-plaintext highlighter-rouge">Inner</code> 类声明：</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">// Outer.java</span>
<span class="n">pakcage</span> <span class="n">io</span><span class="o">.</span><span class="na">zwt</span><span class="o">.</span><span class="na">innerclasses</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Outer</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Inner</span> <span class="o">{</span>
		<span class="c1">// 内部类的成员在这里</span>
	<span class="o">}</span>
	<span class="c1">// 外部类的其它成员在这里</span>
<span class="o">}</span>
</pre></table></code></div></div><p>一个内部类实例只能存在于其外部类实例内。也就是说，你在创建内部类实例之前必须要有一个外部类的实例。这个规则在规范一个对象不能脱离另一个对象而存在这方面很有用。内部类可以完全访问到它的外部类的所有成员，包括私有成员。</p><h3 id="使用内部类的好处"><span class="mr-2">使用内部类的好处</span><a href="#使用内部类的好处" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>可以将一个类定义在它的使用者附近。例如，一个计算机有处理器，所以最好将 <code class="language-plaintext highlighter-rouge">Processor</code> 类定义为 <code class="language-plaintext highlighter-rouge">Computer</code> 类的内部类。<li>它们提供了额外管理类结构的命名空间。例如，在未有内部类之前，一个类只能是包的成员。有了内部类，包含内部类的顶层类，提供了额外的命名空间。<li>某些设计模式用内部类实现更简单。例如，适配器模式，枚举模式，还有状态模式，都可以用内部类轻松实现。<li>用内部类实现回调机制优雅且方便。Java 8 的 Lambda 表达式是一种更好且更简洁的回调实现方式。<li>有助于在 Java 实现闭包。<li>使用内部类你可以体验一种类的多继承。一个内部类可以继承其它类。因此，内部类可以访问它的外部类成员，以及它的超类成员。注意，访问两个以上类的成员是多继承的目标之一，这可以通过使用内部类实现。然而，只是可以访问两个类的成员，并不是真正意义上的多继承。</ul><h3 id="内部类的种类"><span class="mr-2">内部类的种类</span><a href="#内部类的种类" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>你可以在类的任意可以写 Java 语句的位置定义一个内部类，有三种内部类。它们的类型取决于声明所在的位置和声明的方式。</p><ul><li>成员内部类<li>局部内部类<li>匿名内部类</ul><h4 id="成员内部类"><span class="mr-2">成员内部类</span><a href="#成员内部类" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>成员内部类和成员字段或成员方法一样声明在一个类里面。可以声明为 <code class="language-plaintext highlighter-rouge">public</code>, <code class="language-plaintext highlighter-rouge">private</code>, <code class="language-plaintext highlighter-rouge">protected</code> 或者是包级别访问权限。其实例仅在外部类存在的条件下才存在。</p><h4 id="局部内部类"><span class="mr-2">局部内部类</span><a href="#局部内部类" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>局部内部类声明在块内。它的作用范围受限于它声明所在的块。由于它作用范围始终受限于块，它的声明不可以使用任何访问修饰符，例如 <code class="language-plaintext highlighter-rouge">public</code>, <code class="language-plaintext highlighter-rouge">private</code> 或 <code class="language-plaintext highlighter-rouge">protected</code>。 通常局部内部类定义在一个方法内。然而，它也可以被定义在静态初始化块，实例初始化块，以及构造器内。当只在块内使用一个类，你可以使用局部内部类。</p><p>要在块外使用局部内部类，它必须符合以下至少一项：</p><ul><li>Implement a public interface 实现一个公有接口<li>继承自另一个公有类，并重写它的超类方法。</ul><h4 id="匿名内部类"><span class="mr-2">匿名内部类</span><a href="#匿名内部类" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>匿名内部类跟局部内部类同样，除了一个区别：它没有名字。因为它没有名字，所以没有构造器。</p><h3 id="静态成员类不是内部类"><span class="mr-2">静态成员类不是内部类</span><a href="#静态成员类不是内部类" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>在另一个类中定义的成员类可以声明为 <code class="language-plaintext highlighter-rouge">static</code>。 以下代码声明了一个顶层类 <code class="language-plaintext highlighter-rouge">A</code> 和一个静态成员类 <code class="language-plaintext highlighter-rouge">B</code>：</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">io.zwt.innnerclasses</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>
	<span class="c1">// A static member class</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">B</span> <span class="o">{</span>
		<span class="c1">// The body of class B goes here</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>一个静态成员类不是内部类。它被看作是顶层类。它亦被称为嵌套顶层类。因为它是一个顶层类，你不需要它的外层类的实例去创建它的对象。一个类 A 的实例和类 B 的实例可以独立地存在，因为它们都是顶层类。一个静态成员类可以声明为 <code class="language-plaintext highlighter-rouge">public</code>, <code class="language-plaintext highlighter-rouge">protected</code>，包访问级别，或者是<code class="language-plaintext highlighter-rouge"> private</code> 以限制它在外层类之外的访问权限。</p><h3 id="创建内部类对象"><span class="mr-2">创建内部类对象</span><a href="#创建内部类对象" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>创建局部内部类，匿名内部类，和静态成员类是非常直接的。局部内部类的对象在声明所在的内使用 <code class="language-plaintext highlighter-rouge">new</code> 创建对象。匿名内部类的对象在声明时候创建对象。静态成员类是另一类顶层类，其对象创建方式跟顶层类一样。</p><h3 id="访问外层类的成员"><span class="mr-2">访问外层类的成员</span><a href="#访问外层类的成员" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h3 id="局部变量访问的限制"><span class="mr-2">局部变量访问的限制</span><a href="#局部变量访问的限制" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A local inner class is declared inside a block—typically inside a method of a class. A local inner class can access the instance variables of its enclosing class as well as the local variables, which are in scope. The instance of an inner class exists within an instance of its enclosing class. Therefore, accessing the instance variables of the enclosing class inside a local inner class is not a problem because they exist throughout the lifecycle of the instance of the local inner class. However, the local variables in a method exist only during the execution of that method. All local variables become inaccessible when method execution is over. Java makes a copy of the local variables that are used inside a local inner class and stores that copy along with the inner class object. However, to guarantee that the values of the local variables can be reproduced when accessed inside the local inner class code after the method call is over, Java puts a restriction that the local variables must be effectively final. An effectively final variable is a variable whose value does not change after it is initialized. One way to have an effectively final variable is to declare the variable final. Another way is not to change its value after it is initialized. Therefore, a local variable or an argument to a method must be effectively final if it is used inside a local inner class. This restriction also applies to an anonymous inner class declared inside a method.</p><blockquote><p><strong>提示</strong> 在 Java 8 以前，如果一个局部变量是被局部内部类，或者匿名内部类访问的，它必须被声明为 <code class="language-plaintext highlighter-rouge">final</code>。 Java 8 更改了这个规则：局部变量不需要被声明为 <code class="language-plaintext highlighter-rouge">final</code>， 但它应该是 effectively final 的。 什么意思呢？就是说，在变量声明前面添加个 <code class="language-plaintext highlighter-rouge">final</code> 修饰符，仍然能够通过编译，相当于 <code class="language-plaintext highlighter-rouge">final</code>，就是所谓的 “effective final” ，就等效于 <code class="language-plaintext highlighter-rouge">final</code> 嘛。</p></blockquote><h3 id="内部类与继承"><span class="mr-2">内部类与继承</span><a href="#内部类与继承" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>An inner class can inherit from another inner class, a top-level class, or its enclosing class. For example, in the following snippet of code, inner class C inherits from inner class B; inner class D inherits from its enclosing top-level class A, and inner class F inherits from inner class A.B:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">B</span> <span class="o">{</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">C</span> <span class="kd">extends</span> <span class="no">B</span> <span class="o">{</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">D</span> <span class="kd">extends</span> <span class="no">A</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">E</span> <span class="kd">extends</span> <span class="no">A</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">F</span> <span class="kd">extends</span> <span class="no">B</span> <span class="o">{</span>
        
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">G</span> <span class="kd">extends</span> <span class="no">A</span><span class="o">.</span><span class="na">B</span> <span class="o">{</span>
    <span class="c1">// This code won't compile</span>
    <span class="c1">// 这段代码不能通过编译！</span>
<span class="o">}</span>

</pre></table></code></div></div><h3 id="内部类中不能有静态成员除非是编译时常量"><span class="mr-2">内部类中不能有静态成员（除非是编译时常量）</span><a href="#内部类中不能有静态成员除非是编译时常量" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Java 里面的 <code class="language-plaintext highlighter-rouge">static</code> 关键字使得一个结构变成顶层结构。因此，你不能在一个内部类里边定义任何静态成员（字段、方法或者是初始化语句块）。以下代码不能通过编译，因为内部类 <code class="language-plaintext highlighter-rouge">B</code> 声明了一个静态字段 <code class="language-plaintext highlighter-rouge">DAYS_IN_A_WEEK</code>:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">B</span> <span class="o">{</span>
        <span class="c1">// Cannot have the following declaration</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="no">DAYS_IN_A_WEEK</span> <span class="o">=</span> <span class="mi">7</span><span class="o">;</span> <span class="c1">// A compile-time error</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>然而，内部类里面可以有性质为编译时常量的静态字段。什么意思？请看以下代码：</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">B</span> <span class="o">{</span>
        <span class="c1">// Can have a compile-time static constant field</span>
        <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="kt">int</span> <span class="no">DAYS_IN_A_WEEK</span> <span class="o">=</span> <span class="mi">7</span><span class="o">;</span> <span class="c1">// OK</span>

        <span class="c1">// Cannot have the following declaration, because it is not</span>
        <span class="c1">// a compile-time constant, even though it is final</span>
        <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">str</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">);</span>
		<span class="c1">// 可以用 public final static String str = "Hello"; 是常量</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><blockquote><p>注意 成员接口和成员枚举是隐式 static 的，因此不能声明在内部类里。</p></blockquote><h3 id="内部类和编译器的魔法"><span class="mr-2">内部类和编译器的魔法</span><a href="#内部类和编译器的魔法" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>成员内部类和嵌套内部类：</p><p><code class="language-plaintext highlighter-rouge">&lt;outer-class-name&gt;$&lt;member-or-nested-class-name&gt;</code></p><p>局部内部类：</p><p><code class="language-plaintext highlighter-rouge">&lt;outer-class-name&gt;$&lt;a-number&gt;&lt;local-inner-class-name&gt;</code> 匿名内部类：</p><p><code class="language-plaintext highlighter-rouge">&lt;outer-class-name&gt;$&lt;a-number&gt;</code></p><h3 id="闭包与回调"><span class="mr-2">闭包与回调</span><a href="#闭包与回调" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>In functional programming, a higher order function is an anonymous function that can be treated as a data object. That is, it can be stored in a variable and passed around from one context to another. It might be invoked in a context that did not necessarily define it. Note that a higher order function is an anonymous function, so the invoking context does not have to know its name. A closure is a higher order function packaged with its defining environment. A closure carries with it the variables in scope when it was defined, and it can access those variables even when it is invoked in a context other than the context in which it was defined.</p><h3 id="在静态上下文定义内部类"><span class="mr-2">在静态上下文定义内部类</span><a href="#在静态上下文定义内部类" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>很少有用到，发现 static {} 里面可以放 {} 这样</p></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >Java</a> <a href="/tags/%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7/" class="post-tag no-text-decoration" >语言特性</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Java+%E5%86%85%E9%83%A8%E7%B1%BB+-+%E6%8B%9B%E6%96%87%E6%A1%83&url=https%3A%2F%2Fblog.zwt.io%2F2020%2F02%2F04%2Finner-class%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Java+%E5%86%85%E9%83%A8%E7%B1%BB+-+%E6%8B%9B%E6%96%87%E6%A1%83&u=https%3A%2F%2Fblog.zwt.io%2F2020%2F02%2F04%2Finner-class%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fblog.zwt.io%2F2020%2F02%2F04%2Finner-class%2F&text=Java+%E5%86%85%E9%83%A8%E7%B1%BB+-+%E6%8B%9B%E6%96%87%E6%A1%83" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/linux/2023/08/04/creating-pve-debian-cloud-init-template/">创建 PVE debian cloud-init 模板</a><li><a href="/linux/2023/03/20/esxi-cloud-init-example/">在 ESXi 使用 Cloud-init 安装系统的例子</a><li><a href="/java/2023/03/23/maven-default-http-blocker-override/">允许高版本 maven 使用 http 私有仓库</a><li><a href="/minio/2022/07/25/install-minio-on-ubuntu/">在 Ubuntu 安装 MinIO</a><li><a href="/virtualization/2023/02/24/proxmox-cloud-init-images/">在 pve 使用 cloud-init 镜像</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring-boot/">Spring Boot</a> <a class="post-tag" href="/tags/reactive/">Reactive</a> <a class="post-tag" href="/tags/javafx/">JavaFX</a> <a class="post-tag" href="/tags/oca/">OCA</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/tutorial/">Tutorial</a> <a class="post-tag" href="/tags/rsocket/">RSocket</a> <a class="post-tag" href="/tags/%E6%95%99%E7%A8%8B/">教程</a> <a class="post-tag" href="/tags/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/">笔试面试</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/2019/09/05/java-is-pass-by-value/"><div class="card-body"> <em class="small" data-ts="1567612800" data-df="YYYY-MM-DD" > 2019-09-05 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java是值传递</h3><div class="text-muted small"><p> Java是值传递 在一本Java面试参考书里面看到一个题目，有如下代码： public class Test { private void change(String str, char[] ch) { str = &quot;test ok&quot;; ch[0] = &#39;g&#39;; } public static void main(String[] ...</p></div></div></a></div><div class="card"> <a href="/2019/09/29/core-java-interview-cracking/"><div class="card-body"> <em class="small" data-ts="1569764522" data-df="YYYY-MM-DD" > 2019-09-29 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java核心技术及面试指南读书记录</h3><div class="text-muted small"><p> 目录 第1章　带你走进Java的世界 1.1　搭建Java开发环境，运行基本程序 1.1.1　在MyEclipse中开发第一个Java程序 1.1.2　第一个程序分析容易犯的错误 1.1.3　开发稍微复杂带函数调用的程序 1.1.4　可以通过Debug来排查问题 1.1.5　输入运行时的参数 1.1 这个小节基本可以略过了，内容很基础，习惯使用IntelliJ IDEA，内...</p></div></div></a></div><div class="card"> <a href="/2019/10/07/ets-foundation-test-review/"><div class="card-body"> <em class="small" data-ts="1570377600" data-df="YYYY-MM-DD" > 2019-10-07 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>EST 基础测试回顾</h3><div class="text-muted small"><p> 基础测试的情况 测试报告 当时第一次测试结果报告如下： 按照考试的主题（或者说考点）来看的话，Java Basics 正确率 6/7。然后，OO Concepts 过关的，Java Data Types 部分就只对了 3 题，有点危险。基础测试没有涉及到垃圾回收的内容，但是真正考试应该会有的，而且现在工作要求也肯定会问，需要了解的。关于操作符和条件判断结构居然也只有对了 6 个题，...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/2020/02/02/builder-pattern-in-depth/" class="btn btn-outline-primary" prompt="上一篇"><p>深入生成器设计模式</p></a> <a href="/2020/02/15/inner-class-exercises/" class="btn btn-outline-primary" prompt="下一篇"><p>Exercises for Inner class</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/gdouzwt">zwt</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring-boot/">Spring Boot</a> <a class="post-tag" href="/tags/reactive/">Reactive</a> <a class="post-tag" href="/tags/javafx/">JavaFX</a> <a class="post-tag" href="/tags/oca/">OCA</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/tutorial/">Tutorial</a> <a class="post-tag" href="/tags/rsocket/">RSocket</a> <a class="post-tag" href="/tags/%E6%95%99%E7%A8%8B/">教程</a> <a class="post-tag" href="/tags/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/">笔试面试</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
