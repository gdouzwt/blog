<!DOCTYPE html><html lang="zh-CN" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Spring Boot 消息" /><meta name="author" content="招文桃" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="消息通信" /><meta property="og:description" content="消息通信" /><link rel="canonical" href="https://blog.zwt.io/2020/02/01/spring-boot-messaging/" /><meta property="og:url" content="https://blog.zwt.io/2020/02/01/spring-boot-messaging/" /><meta property="og:site_name" content="招文桃" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-02-01T10:44:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Spring Boot 消息" /><meta name="twitter:site" content="@gdouzwt" /><meta name="twitter:creator" content="@招文桃" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"招文桃"},"dateModified":"2022-05-29T22:11:22+08:00","datePublished":"2020-02-01T10:44:00+08:00","description":"消息通信","headline":"Spring Boot 消息","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.zwt.io/2020/02/01/spring-boot-messaging/"},"url":"https://blog.zwt.io/2020/02/01/spring-boot-messaging/"}</script><title>Spring Boot 消息 | 招文桃</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="招文桃"><meta name="application-name" content="招文桃"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/gdouzwt/blog/main/img/large.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">招文桃</a></div><div class="site-subtitle font-italic">开发记录</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/gdouzwt" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/gdouzwt" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['zhao_at_'wen-tao.com',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>Spring Boot 消息</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Spring Boot 消息</h1><div class="post-meta text-muted"> <span> 发表于 <em class="" data-ts="1580525040" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2020-02-01 </em> </span> <span> 更新于 <em class="" data-ts="1653833482" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-05-29 </em> </span><div class="d-flex justify-content-between"> <span> 作者 <em> zwt </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="708 字"> <em>3 分钟</em>阅读</span></div></div></div><div class="post-content"><h2 id="消息通信"><span class="mr-2">消息通信</span><a href="#消息通信" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><img data-src="https://raw.githubusercontent.com/gdouzwt/blog/main/img/messaging.png" alt="messaging" data-proofer-ignore></p><p>最简单的消息机制，从A点到B点，通过某种信道传递消息，可以使一个简单的函数调用，一个socket连接，或者是一个HTTP请求。主要目的是发送端发送消息给接收端消费。</p><h3 id="消息通信使用场景"><span class="mr-2">消息通信使用场景</span><a href="#消息通信使用场景" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>下面列出一些消息通信常见的使用场景：</p><h4 id="可靠送达"><span class="mr-2">可靠送达</span><a href="#可靠送达" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>通常需要一些消息确认机制，如果中间有个Broker，消息生产者要通过一些确认，了解Broker确实收到了消息。同理在消费者段也需要给Broker确认已经收到消息。通常支付、股票交易等系统会使用这种模式。</p><h4 id="解耦"><span class="mr-2">解耦</span><a href="#解耦" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>按照业务领域解耦，使用bounded context.</p><h4 id="扩展和高可用"><span class="mr-2">扩展和高可用</span><a href="#扩展和高可用" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>多个Broker扩展。</p><h4 id="异步"><span class="mr-2">异步</span><a href="#异步" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>异步消息确保响应性，responsiveness</p><h4 id="互操作性"><span class="mr-2">互操作性</span><a href="#互操作性" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>采用Broker架构，实现AMQP等协议。</p><h3 id="消息模式和设计模式"><span class="mr-2">消息模式和设计模式</span><a href="#消息模式和设计模式" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="点到点"><span class="mr-2">点到点</span><a href="#点到点" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><img data-src="https://raw.githubusercontent.com/gdouzwt/blog/main/img/point-to-point.png" alt="point-to-point" data-proofer-ignore></p><h4 id="发布-订阅"><span class="mr-2">发布-订阅</span><a href="#发布-订阅" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><img data-src="https://raw.githubusercontent.com/gdouzwt/blog/main/img/pub-sub.png" alt="pub-sub" data-proofer-ignore></p><h4 id="设计模式"><span class="mr-2">设计模式</span><a href="#设计模式" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>A design patterns is a solution to a commonly known problem in the software design. By the same token, messaging patterns attempt to solve problems with messaging designs.</p><p>​ You will learn about the implementation of the following patterns during the course of this book, so I want to list them here with simple definitions to introduce them:</p><ul><li><em>Message type patterns:</em> Describe different forms of messaging, such as string(maybe plain text, JSON and/or XML), byte array, object, etc.<li><em>Message channel patterns:</em> Determine what kind of a transport(channel) will be used to send a message and what kind of attributes it will have. The idea here is that the producer and consumer know how to connect to the transport(channel) and can send and receive the message. Possible attributes of this transport include a request-reply feature and a unidirectional channel, which you will learn about very soon. One example of this pattern is the point-to-point channel.<li><em>Routing patterns:</em> Describe a way to send message between producer and consumers by providing a routing mechanism(filtering that’s dependent on a set of conditions) in an integrated solution. That can be accomplished by programming, or in some cases, the messaging system(the broker) can have these capabilities(as with RabbitMQ).<li><em>Service consumer patterns:</em> Describe how the consumers will behave when messages arrive, such as adding a transactional approach when processing the message. There are frameworks that allow you to initiate this kind of behavior(like the Spring Framework, which you do by adding the @Transactional, a transaction-base abstraction).<li><em>Contract patterns:</em> Contracts between the producer and consumer to have simple communications, such as when you do some REST calls, where you call a JSON or XML message with fields.<li><em>Message construction patterns:</em> Describe how a message is created so it can travel within the messaging system. For example, you can create an “envelope” that can have a body(the actual message) and some headers(with a correlation ID or a sequence or maybe a reply address). With a simple web request, you can add parameters or headers and the actual message becomes the body of the request, making the whole request part of the construction pattern. The HTTP protocol allows for that kind of communication (messaging).<li><em>Transformation patterns:</em> Describe how to change the content of the message within the messaging system. Think about a message that requires some processing and needs to be enhanced on the fly, such as a content enricher.</ul><p>As you can see, these patterns not only describe the messaging process but some of them describe how to handle some of the common use cases you saw earlier. Of cause, there are a lot more messaging patterns.</p></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/spring-boot/" class="post-tag no-text-decoration" >Spring Boot</a> <a href="/tags/messaging/" class="post-tag no-text-decoration" >Messaging</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Spring+Boot+%E6%B6%88%E6%81%AF+-+%E6%8B%9B%E6%96%87%E6%A1%83&url=https%3A%2F%2Fblog.zwt.io%2F2020%2F02%2F01%2Fspring-boot-messaging%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Spring+Boot+%E6%B6%88%E6%81%AF+-+%E6%8B%9B%E6%96%87%E6%A1%83&u=https%3A%2F%2Fblog.zwt.io%2F2020%2F02%2F01%2Fspring-boot-messaging%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fblog.zwt.io%2F2020%2F02%2F01%2Fspring-boot-messaging%2F&text=Spring+Boot+%E6%B6%88%E6%81%AF+-+%E6%8B%9B%E6%96%87%E6%A1%83" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/linux/2023/08/04/creating-pve-debian-cloud-init-template/">创建 PVE debian cloud-init 模板</a><li><a href="/linux/2023/03/20/esxi-cloud-init-example/">在 ESXi 使用 Cloud-init 安装系统的例子</a><li><a href="/java/2023/03/23/maven-default-http-blocker-override/">允许高版本 maven 使用 http 私有仓库</a><li><a href="/minio/2022/07/25/install-minio-on-ubuntu/">在 Ubuntu 安装 MinIO</a><li><a href="/virtualization/2023/02/24/proxmox-cloud-init-images/">在 pve 使用 cloud-init 镜像</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring-boot/">Spring Boot</a> <a class="post-tag" href="/tags/reactive/">Reactive</a> <a class="post-tag" href="/tags/javafx/">JavaFX</a> <a class="post-tag" href="/tags/oca/">OCA</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/tutorial/">Tutorial</a> <a class="post-tag" href="/tags/rsocket/">RSocket</a> <a class="post-tag" href="/tags/%E6%95%99%E7%A8%8B/">教程</a> <a class="post-tag" href="/tags/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/">笔试面试</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/2019/10/31/reactive-spring-boot-part1-a-kotlin-rest-service/"><div class="card-body"> <em class="small" data-ts="1572465600" data-df="YYYY-MM-DD" > 2019-10-31 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>响应式Spring Boot系列教程1</h3><div class="text-muted small"><p> Posted on October 28, 2019 by Trisha Gee 原文由 Trisha Gee 在当地时间2019年10月28日发布在 INTELLIJ IDEA BLOG 这个月（2019年10月）我在 SpringOne Platform（大会）做了一个现场代码演示，展示了如何构建一个 Spring Boot 应用，用来显示实时（股票）价格，用到了 Spr...</p></div></div></a></div><div class="card"> <a href="/2020/01/06/reactivce-spring-boot-tutorial/"><div class="card-body"> <em class="small" data-ts="1578267480" data-df="YYYY-MM-DD" > 2020-01-06 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>响应式Spring Boot系列教程</h3><div class="text-muted small"><p> 这篇文章起源于当时我看的一个 Spring 官方技术大会的演讲，也就是由 Trisha Gee 在 2019 年 10 月的 SpringOne Platform 分享的 Fully Reactive: Spring, Kotlin &amp;amp; JavaFX Playing Together。这个演讲整合了 Spring、Kotlin 还有 JavaFX 等技术，感觉挺好玩的。当时就想...</p></div></div></a></div><div class="card"> <a href="/2020/01/07/reactive-spring-boot-part2-a-rest-client-for-reactive-streams/"><div class="card-body"> <em class="small" data-ts="1578359880" data-df="YYYY-MM-DD" > 2020-01-07 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>响应式Spring Boot系列教程2</h3><div class="text-muted small"><p> 原文由 Trisha Gee 在当地时间2019年11月4日发布在 INTELLIJ IDEA BLOG 这是第二步，演示如何创建一个 Java 客户端连接到一个发送一系列服务端发送事件的流。我们将使用测试驱动开发来进行开发客户端并进行测试。视频在 B 站 本教程是一系列视频，概述了构建完整的Spring Boot的许多步骤，具有 Kotlin 服务后端，Java 客户端和 Ja...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/2020/01/30/java-thread-communication/" class="btn btn-outline-primary" prompt="上一篇"><p>Java线程间通信</p></a> <a href="/2020/02/01/spring-classes/" class="btn btn-outline-primary" prompt="下一篇"><p>Spring Boot的类</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/gdouzwt">zwt</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring-boot/">Spring Boot</a> <a class="post-tag" href="/tags/reactive/">Reactive</a> <a class="post-tag" href="/tags/javafx/">JavaFX</a> <a class="post-tag" href="/tags/oca/">OCA</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/tutorial/">Tutorial</a> <a class="post-tag" href="/tags/rsocket/">RSocket</a> <a class="post-tag" href="/tags/%E6%95%99%E7%A8%8B/">教程</a> <a class="post-tag" href="/tags/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/">笔试面试</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
